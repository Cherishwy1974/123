<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, initial-scale=1.0">
    <title>04_4.1_æ´›å¿…è¾¾æ³•åˆ™ (æœ€ç»ˆä¿®æ­£ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        window.MathJax = {
            tex: { 
                inlineMath: [['$', '$'], ['\\(', '\\)']], 
                displayMath: [['$$', '$$'], ['\\[', '\\]']], 
                processEscapes: true, 
                processEnvironments: true 
            },
            svg: { fontCache: 'global' },
            startup: { 
                pageReady: () => { 
                    return MathJax.startup.defaultPageReady().then(() => { 
                        console.log('âœ… MathJaxå·²åŠ è½½'); 
                    }); 
                } 
            }
        };
    </script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { width: 100%; height: 100%; margin: 0; padding: 0; }
        body { font-family: 'Noto Serif SC', serif; background: #1a1a2e; overflow: hidden; height: 100vh; width: 100vw; }
        .blackboard { width: 100vw; height: 100vh; background: #1a1a2e; position: relative; border: 10px solid #795548; margin: 0; }
        .avatar-container { position: fixed; top: 60%; left: 50%; transform: translate(-50%, -50%); width: 975px; height: 1105px; overflow: hidden; z-index: 50; pointer-events: none; background: transparent; }
        .wrapper { width: 100%; height: 100%; background: transparent; pointer-events: auto; }
        .slide-container { width: 100%; height: calc(100% - 100px); position: relative; }
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; visibility: hidden; transition: opacity 0.6s ease-in-out; display: flex; justify-content: center; align-items: center; padding: 2rem; padding-bottom: 0; background-color: transparent; }
        .slide.active { opacity: 1; visibility: visible; }
        .slide-content { display: flex; flex-direction: row; gap: 2rem; width: 100%; height: 100%; max-height: 100%; }
        .chalkboard { flex: 0 0 45%; padding: 20px; display: flex; flex-direction: column; justify-content: center; overflow-y: auto; }
        .chalkboard h2 { color: #f1c40f; border-bottom: 2px solid #f39c12; font-size: 28px; padding-bottom: 10px; margin-bottom: 20px; }
        .chalkboard h3 { color: #1abc9c; font-size: 22px; margin-top: 20px; margin-bottom: 10px; }
        .chalkboard p, .chalkboard li, .chalkboard ul { color: #e0e0e0; font-size: 18px; line-height: 1.8; margin: 8px 0; }
        .chalkboard strong { color: #e74c3c; }
        .math-formula { background-color: rgba(0,0,0,0.2); padding: 15px; border-radius: 5px; border-left: 4px solid #f39c12; font-size: 20px; color: #1abc9c; text-align: center; margin: 15px 0; }
        .visualization { flex: 1; padding: 20px; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .control-bar { position: fixed; left: -9999px; top: 50%; transform: translateY(-50%); width: 270px; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); display: flex; flex-direction: column; gap: 12px; z-index: 200; border-radius: 0 20px 20px 0; padding: 25px 20px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.2); }
        .btn { padding: 14px 22px; background: rgba(255, 255, 255, 0.25); color: #333; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 12px; cursor: pointer; font-size: 14px; font-weight: 600; width: 100%; text-align: center; }
        .btn.primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; }
        .subtitle-area { position: fixed; bottom: 10px; left: 50px; right: 50px; min-height: 60px; max-height: 90px; background: rgba(0,0,0,0.85); border-radius: 8px; display: flex; align-items: center; justify-content: center; z-index: 100; color: white; font-size: 22px; text-align: center; padding: 15px 20px; line-height: 1.4; overflow-y: auto; }
        .status-indicator { position: absolute; top: 10px; right: 10px; padding: 5px 10px; background: rgba(0,0,0,0.5); color: white; border-radius: 5px; font-size: 16px; z-index: 100; display: none; }
        .status-indicator.connected { background: rgba(76, 175, 80, 0.8); display: block; }
        .status-indicator.error { background: rgba(244, 67, 54, 0.8); display: block; }
        .status-indicator.connecting { background: rgba(255, 152, 0, 0.8); display: block; }
    </style>
</head>
<body class="blackboard">
    <div class="status-indicator" id="statusIndicator">ç­‰å¾…è¿æ¥</div>
    <div class="avatar-container"><div class="wrapper" id="avatarWrapper"></div></div>
    <div class="slide-container">
        
        <!-- Page 1: å¯¹åº”è¯­éŸ³1 -->
        <div class="slide active">
            <div class="slide-content">
                <div class="chalkboard" style="text-align: center;">
                    <h1 style="font-size: 2.8rem; font-weight: bold; color: #f1c40f; text-shadow: 0 0 10px rgba(241, 196, 15, 0.6);">æ´›å¿…è¾¾æ³•åˆ™</h1>
                    <p style="font-size: 1.2rem; color: #bdc3c7; margin-top: 1rem;">ç¬¬4ç«  - æ±‚è§£ä¸å®šå¼æé™çš„åˆ©å™¨</p>
                    <div style="margin-top: 2.5rem; text-align: left; display: inline-block;">
                        <p style="font-size: 1rem; margin: 0.8rem 0; color: #e0e0e0;">âœ“ ä¸å®šå¼çš„æ¦‚å¿µä¸åˆ†ç±»</p>
                        <p style="font-size: 1rem; margin: 0.8rem 0; color: #e0e0e0;">âœ“ æ´›å¿…è¾¾æ³•åˆ™çš„æ¡ä»¶ä¸åº”ç”¨</p>
                        <p style="font-size: 1rem; margin: 0.8rem 0; color: #e0e0e0;">âœ“ å…¸å‹ä¾‹é¢˜åˆ†æ­¥ç²¾è®²</p>
                        <p style="font-size: 1rem; margin: 0.8rem 0; color: #e0e0e0;">âœ“ å…¶ä»–ä¸å®šå¼çš„è½¬åŒ–æŠ€å·§</p>
                    </div>
                </div>
                <div class="visualization">
                    <svg class="w-full h-full" viewBox="0 0 600 500">
                        <rect fill="rgba(231,76,60,0.2)" height="80" rx="10" stroke="#e74c3c" stroke-width="4" width="180" x="100" y="150"></rect>
                        <text fill="#ecf0f1" font-size="32" text-anchor="middle" x="190" y="200">lim f/g</text>
                        <text fill="#f39c12" font-size="40" text-anchor="middle" x="300" y="195">=</text>
                        <rect fill="rgba(46,204,113,0.2)" height="80" rx="10" stroke="#2ecc71" stroke-width="4" width="200" x="320" y="150"></rect>
                        <text fill="#ecf0f1" font-size="32" text-anchor="middle" x="420" y="200">lim f'/g'</text>
                        <text fill="#f39c12" font-size="24" text-anchor="middle" x="300" y="280">0/0 æˆ– âˆ/âˆ å‹</text>
                        <text fill="#2ecc71" font-size="20" text-anchor="middle" x="300" y="350">åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 2: å¯¹åº”è¯­éŸ³2 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ç¬¬ä¸€ç§å›°å¢ƒï¼š$\frac{0}{0}$ å‹</h2>
                    <p>è€ƒè™‘è¿™ä¸ªæé™ï¼š$\lim\limits_{x \to 0} \frac{\sin x}{x}$</p>
                    <p style="margin-top:20px;">å¦‚æœç›´æ¥ä»£å…¥ $x=0$ ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ æˆ‘ä»¬å¾—åˆ°äº† $\frac{0}{0}$ çš„å½¢å¼ï¼è¿™åœ¨æ•°å­¦ä¸Šå«åšä¸å®šå¼ï¼Œå®ƒçš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ã€‚</p>
                </div>
                <div class="visualization">
                     <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">ç»å…¸ä¾‹å­</text>
                        <rect x="100" y="150" width="400" height="100" fill="rgba(255,255,255,0.1)" stroke="#ecf0f1" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="26" text-anchor="middle" x="300" y="210">lim (sin x) / x</text>
                        <text fill="#95a5a6" font-size="20" text-anchor="middle" x="300" y="240">x â†’ 0</text>
                        <rect x="150" y="300" width="300" height="150" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="3" rx="10">
                            <animate attributeName="opacity" dur="2s" values="0.5;1;0.5" repeatCount="indefinite"/>
                        </rect>
                        <text fill="#ecf0f1" font-size="70" text-anchor="middle" x="300" y="395">0/0</text>
                    </svg>
                </div>
            </div>
        </div>
        
        <!-- Page 3: å¯¹åº”è¯­éŸ³3 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ç¬¬äºŒç§å›°å¢ƒï¼š$\frac{\infty}{\infty}$ å‹</h2>
                     <p>è€ƒè™‘è¿™ä¸ªä¾‹å­ï¼š$\lim\limits_{x \to +\infty} \frac{e^x}{x^2}$</p>
                    <p style="margin-top:20px;">å½“xè¶‹äºæ­£æ— ç©·æ—¶ï¼Œåˆ†å­å’Œåˆ†æ¯éƒ½å†²å‘äº†æ— ç©·å¤§ã€‚æˆ‘ä»¬å¾—åˆ°çš„å°±æ˜¯ $\frac{\infty}{\infty}$ çš„å½¢å¼ã€‚å®ƒçš„ç»“æœåŒæ ·æ˜¯ä¸ç¡®å®šçš„ã€‚</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">å¦ä¸€ä¸ªä¾‹å­</text>
                        <rect x="100" y="150" width="400" height="100" fill="rgba(255,255,255,0.1)" stroke="#ecf0f1" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="26" text-anchor="middle" x="300" y="210">lim e^x / xÂ²</text>
                        <text fill="#95a5a6" font-size="20" text-anchor="middle" x="300" y="240">x â†’ +âˆ</text>
                        <rect x="150" y="300" width="300" height="150" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="3" rx="10">
                            <animate attributeName="opacity" dur="2s" values="0.5;1;0.5" repeatCount="indefinite" begin="0.5s"/>
                        </rect>
                        <text fill="#ecf0f1" font-size="60" text-anchor="middle" x="300" y="395">âˆ/âˆ</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 4: å¯¹åº”è¯­éŸ³4 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>å¦‚ä½•è§£å†³ä¸å®šå¼ï¼Ÿ -> æ´›å¿…è¾¾æ³•åˆ™</h2>
                    <p>é¢å¯¹ $\frac{0}{0}$ å’Œ $\frac{\infty}{\infty}$ è¿™ä¸¤ç§ä¸å®šå¼ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªå¼ºå¤§çš„æ­¦å™¨ï¼š<strong>æ´›å¿…è¾¾æ³•åˆ™</strong>ã€‚</p>
                    <p style="margin-top:30px; font-size:22px; color:#f39c12;">æ ¸å¿ƒæ€æƒ³ï¼šå½“æ±‚ $\frac{f(x)}{g(x)}$ çš„æé™å›°éš¾æ—¶ï¼Œå°è¯•æ±‚å®ƒä»¬<strong>å¯¼æ•°çš„æ¯”å€¼</strong>çš„æé™ï¼</p>
                </div>
                <div class="visualization">
                     <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">æ ¸å¿ƒæ€æƒ³</text>
                        <rect x="100" y="150" width="400" height="80" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="200">lim f(x) / g(x)</text>
                        <text fill="#f39c12" font-size="40" text-anchor="middle" x="300" y="280">â†“</text>
                        <rect x="100" y="320" width="400" height="80" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="370">lim f'(x) / g'(x)</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 5: å¯¹åº”è¯­éŸ³5 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ´›å¿…è¾¾æ³•åˆ™ ($\frac{0}{0}$ å‹)</h2>
                    <p>å½“æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œå…¬å¼æˆç«‹ï¼š$\lim\limits_{x \to a} \frac{f(x)}{g(x)} = \lim\limits_{x \to a} \frac{f'(x)}{g'(x)}$</p>
                    <p><strong>ä½¿ç”¨æ¡ä»¶:</strong></p>
                    <p>1. æé™æ˜¯ $\frac{0}{0}$ å‹ã€‚</p>
                    <p>2. åœ¨ç‚¹ $a$ çš„é‚»åŸŸå†…, $f(x)$ å’Œ $g(x)$ å¯å¯¼, ä¸” $g'(x) \neq 0$ã€‚</p>
                    <p>3. $\lim\limits_{x \to a} \frac{f'(x)}{g'(x)}$ å­˜åœ¨ï¼ˆæˆ–ä¸º $\infty$ï¼‰ã€‚</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">æ³•åˆ™ä¸æ¡ä»¶ (0/0)</text>
                        <rect x="80" y="150" width="180" height="80" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="170" y="200">lim f/g</text>
                        <text fill="#f39c12" font-size="35" text-anchor="middle" x="300" y="195">=</text>
                        <rect x="340" y="150" width="180" height="80" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="430" y="200">lim f'/g'</text>
                        <text fill="#2ecc71" font-size="20" text-anchor="middle" x="300" y="350">å‰æï¼šå¯å¯¼ & å¯¼æ•°æé™å­˜åœ¨</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 6: å¯¹åº”è¯­éŸ³6 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ´›å¿…è¾¾æ³•åˆ™ ($\frac{\infty}{\infty}$ å‹)</h2>
                    <p>è¯¥æ³•åˆ™åŒæ ·é€‚ç”¨äº $\frac{\infty}{\infty}$ å‹ï¼</p>
                    <p style="margin-top:20px;">åªéœ€å°†æ¡ä»¶1æ”¹ä¸ºï¼š</p>
                    <p style="margin-left:20px; margin-top:15px;">$\lim\limits_{x \to a} f(x) = \infty$ ä¸” $\lim\limits_{x \to a} g(x) = \infty$</p>
                    <p style="margin-top:20px;">å…¶ä»–æ¡ä»¶å’Œç»“è®ºå®Œå…¨ç›¸åŒã€‚</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">âˆ/âˆ å‹</text>
                        <rect x="100" y="180" width="400" height="150" fill="rgba(52,152,219,0.1)" stroke="#3498db" stroke-width="3" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="230">æé™ç±»å‹</text>
                        <text fill="#3498db" font-size="50" text-anchor="middle" x="300" y="295">âˆ/âˆ</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 7: å¯¹åº”è¯­éŸ³7 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä¾‹é¢˜1ï¼šæ±‚è§£ $\lim\limits_{x \to 0} \frac{\sin x}{x}$</h2>
                    <p><strong>æ­¥éª¤1ï¼šæ£€æŸ¥ç±»å‹</strong> â†’ æ˜¯ $\frac{0}{0}$ å‹ã€‚</p>
                    <p><strong>æ­¥éª¤2ï¼šåº”ç”¨æ³•åˆ™</strong> (åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼)</p>
                     <p>$\lim\limits_{x \to 0} \frac{(\sin x)'}{(x)'} = \lim\limits_{x \to 0} \frac{\cos x}{1}$</p>
                    <p><strong>æ­¥éª¤3ï¼šè®¡ç®—æ–°æé™</strong></p>
                    <p>$\frac{\cos 0}{1} = \frac{1}{1} = 1$</p>
                     <p style="margin-top:30px; color:#2ecc71; font-size:26px;"><strong>ç­”æ¡ˆï¼š1</strong></p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="80">ä¾‹1 å®æˆ˜</text>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="180">lim (sin x) / x</text>
                        <text fill="#f39c12" font-size="30" text-anchor="middle" x="300" y="250">â†“ åˆ†åˆ«æ±‚å¯¼</text>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="320">lim (cos x) / 1 = 1</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 8: å¯¹åº”è¯­éŸ³8 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä¾‹é¢˜2ï¼šæ±‚è§£ $\lim\limits_{x \to +\infty} \frac{e^x}{x^2}$</h2>
                    <p><strong>æ­¥éª¤1ï¼šæ£€æŸ¥ç±»å‹</strong> â†’ æ˜¯ $\frac{\infty}{\infty}$ å‹ã€‚</p>
                    <p><strong>æ­¥éª¤2ï¼šç¬¬ä¸€æ¬¡åº”ç”¨æ³•åˆ™</strong></p>
                     <div class="math-formula">
                        $\lim\limits_{x \to +\infty} \frac{(e^x)'}{(x^2)'} = \lim\limits_{x \to +\infty} \frac{e^x}{2x}$
                    </div>
                     <p style="margin-top:20px; color:#e74c3c;">é—®é¢˜ï¼šæ–°æé™ä»ç„¶æ˜¯ $\frac{\infty}{\infty}$ å‹ï¼</p>
                </div>
                 <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="80">ç¬¬1æ¬¡æ´›å¿…è¾¾</text>
                        <rect x="100" y="150" width="400" height="70" fill="rgba(52,152,219,0.1)" stroke="#3498db" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="300" y="195">e^x / xÂ²</text>
                        <line x1="300" y1="220" x2="300" y2="270" stroke="#f39c12" stroke-width="3"/>
                        <text fill="#f39c12" font-size="18" x="310" y="250">æ±‚å¯¼</text>
                        <rect x="100" y="270" width="400" height="70" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="300" y="315">e^x / 2x (ä»æ˜¯ âˆ/âˆ)</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 9: å¯¹åº”è¯­éŸ³9 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä¾‹2 - è¿ç»­ä½¿ç”¨æ³•åˆ™</h2>
                    <p style="color:#2ecc71; font-size:22px;">å¥½æ¶ˆæ¯ï¼šåªè¦æ¡ä»¶æ»¡è¶³,å¯ä»¥<strong>è¿ç»­ä½¿ç”¨</strong>æ´›å¿…è¾¾æ³•åˆ™ï¼</p>
                    <p><strong>æ­¥éª¤3ï¼šç¬¬äºŒæ¬¡åº”ç”¨æ³•åˆ™</strong></p>
                    <div class="math-formula">
                        $\lim\limits_{x \to +\infty} \frac{(e^x)'}{(2x)'} = \lim\limits_{x \to +\infty} \frac{e^x}{2}$
                    </div>
                    <p><strong>æ­¥éª¤4ï¼šè®¡ç®—æœ€ç»ˆç»“æœ</strong></p>
                     <div class="math-formula">
                        $\frac{+\infty}{2} = +\infty$
                    </div>
                    <p style="margin-top:30px; color:#f1c40f; font-size:26px;"><strong>ç­”æ¡ˆï¼š$+\infty$</strong></p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="80">ç¬¬2æ¬¡æ´›å¿…è¾¾</text>
                        <rect x="100" y="150" width="400" height="70" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="300" y="195">e^x / 2x</text>
                        <line x1="300" y1="220" x2="300" y2="270" stroke="#f39c12" stroke-width="3"/>
                         <text fill="#f39c12" font-size="18" x="310" y="250">å†æ¬¡æ±‚å¯¼</text>
                        <rect x="100" y="270" width="400" height="70" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="300" y="315">e^x / 2 â†’ +âˆ</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 10: å¯¹åº”è¯­éŸ³10 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>$0 \cdot \infty$ å‹ä¸å®šå¼</h2>
                    <p>å½¢å¼ï¼š$\lim f(x)g(x)$, å…¶ä¸­ $\lim f(x) = 0, \lim g(x) = \infty$</p>
                    <p style="margin-top:30px; color:#e74c3c;">éœ€è¦å…ˆ<strong>è½¬åŒ–</strong>ä¸ºåˆ†å¼å½¢å¼ï¼</p>
                    <div class="math-formula">
                        $f \cdot g = \frac{f}{\frac{1}{g}}$ (åŒ–ä¸º $\frac{0}{0}$) æˆ– $f \cdot g = \frac{g}{\frac{1}{f}}$ (åŒ–ä¸º $\frac{\infty}{\infty}$)
                    </div>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="60">è½¬åŒ–ç­–ç•¥</text>
                        <circle cx="300" cy="150" r="50" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="160">fÂ·g</text>
                        <line x1="200" y1="210" x2="150" y2="280" stroke="#f39c12" stroke-width="2"/>
                        <line x1="400" y1="210" x2="450" y2="280" stroke="#f39c12" stroke-width="2"/>
                        <circle cx="150" cy="320" r="50" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="150" y="325">f/(1/g)</text>
                        <circle cx="450" cy="320" r="50" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="450" y="325">g/(1/f)</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 11: å¯¹åº”è¯­éŸ³11 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>$\infty - \infty$ å‹ä¸å®šå¼</h2>
                    <p>å½¢å¼ï¼š$\lim [f(x)-g(x)]$, å…¶ä¸­ $\lim f(x) = \infty, \lim g(x) = \infty$</p>
                    <p style="margin-top:30px; color:#3498db;">è½¬åŒ–ç­–ç•¥ï¼š<strong>é€šåˆ†</strong>æˆ–<strong>æœ‰ç†åŒ–</strong>, å°†å…¶åˆå¹¶ä¸ºä¸€ä¸ªåˆ†å¼ã€‚</p>
                    <p style="margin-top:20px;">ä¾‹å¦‚ï¼š</p>
                    <div class="math-formula">
                        $\frac{1}{x-1} - \frac{1}{\ln x} = \frac{\ln x - (x-1)}{(x-1)\ln x}$
                    </div>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="60">è½¬åŒ–ç­–ç•¥</text>
                        <circle cx="300" cy="180" r="60" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="190">f - g</text>
                        <line x1="300" y1="240" x2="300" y2="300" stroke="#f39c12" stroke-width="3"/>
                        <text fill="#f39c12" font-size="18" x="310" y="275">é€šåˆ†</text>
                        <circle cx="300" cy="360" r="60" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="370">A / B</text>
                    </svg>
                </div>
            </div>
        </div>
        
        <!-- Page 12: å¯¹åº”è¯­éŸ³12 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>å¹‚æŒ‡å‡½æ•°å‹ä¸å®šå¼ ($1^{\infty}, 0^0, \infty^0$)</h2>
                    <p>è½¬åŒ–ç­–ç•¥ï¼š<strong>å–å¯¹æ•°</strong></p>
                    <p style="margin-top:20px;"><strong>æ­¥éª¤1ï¼š</strong>è®¾ $y = [f(x)]^{g(x)}$</p>
                    <p><strong>æ­¥éª¤2ï¼š</strong>ä¸¤è¾¹å–å¯¹æ•°ï¼š$\ln y = g(x) \ln f(x)$</p>
                    <p><strong>æ­¥éª¤3ï¼š</strong>æ±‚ $\lim (\ln y) = L$ã€‚(æ­¤æ­¥é€šå¸¸åŒ–ä¸º $0 \cdot \infty$ å‹)</p>
                    <p><strong>æ­¥éª¤4ï¼š</strong>åŸæé™ $= e^{L}$</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="60">è½¬åŒ–æ­¥éª¤</text>
                        <rect x="80" y="120" width="440" height="60" fill="rgba(155,89,182,0.1)" stroke="#9b59b6" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" x="100" y="160">â‘  è®¾ y = f(x)^g(x)</text>
                        <rect x="80" y="200" width="440" height="60" fill="rgba(155,89,182,0.1)" stroke="#9b59b6" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" x="100" y="240">â‘¡ å–å¯¹æ•°: ln y = gÂ·ln f</text>
                        <rect x="80" y="280" width="440" height="60" fill="rgba(155,89,182,0.1)" stroke="#9b59b6" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" x="100" y="320">â‘¢ æ±‚ lim(ln y) = L</text>
                        <rect x="80" y="360" width="440" height="60" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" x="100" y="400">â‘£ åŸæé™ = e^L</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 13: å¯¹åº”è¯­éŸ³13 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä¾‹é¢˜3ï¼šæ±‚è§£ $\lim\limits_{x \to 0^+} x \ln x$</h2>
                    <p><strong>1. ç±»å‹ï¼š</strong> $0 \cdot \infty$ å‹ã€‚</p>
                    <p><strong>2. è½¬åŒ–ï¼š</strong></p>
                    <div class="math-formula">
                        $\lim\limits_{x \to 0^+} \frac{\ln x}{\frac{1}{x}}$
                    </div>
                     <p>ç°åœ¨æ˜¯ $\frac{\infty}{\infty}$ å‹ã€‚</p>
                    <p><strong>3. åº”ç”¨æ³•åˆ™å¹¶æ±‚è§£ï¼š</strong></p>
                    <div class="math-formula">
                         $\lim\limits_{x \to 0^+} \frac{(\ln x)'}{\left(\frac{1}{x}\right)'} = \lim\limits_{x \to 0^+} \frac{\frac{1}{x}}{-\frac{1}{x^2}} = \lim\limits_{x \to 0^+} (-x) = 0$
                    </div>
                     <p style="margin-top:30px; color:#2ecc71; font-size:26px;"><strong>ç­”æ¡ˆï¼š0</strong></p>
                </div>
                <div class="visualization">
                     <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="80">ä¾‹3 å®æˆ˜</text>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="300" y="150">lim x ln x</text>
                        <text fill="#f39c12" font-size="20" text-anchor="middle" x="300" y="200">â†“ è½¬åŒ–ä¸º âˆ/âˆ</text>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="300" y="250">lim (ln x) / (1/x)</text>
                        <text fill="#f39c12" font-size="20" text-anchor="middle" x="300" y="300">â†“ æ´›å¿…è¾¾æ³•åˆ™</text>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="300" y="350">lim (-x) = 0</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 14: å¯¹åº”è¯­éŸ³14 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ³¨æ„äº‹é¡¹ï¼ˆä¸€ï¼‰</h2>
                    <p style="color:#e74c3c; font-size:24px;"><strong>å¿…é¡»å…ˆæ£€æŸ¥ç±»å‹ï¼</strong></p>
                    <p>åªæœ‰å½“æé™æ˜¯ä¸å®šå¼æ—¶,æ‰èƒ½ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™ã€‚æ»¥ç”¨æ³•åˆ™æ˜¯æœ€å¸¸è§çš„é”™è¯¯ï¼</p>
                    <p><strong>é”™è¯¯ç¤ºä¾‹:</strong> $\lim\limits_{x \to 0} \frac{x+1}{x+2}$</p>
                    <p>è¿™ä¸æ˜¯ä¸å®šå¼ï¼å¯ä»¥ç›´æ¥ä»£å…¥å¾— $\frac{1}{2}$ã€‚</p>
                    <p>å¦‚æœè¯¯ç”¨æ´›å¿…è¾¾æ³•åˆ™ä¼šå¾—åˆ° $\lim\limits_{x \to 0} \frac{1}{1} = 1$ï¼Œè¿™æ˜¯é”™è¯¯çš„ã€‚</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="60">å¯¹æ¯”</text>
                        <rect x="80" y="120" width="440" height="100" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="3" rx="10"/>
                        <text fill="#e74c3c" font-size="28" text-anchor="middle" x="300" y="160">âŒ é”™è¯¯ (æ»¥ç”¨æ´›å¿…è¾¾)</text>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="300" y="195">lim (x+1)/(x+2) â†’ lim 1/1 = 1</text>
                        <rect x="80" y="260" width="440" height="100" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="3" rx="10"/>
                        <text fill="#2ecc71" font-size="28" text-anchor="middle" x="300" y="300">âœ“ æ­£ç¡® (ç›´æ¥ä»£å…¥)</text>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="300" y="335">lim (x+1)/(x+2) = 1/2</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 15: å¯¹åº”è¯­éŸ³15 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ³¨æ„äº‹é¡¹ï¼ˆäºŒï¼‰</h2>
                    <p style="color:#e74c3c; font-size:24px;"><strong>ä¸æ˜¯å¯¹å•†æ±‚å¯¼ï¼</strong></p>
                    <p>æ´›å¿…è¾¾æ³•åˆ™æ˜¯<strong>åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼</strong>ã€‚</p>
                    <p><strong>âœ“ æ´›å¿…è¾¾æ³•åˆ™ï¼š</strong></p>
                    <div class="math-formula" style="border-color:#2ecc71;">
                        $\lim \frac{f(x)}{g(x)} = \lim \frac{f'(x)}{g'(x)}$
                    </div>
                    <p>ä¸è¦ä¸<strong>å•†çš„æ±‚å¯¼æ³•åˆ™</strong>æ··æ·†ï¼š</p>
                    <div class="math-formula" style="border-color:#e74c3c;">
                        $\left(\frac{f(x)}{g(x)}\right)' = \frac{f'(x)g(x) - f(x)g'(x)}{[g(x)]^2}$
                    </div>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                         <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="60">å¯¹æ¯”</text>
                        <rect x="80" y="140" width="440" height="100" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="3" rx="10"/>
                        <text fill="#2ecc71" font-size="24" text-anchor="middle" x="300" y="175">âœ“ æ´›å¿…è¾¾æ³•åˆ™ (æ±‚æé™)</text>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="300" y="210">lim f/g = lim f'/g'</text>
                        <rect x="80" y="280" width="440" height="100" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="3" rx="10"/>
                        <text fill="#e74c3c" font-size="24" text-anchor="middle" x="300" y="315">âœ— å•†çš„æ±‚å¯¼ (æ±‚å¯¼æ•°)</text>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="300" y="350">(f/g)' = (f'g-fg')/gÂ²</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 16: å¯¹åº”è¯­éŸ³16 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ´›å¿…è¾¾æ³•åˆ™æ€»ç»“ (ä¸€)</h2>
                    <h3>æ ¸å¿ƒå…¬å¼</h3>
                    <div class="math-formula">
                        $\lim \frac{f(x)}{g(x)} = \lim \frac{f'(x)}{g'(x)}$
                    </div>
                    <h3>ç›´æ¥é€‚ç”¨ç±»å‹</h3>
                    <p style="font-size: 22px; color:#e74c3c;">â€¢ $\frac{0}{0}$ å‹</p>
                    <p style="font-size: 22px; color:#3498db;">â€¢ $\frac{\infty}{\infty}$ å‹</p>
                    <h3>ä½¿ç”¨å‰æ</h3>
                     <p>1. å¿…é¡»æ˜¯ä¸å®šå¼ <br> 2. å‡½æ•°å¯å¯¼ & g'(x)â‰ 0 <br> 3. å¯¼æ•°æ¯”å€¼çš„æé™å­˜åœ¨</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="32" text-anchor="middle" x="300" y="60">æ³•åˆ™æ ¸å¿ƒå›é¡¾</text>
                        <circle cx="300" cy="250" r="100" fill="rgba(241,196,15,0.3)" stroke="#f39c12" stroke-width="4">
                            <animate attributeName="r" dur="3s" values="100;110;100" repeatCount="indefinite"/>
                        </circle>
                        <text fill="#f1c40f" font-size="24" text-anchor="middle" x="300" y="245">æ´›å¿…è¾¾æ³•åˆ™</text>
                        <text fill="#f1c40f" font-size="18" text-anchor="middle" x="300" y="275">lim f/g = lim f'/g'</text>
                        <text fill="#e74c3c" font-size="20" text-anchor="middle" x="140" y="150">0/0 å‹</text>
                        <line x1="190" y1="180" x2="250" y2="220" stroke="#f39c12" stroke-width="2"/>
                        <text fill="#3498db" font-size="20" text-anchor="middle" x="460" y="150">âˆ/âˆ å‹</text>
                        <line x1="410" y1="180" x2="350" y2="220" stroke="#f39c12" stroke-width="2"/>
                        <text fill="#2ecc71" font-size="20" text-anchor="middle" x="300" y="400">å‰æï¼šä¸å®šå¼ & å¯å¯¼ & æé™å­˜åœ¨</text>
                    </svg>
                </div>
            </div>
        </div>
        
        <!-- Page 17: å¯¹åº”è¯­éŸ³17 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ´›å¿…è¾¾æ³•åˆ™æ€»ç»“ (äºŒ)</h2>
                    <h3>éœ€è¦è½¬åŒ–çš„ç±»å‹</h3>
                    <p>é‡åˆ°ä»¥ä¸‹ç±»å‹ï¼Œéœ€è¦å…ˆå˜å½¢ä¸º $\frac{0}{0}$ æˆ– $\frac{\infty}{\infty}$ï¼š</p>
                    <ul>
                        <li><strong>$0 \cdot \infty$ å‹:</strong> åŒ–ä¸ºåˆ†å¼</li>
                        <li><strong>$\infty - \infty$ å‹:</strong> é€šåˆ†æˆ–æœ‰ç†åŒ–</li>
                        <li><strong>$1^{\infty}, 0^0, \infty^0$ å‹:</strong> å–å¯¹æ•°</li>
                    </ul>
                    <p style="margin-top: 25px; color: #f39c12; font-size:24px;"><strong>æ ¸å¿ƒæµç¨‹ï¼š</strong></p>
                    <p style="font-size:22px;"><strong>å…ˆåˆ¤æ–­ â†’ å†è½¬åŒ– â†’ åæ±‚å¯¼</strong></p>
                </div>
                 <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="32" text-anchor="middle" x="300" y="60">è½¬åŒ–ç­–ç•¥å›é¡¾</text>
                         <circle cx="150" cy="150" r="50" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="150" y="155">0Â·âˆ</text>
                        <circle cx="300" cy="150" r="50" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="300" y="155">âˆ-âˆ</text>
                        <circle cx="450" cy="150" r="50" fill="rgba(155,89,182,0.2)" stroke="#9b59b6" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="450" y="155">1^âˆ</text>
                        <line x1="300" y1="200" x2="300" y2="280" stroke="#f39c12" stroke-width="3"/>
                        <text fill="#f39c12" font-size="20" text-anchor="middle" x="300" y="245">è½¬åŒ–</text>
                        <rect x="150" y="300" width="300" height="80" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="345">0/0 æˆ– âˆ/âˆ</text>
                        <text fill="#2ecc71" font-size="20" text-anchor="middle" x="300" y="440">å…ˆåˆ¤æ–­ï¼Œå†è½¬åŒ–ï¼Œåæ±‚å¯¼ï¼</text>
                    </svg>
                </div>
            </div>
        </div>

    </div>
    <div class="subtitle-area" id="subtitleArea">æ¬¢è¿å­¦ä¹ æ´›å¿…è¾¾æ³•åˆ™!</div>
    <div class="control-bar">
        <div style="color: #f1c40f; font-weight: bold; margin-bottom: 15px; text-align: center;">ç¬¬ <span id="currentSlide">1</span> / <span id="totalSlides">17</span> é¡µ</div>
        <button class="btn" id="prevBtn" onclick="previousSlide()">â¬…ï¸ ä¸Šä¸€é¡µ</button>
        <button class="btn primary" id="startBtn" onclick="startTeaching()">ğŸ€ å¼€å§‹è®²è¯¾</button>
        <button class="btn" id="nextBtn" onclick="nextSlide()">ä¸‹ä¸€é¡µ â¡ï¸</button>
        <button class="btn" onclick="restart()">ğŸ”„ é‡æ–°å¼€å§‹</button>
        <button class="btn" id="autoPlayBtn" onclick="startAutoPlay()">ğŸ¬ è‡ªåŠ¨æ’­æ”¾</button>
    </div>
    <script type="module">
        // è™šæ‹ŸäººSDKåŠ è½½ä»£ç 
        window.playbackFinished = false; 
        try { 
            const { default: AvatarPlatform } = await import('./avatar-sdk-web_3.1.2.1002/index.js'); 
            window.AvatarPlatform = AvatarPlatform; 
            console.log('âœ… è®¯é£SDKæ¨¡å—å·²åŠ è½½'); 
        } catch (error) { 
            console.error('âŒ SDKåŠ è½½å¤±è´¥:', error); 
        } 
        window.dispatchEvent(new CustomEvent('sdkReady'));
    </script>
    <script>
        const subtitleScript = {
            "1": "æ¬¢è¿å­¦ä¹ æ´›å¿…è¾¾æ³•åˆ™ï¼šæ±‚è§£ä¸å®šå¼æé™çš„åˆ©å™¨ã€‚",
            "2": "å½“ç›´æ¥ä»£å…¥å¾—åˆ° 0/0 æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä¸å®šå¼ï¼Œæ— æ³•ç›´æ¥ç¡®å®šå…¶å€¼ã€‚",
            "3": "å½“å˜é‡è¶‹äºæ— ç©·ï¼Œå¾—åˆ° âˆ/âˆ æ—¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„ä¸å®šå¼ã€‚",
            "4": "ä¸ºè§£å†³ä¸å®šå¼é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·â€”â€”æ´›å¿…è¾¾æ³•åˆ™ã€‚",
            "5": "æ´›å¿…è¾¾æ³•åˆ™(0/0å‹)ï¼šåŸæé™ç­‰äºå…¶åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼åçš„æé™ã€‚",
            "6": "è¯¥æ³•åˆ™åŒæ ·é€‚ç”¨äº âˆ/âˆ å‹ä¸å®šå¼ï¼Œä½¿ç”¨æ¡ä»¶å’Œç»“è®ºå®Œå…¨ç›¸åŒã€‚",
            "7": "ä¾‹1(0/0å‹)ï¼šæ±‚ lim(sin x / x)ï¼Œåº”ç”¨æ³•åˆ™åå¾— lim(cos x / 1)ï¼Œç»“æœä¸º1ã€‚",
            "8": "ä¾‹2(âˆ/âˆå‹)ï¼šæ±‚ lim(e^x / xÂ²)ï¼Œé¦–æ¬¡åº”ç”¨æ³•åˆ™åå¾—åˆ° lim(e^x / 2x)ã€‚",
            "9": "æ–°æé™ä»ä¸º âˆ/âˆ å‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿ç»­ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™ï¼Œæœ€ç»ˆå¾—åˆ° +âˆã€‚",
            "10": "å…¶ä»–ä¸å®šå¼(0Â·âˆå‹)ï¼šéœ€å…ˆå˜å½¢ä¸º f/(1/g) æˆ– g/(1/f) æ¥åˆ›é€ åˆ†æ•°å½¢å¼ã€‚",
            "11": "å…¶ä»–ä¸å®šå¼(âˆ-âˆå‹)ï¼šé€šå¸¸é€šè¿‡é€šåˆ†æˆ–æœ‰ç†åŒ–ï¼Œå°†å…¶è½¬åŒ–ä¸º 0/0 å‹ã€‚",
            "12": "å…¶ä»–ä¸å®šå¼(å¹‚æŒ‡å‹)ï¼šé€šè¿‡å–å¯¹æ•°(ln)çš„æ–¹æ³•ï¼Œå°†å…¶è½¬åŒ–ä¸º 0Â·âˆ å‹ã€‚",
            "13": "ä¾‹3(0Â·âˆå‹)ï¼šæ±‚ lim(x ln x)ï¼Œè½¬åŒ–ä¸º lim(ln x / (1/x)) ååº”ç”¨æ³•åˆ™ï¼Œå¾—0ã€‚",
            "14": "æ³¨æ„ï¼šå¿…é¡»å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºä¸å®šå¼ï¼Œå¦åˆ™æ»¥ç”¨æ³•åˆ™å°†å¯¼è‡´é”™è¯¯ç»“æœã€‚",
            "15": "æ³¨æ„ï¼šæ´›å¿…è¾¾æ³•åˆ™æ˜¯åˆ†åˆ«æ±‚å¯¼ï¼Œåˆ‡å‹¿ä¸å•†çš„æ±‚å¯¼æ³•åˆ™ç›¸æ··æ·†ã€‚",
            "16": "æ€»ç»“ï¼šæ´›å¿…è¾¾æ³•åˆ™çš„æ ¸å¿ƒæ˜¯è½¬åŒ–ä¸å®šå¼æé™ä¸ºå¯¼æ•°çš„æ¯”å€¼æé™ã€‚",
            "17": "æ€»ç»“ï¼šå¯¹äºå¤æ‚ä¸å®šå¼ï¼Œç‰¢è®°å…ˆåˆ¤æ–­ï¼Œå†è½¬åŒ–ï¼Œåæ±‚å¯¼çš„åŸåˆ™ã€‚"
        };
        const speechScript = {
            "1": "åŒå­¦ä»¬å¥½ï¼æ¬¢è¿æ¥åˆ°æ´›å¿…è¾¾æ³•åˆ™çš„å­¦ä¹ ã€‚ä»Šå¤©æˆ‘ä»¬å°†å­¦ä¹ ä¸€ä¸ªéå¸¸é‡è¦ä¸”å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒä¸“é—¨ç”¨æ¥æ±‚è§£ä¸å®šå¼æé™ã€‚è¿™ä¸ªæ³•åˆ™åœ¨é«˜ç­‰æ•°å­¦ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼ŒæŒæ¡å®ƒèƒ½å¸®åŠ©æˆ‘ä»¬è½»æ¾è§£å†³å¾ˆå¤šçœ‹ä¼¼å›°éš¾çš„æé™é—®é¢˜ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼",
            "2": "æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç»å…¸çš„ä¾‹å­ï¼Œæ±‚sinxé™¤ä»¥xçš„æé™ï¼Œå½“xè¶‹äº0æ—¶ã€‚å¦‚æœç›´æ¥ä»£å…¥ï¼Œåˆ†å­sin0ç­‰äº0ï¼Œåˆ†æ¯ä¹Ÿæ˜¯0ã€‚æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ª0æ¯”0çš„å½¢å¼ã€‚è¿™åœ¨æ•°å­¦ä¸Šå«åšä¸å®šå¼ï¼Œå®ƒçš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼Œä¸èƒ½æƒ³å½“ç„¶åœ°è®¤ä¸ºæ˜¯1æˆ–è€…0ã€‚",
            "3": "é™¤äº†0æ¯”0ï¼Œè¿˜æœ‰å¦ä¸€ç§å¸¸è§çš„ä¸å®šå¼ã€‚æ¯”å¦‚æ±‚eçš„xæ¬¡æ–¹é™¤ä»¥xå¹³æ–¹çš„æé™ï¼Œå½“xè¶‹äºæ­£æ— ç©·æ—¶ã€‚è¿™æ—¶å€™ï¼Œåˆ†å­å’Œåˆ†æ¯éƒ½å†²å‘äº†æ— ç©·å¤§ã€‚æˆ‘ä»¬å¾—åˆ°çš„å°±æ˜¯æ— ç©·æ¯”æ— ç©·çš„å½¢å¼ã€‚å®ƒçš„ç»“æœåŒæ ·æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦ç‰¹æ®Šçš„å·¥å…·æ¥è§£å†³ã€‚",
            "4": "é‚£ä¹ˆï¼Œå¦‚ä½•è§£å†³è¿™äº›æ£˜æ‰‹çš„ä¸å®šå¼å‘¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸ªä¸“é—¨ä¸ºæ­¤è€Œç”Ÿçš„å¼ºå¤§æ­¦å™¨ï¼Œå®ƒçš„åå­—å«æ´›å¿…è¾¾æ³•åˆ™ã€‚è¿™ä¸ªæ³•åˆ™çš„æ€è·¯éå¸¸å·§å¦™ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œå½“ä¸€ä¸ªåˆ†å¼çš„æé™ä¸å¥½æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¯•è¯•çœ‹ï¼Œæ±‚å®ƒçš„åˆ†å­åˆ†æ¯å„è‡ªæ±‚å¯¼ä¹‹åçš„é‚£ä¸ªæ–°åˆ†å¼çš„æé™ã€‚",
            "5": "æˆ‘ä»¬å…ˆæ¥çœ‹0æ¯”0å‹æ´›å¿…è¾¾æ³•åˆ™çš„ä¸¥æ ¼å®šä¹‰ã€‚å®ƒæœ‰ä¸‰ä¸ªå‰ææ¡ä»¶ï¼šç¬¬ä¸€ï¼Œæé™å¿…é¡»æ˜¯0æ¯”0çš„å½¢å¼ã€‚ç¬¬äºŒï¼Œåˆ†å­åˆ†æ¯å‡½æ•°åœ¨æ±‚æé™ç‚¹çš„é™„è¿‘è¦å¯å¯¼ï¼Œå¹¶ä¸”åˆ†æ¯çš„å¯¼æ•°ä¸èƒ½æ˜¯0ã€‚ç¬¬ä¸‰ï¼Œæ±‚å¯¼ä¹‹åçš„æ–°åˆ†å¼ï¼Œå®ƒçš„æé™å¿…é¡»å­˜åœ¨ã€‚å¦‚æœè¿™ä¸‰ç‚¹éƒ½æ»¡è¶³ï¼Œé‚£ä¹ˆåŸæ¥çš„æé™å°±ç­‰äºæ±‚å¯¼åçš„æ–°æé™ã€‚",
            "6": "æ´›å¿…è¾¾æ³•åˆ™çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œå®ƒä¸ä»…å¯¹0æ¯”0å‹æœ‰æ•ˆï¼Œå¯¹æˆ‘ä»¬åˆšæ‰æåˆ°çš„æ— ç©·æ¯”æ— ç©·å‹ï¼Œä¹Ÿå®Œå…¨é€‚ç”¨ã€‚å®šç†çš„å†…å®¹å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œåªéœ€è¦æŠŠç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä»å‡½æ•°è¶‹äº0ï¼Œæ”¹æˆå‡½æ•°è¶‹äºæ— ç©·å¤§å°±å¯ä»¥äº†ã€‚å…¶ä»–æ¡ä»¶å’Œç»“è®ºéƒ½ä¿æŒä¸å˜ã€‚è¿™ä¸€ç‚¹éå¸¸æ–¹ä¾¿æˆ‘ä»¬è®°å¿†å’Œä½¿ç”¨ã€‚",
            "7": "ç†è®ºè¯´å®Œäº†ï¼Œæˆ‘ä»¬æ¥å®æˆ˜ä¸€ä¸‹ã€‚å›åˆ°æœ€åˆçš„é—®é¢˜ï¼Œæ±‚sinxé™¤ä»¥xçš„æé™ã€‚ç¬¬ä¸€æ­¥ï¼Œæ£€æŸ¥ç±»å‹ï¼Œæ˜¯0æ¯”0å‹ï¼Œæ»¡è¶³æ¡ä»¶ã€‚ç¬¬äºŒæ­¥ï¼Œåº”ç”¨æ³•åˆ™ï¼Œå¯¹åˆ†å­sinxæ±‚å¯¼å¾—åˆ°cosxï¼Œå¯¹åˆ†æ¯xæ±‚å¯¼å¾—åˆ°1ã€‚ç¬¬ä¸‰æ­¥ï¼Œè®¡ç®—æ–°æé™ï¼Œcosxé™¤ä»¥1çš„æé™ï¼Œå°±æ˜¯cos0ï¼Œç­‰äº1ã€‚é—®é¢˜è½»æ¾è§£å†³ï¼",
            "8": "æˆ‘ä»¬å†æ¥çœ‹æ— ç©·æ¯”æ— ç©·çš„ä¾‹å­ï¼Œeçš„xæ¬¡æ–¹é™¤ä»¥xå¹³æ–¹ã€‚ç¬¬ä¸€æ­¥ï¼Œæ£€æŸ¥ç±»å‹ï¼Œæ˜¯æ— ç©·æ¯”æ— ç©·ï¼Œæ»¡è¶³æ¡ä»¶ã€‚ç¬¬äºŒæ­¥ï¼Œåº”ç”¨æ³•åˆ™ï¼Œåˆ†å­æ±‚å¯¼è¿˜æ˜¯eçš„xæ¬¡æ–¹ï¼Œåˆ†æ¯æ±‚å¯¼æ˜¯2xã€‚æˆ‘ä»¬å¾—åˆ°çš„æ–°æé™æ˜¯eçš„xæ¬¡æ–¹é™¤ä»¥2xã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªæ–°æé™ä»ç„¶æ˜¯æ— ç©·æ¯”æ— ç©·çš„å½¢å¼ï¼è¿™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ",
            "9": "åˆ«æ‹…å¿ƒï¼Œæ´›å¿…è¾¾æ³•åˆ™çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œåªè¦æ¡ä»¶ä¸€ç›´æ»¡è¶³ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸€ç›´ç”¨ä¸‹å»ï¼å¯¹äºåˆšæ‰å¾—åˆ°çš„eçš„xæ¬¡æ–¹é™¤ä»¥2xï¼Œæˆ‘ä»¬å†æ¬¡æ£€æŸ¥ï¼Œå®ƒä»ç„¶æ˜¯æ— ç©·æ¯”æ— ç©·å‹ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®ƒå†æ¬¡ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™ï¼åˆ†å­æ±‚å¯¼è¿˜æ˜¯eçš„xæ¬¡æ–¹ï¼Œåˆ†æ¯æ±‚å¯¼å˜æˆäº†2ã€‚ç°åœ¨æé™å°±éå¸¸æ¸…æ™°äº†ï¼Œç»“æœæ˜¯æ­£æ— ç©·ã€‚",
            "10": "åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªè®¨è®ºäº†0æ¯”0å’Œæ— ç©·æ¯”æ— ç©·è¿™ä¸¤ç§æ ‡å‡†çš„ä¸å®šå¼ã€‚ä½†è¿˜æœ‰å…¶ä»–ç±»å‹ï¼Œæ¯”å¦‚0ä¹˜ä»¥æ— ç©·ã€‚å¯¹äºè¿™ç§ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåšä¸€ä¸ªå˜å½¢ï¼ŒæŠŠå®ƒå†™æˆåˆ†æ•°å½¢å¼ã€‚é€šå¸¸æ˜¯æŠŠå…¶ä¸­ä¸€ä¸ªå› å­ï¼Œå†™æˆ1é™¤ä»¥å®ƒçš„å€’æ•°çš„å½¢å¼ï¼Œæ”¾åˆ°åˆ†æ¯ä¸Šï¼Œè¿™æ ·å°±æŠŠå®ƒè½¬åŒ–æˆäº†æ ‡å‡†çš„0æ¯”0æˆ–è€…æ— ç©·æ¯”æ— ç©·å‹ã€‚",
            "11": "å¦ä¸€ç§ç±»å‹æ˜¯æ— ç©·å‡æ— ç©·ã€‚è¿™ç§ä¸å®šå¼é€šå¸¸å‡ºç°åœ¨åˆ†å¼ç›¸å‡çš„æƒ…å†µã€‚æˆ‘ä»¬çš„ç­–ç•¥æ˜¯ï¼Œé€šè¿‡é€šåˆ†ï¼ŒæŠŠä¸¤ä¸ªåˆ†å¼åˆå¹¶æˆä¸€ä¸ªã€‚è¿™æ ·ä¸€æ¥ï¼Œå®ƒé€šå¸¸å°±ä¼šå˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„0æ¯”0å‹äº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™äº†ã€‚",
            "12": "æœ€å¤æ‚çš„ä¸€ç±»ä¸å®šå¼æ˜¯å¹‚æŒ‡å‡½æ•°å‹ï¼Œæ¯”å¦‚1çš„æ— ç©·æ¬¡æ–¹ï¼Œ0çš„0æ¬¡æ–¹ç­‰ç­‰ã€‚å¯¹ä»˜å®ƒä»¬çš„é€šç”¨ç­–ç•¥æ˜¯å–å¯¹æ•°ã€‚æˆ‘ä»¬å…ˆè®¾åŸå‡½æ•°ä¸ºyï¼Œç„¶åä¸¤è¾¹å–è‡ªç„¶å¯¹æ•°ï¼Œåˆ©ç”¨å¯¹æ•°çš„æ€§è´¨æŠŠæŒ‡æ•°æ‹¿ä¸‹æ¥ã€‚è¿™æ ·é—®é¢˜å°±è½¬åŒ–æˆäº†æ±‚lnyçš„æé™ï¼Œå®ƒé€šå¸¸æ˜¯0ä¹˜ä»¥æ— ç©·å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§å‰é¢çš„æ–¹æ³•å¤„ç†ã€‚æœ€ååˆ«å¿˜äº†ï¼Œæ±‚å‡ºæ¥çš„æ˜¯lnyçš„æé™Lï¼ŒåŸæé™åº”è¯¥æ˜¯eçš„Læ¬¡æ–¹ã€‚",
            "13": "æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª0ä¹˜ä»¥æ— ç©·çš„ä¾‹å­ï¼Œæ±‚xä¹˜ä»¥lnxçš„æé™ï¼Œå½“xä»å³ä¾§è¶‹äº0æ—¶ã€‚è¿™æ˜¯å…¸å‹çš„0ä¹˜ä»¥æ— ç©·å‹ã€‚æˆ‘ä»¬æŠŠå®ƒå˜å½¢ä¸ºlnxé™¤ä»¥xåˆ†ä¹‹ä¸€ã€‚ç°åœ¨ï¼Œå®ƒå˜æˆäº†æ— ç©·æ¯”æ— ç©·å‹ï¼Œæ»¡è¶³äº†æ´›å¿…è¾¾æ³•åˆ™çš„æ¡ä»¶ã€‚åˆ†å­æ±‚å¯¼æ˜¯xåˆ†ä¹‹ä¸€ï¼Œåˆ†æ¯æ±‚å¯¼æ˜¯è´Ÿxå¹³æ–¹åˆ†ä¹‹ä¸€ï¼ŒåŒ–ç®€åç­‰äºè´Ÿxï¼Œæé™å°±æ˜¯0ã€‚",
            "14": "å­¦ä¹ äº†å¼ºå¤§çš„å·¥å…·ï¼Œæ›´è¦äº†è§£å®ƒçš„ä½¿ç”¨é™åˆ¶ã€‚æœ€éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä½¿ç”¨å‰å¿…é¡»æ£€æŸ¥å®ƒæ˜¯ä¸æ˜¯0æ¯”0æˆ–è€…æ— ç©·æ¯”æ— ç©·å‹ï¼å¦‚æœä¸æ˜¯ï¼Œæ¯”å¦‚ä¸€ä¸ªæé™å¯ä»¥ç›´æ¥ä»£å…¥ç®—å‡ºç»“æœï¼Œä½ å´é”™è¯¯åœ°ç”¨äº†æ´›å¿…è¾¾ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªå®Œå…¨é”™è¯¯çš„ç­”æ¡ˆã€‚æ‰€ä»¥ï¼Œæ£€æŸ¥ç±»å‹æ˜¯é“å¾‹ï¼",
            "15": "ç¬¬äºŒä¸ªå¸¸è§çš„é”™è¯¯ï¼Œæ˜¯æŠŠæ´›å¿…è¾¾æ³•åˆ™å’Œæˆ‘ä»¬ä¹‹å‰å­¦çš„å•†çš„æ±‚å¯¼æ³•åˆ™ææ··äº†ã€‚è¯·å¤§å®¶ä¸€å®šè®°ä½ï¼Œæ´›å¿…è¾¾æ³•åˆ™æ˜¯å¯¹åˆ†å­å’Œåˆ†æ¯åˆ†åˆ«æ±‚å¯¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ±‚æé™çš„æŠ€å·§ã€‚è€Œå•†çš„æ±‚å¯¼æ³•åˆ™æ˜¯æ±‚ä¸€ä¸ªåˆ†å¼å‡½æ•°çš„å¯¼æ•°ï¼Œä¸¤è€…å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ã€‚",
            "16": "å¥½äº†ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹æ´›å¿…è¾¾æ³•åˆ™çš„æ ¸å¿ƒå†…å®¹ã€‚å®ƒçš„å…¬å¼æ˜¯ï¼ŒåŸåˆ†å¼çš„æé™ç­‰äºå¯¼æ•°åˆ†å¼çš„æé™ã€‚å®ƒç›´æ¥é€‚ç”¨äº0æ¯”0å’Œæ— ç©·æ¯”æ— ç©·è¿™ä¸¤ç§ä¸å®šå¼ï¼Œå¹¶ä¸”ä½¿ç”¨æ—¶éœ€è¦æ»¡è¶³ä¸‰ä¸ªå‰ææ¡ä»¶ã€‚è¿™æ˜¯æ³•åˆ™çš„åŸºç¡€ã€‚",
            "17": "å¯¹äºå…¶ä»–éæ ‡å‡†ç±»å‹çš„ä¸å®šå¼ï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒæ€æƒ³æ˜¯è½¬åŒ–ã€‚0ä¹˜ä»¥æ— ç©·å‹åŒ–ä¸ºåˆ†å¼ï¼›æ— ç©·å‡æ— ç©·å‹è¿›è¡Œé€šåˆ†ï¼›è€Œå¹‚æŒ‡å‹åˆ™å–å¯¹æ•°ã€‚è¯·åŒå­¦ä»¬ç‰¢è®°è¿™ä¸ªæµç¨‹ï¼šå…ˆåˆ¤æ–­ç±»å‹ï¼Œå†é€‰æ‹©åˆé€‚çš„è½¬åŒ–æ–¹æ³•ï¼Œæœ€ååº”ç”¨æ´›å¿…è¾¾æ³•åˆ™æ±‚å¯¼ã€‚è°¢è°¢å¤§å®¶ï¼"
        };
        const actionMap = {
            "1": "A_RLH_welcome_O", "2": "A_RH_point_O", "3": "A_LH_introduced_O", "4": "A_RH_point_O",
            "5": "A_LH_introduced_O", "6": "A_LH_introduced_O", "7": "A_RH_point_O", "8": "A_LH_introduced_O",
            "9": "A_RH_point_O", "10": "A_LH_introduced_O", "11": "A_RH_point_O", "12": "A_LH_introduced_O",
            "13": "A_RH_point_O", "14": "A_LH_introduced_O", "15": "A_RH_point_O", "16": "A_LH_introduced_O", "17": "A_RLH_welcome_O"
        };

        let currentSlide = 0;
        const totalSlides = 17;
        let avatarPlatform = null;
        let isConnected = false;
        let isTeaching = false;
        let isAutoPlaying = false;
        let autoPageTimer = null; // è‡ªåŠ¨ç¿»é¡µå®šæ—¶å™¨
        const slides = document.querySelectorAll('.slide');

        function showSlide(index) {
            slides.forEach((slide, i) => slide.classList.toggle('active', i === index));
            currentSlide = index;
            document.getElementById('currentSlide').textContent = index + 1;
            if (window.MathJax && window.MathJax.typesetPromise) {
                window.MathJax.typesetPromise([slides[index]]).catch(err => console.error('MathJax æ¸²æŸ“å¤±è´¥:', err));
            }
            document.getElementById('prevBtn').disabled = index === 0;
            document.getElementById('nextBtn').disabled = index === totalSlides - 1;
            updateSubtitle(index + 1);
        }

        function nextSlide() { if (currentSlide < totalSlides - 1) { showSlide(currentSlide + 1); if (!isTeaching || isAutoPlaying) return; speakContent(currentSlide + 1); } }
        function previousSlide() { if (currentSlide > 0) { showSlide(currentSlide - 1); if (!isTeaching || isAutoPlaying) return; speakContent(currentSlide + 1); } }
        function restart() { isAutoPlaying = false; showSlide(0); if (avatarPlatform) { avatarPlatform.stop(); } document.getElementById('autoPlayBtn').disabled = false; document.getElementById('autoPlayBtn').textContent = 'ğŸ¬ è‡ªåŠ¨æ’­æ”¾'; if(isTeaching) { speakContent(1); } }
        function updateSubtitle(slideNum) { const subtitleArea = document.getElementById('subtitleArea'); subtitleArea.textContent = subtitleScript[slideNum] || ''; }

        async function speakContent(slideNum) {
            if (!isTeaching || !isConnected || !avatarPlatform) { console.log('âš ï¸ è™šæ‹Ÿäººæœªè¿æ¥æˆ–æœªå¼€å§‹è®²è¯¾'); return; }
            const content = speechScript[slideNum];
            if (!content) return;
            try {
                const action = actionMap[slideNum];
                if (action) { await avatarPlatform.writeCmd("action", action); }
                await avatarPlatform.writeText(content, { nlp: false });
                updateSubtitle(slideNum);
            } catch (error) { console.error('âŒ è®²è§£å¤±è´¥:', error); }
        }

        function getSlideDuration(slideNum) {
            const speech = speechScript[slideNum];
            if (!speech) return 5000;
            // ä¼°ç®—æ—¶é•¿ï¼šæ¯åˆ†é’Ÿçº¦200-250å­—ï¼Œè¿™é‡Œå–æ¯ç§’3.5ä¸ªå­—ï¼Œå³æ¯ä¸ªå­—çº¦285ms
            // å¢åŠ 2ç§’çš„ç¼“å†²æ—¶é—´ï¼ˆç”¨äºåœé¡¿å’Œç¿»é¡µåŠ¨ç”»ï¼‰
            return speech.length * 285 + 2000;
        }
        
        function updateStatus(message, type = 'normal') { const indicator = document.getElementById('statusIndicator'); if (indicator) { indicator.textContent = message; indicator.className = 'status-indicator'; if (type === 'connected') indicator.classList.add('connected'); else if (type === 'error') indicator.classList.add('error'); else if (type === 'connecting') indicator.classList.add('connecting'); } }

        function waitForSDK() {
            return new Promise((resolve, reject) => {
                if (window.AvatarPlatform) { resolve(); return; }
                const timeout = setTimeout(() => { reject(new Error('SDKåŠ è½½è¶…æ—¶')); }, 10000);
                window.addEventListener('sdkReady', function handler() { clearTimeout(timeout); window.removeEventListener('sdkReady', handler); resolve(); });
            });
        }

        async function startTeaching() {
            const startBtn = document.getElementById('startBtn');
            startBtn.textContent = 'ğŸ”„ å¯åŠ¨ä¸­...';
            startBtn.disabled = true;
            try {
                updateStatus('ç­‰å¾…SDK...', 'connecting');
                await waitForSDK();
                if (typeof window.AvatarPlatform === 'undefined') {
                    console.warn("è™šæ‹ŸäººSDK (AvatarPlatform) æœªæ‰¾åˆ°, å°†æ— æ³•æ’­æ”¾è¯­éŸ³å’ŒåŠ¨ä½œã€‚");
                    updateStatus('SDKæœªåŠ è½½', 'error');
                    startBtn.textContent = 'âŒ SDKæœªåŠ è½½';
                    return;
                }
                if (avatarPlatform) { avatarPlatform.destroy(); }
                avatarPlatform = new window.AvatarPlatform({ useInlinePlayer: true });
                avatarPlatform.on('connected', (initResp) => {
                    isConnected = true;
                    isTeaching = true;
                    updateStatus('å·²è¿æ¥', 'connected');
                    startBtn.textContent = 'ğŸ’– è™šæ‹Ÿäººå·²å°±ç»ª';
                    setTimeout(() => { speakContent(currentSlide + 1); }, 1000);
                }).on('disconnected', (err) => {
                    isConnected = false;
                    updateStatus('è¿æ¥æ–­å¼€', 'error');
                }).on('error', (error) => {
                    console.error('âŒ é”™è¯¯:', error);
                    updateStatus('é”™è¯¯', 'error');
                    startBtn.textContent = 'âŒ è¿æ¥å¤±è´¥';
                    isTeaching = false;
                });
                avatarPlatform.setApiInfo({ appId: 'e8c180ed', apiKey: 'e0c44f0e2ef0f47582ffa7e864da0d9b', apiSecret: 'MDZkNDNiZWU4NDkzNWM5MDQzMTY4N2Nh', sceneId: '237415046114840576', serverUrl: 'wss://avatar.cn-huadong-1.xf-yun.com/v1/interact' });
                avatarPlatform.setGlobalParams({ stream: { protocol: 'xrtc', alpha: 1, bitrate: 1000000, fps: 25 }, avatar: { avatar_id: '110332017', width: 1920, height: 1080, scale: 1, move_h: 0, move_v: 0, audio_format: 1 }, tts: { vcn: 'x4_yiting', speed: 50, pitch: 50, volume: 100 }, avatar_dispatch: { interactive_mode: 1, content_analysis: 0 } });
                await avatarPlatform.start({ wrapper: document.getElementById('avatarWrapper') });
            } catch (error) {
                console.error('âŒ å¯åŠ¨å¤±è´¥:', error);
                updateStatus('å¯åŠ¨å¤±è´¥', 'error');
                startBtn.textContent = 'ğŸ€ å¼€å§‹è®²è¯¾';
            }
        }

        async function startAutoPlay() {
            if (!isTeaching || !isConnected) {
                alert("è¯·å…ˆç­‰å¾…è™šæ‹Ÿäººè¿æ¥å°±ç»ªã€‚");
                return;
            }

            const autoPlayBtn = document.getElementById('autoPlayBtn');

            if (isAutoPlaying) {
                isAutoPlaying = false;
                autoPlayBtn.textContent = 'ğŸ¬ ç»§ç»­æ’­æ”¾';
                console.log('ğŸ›‘ è‡ªåŠ¨æ’­æ”¾å·²æš‚åœ');
                return;
            }

            isAutoPlaying = true;
            autoPlayBtn.textContent = 'â¸ï¸ æš‚åœæ’­æ”¾';
            console.log('â–¶ï¸ è‡ªåŠ¨æ’­æ”¾å¼€å§‹');

            for (let i = currentSlide; i < totalSlides; i++) {
                if (!isAutoPlaying) {
                    return;
                }
                
                showSlide(i);
                await speakContent(i + 1);

                const waitTime = getSlideDuration(i + 1);
                console.log(`ç¬¬ ${i + 1} é¡µï¼Œè¯­éŸ³æ—¶é•¿ä¼°ç®— ${waitTime} ms.`);

                await new Promise(resolve => setTimeout(resolve, waitTime));
            }

            isAutoPlaying = false;
            autoPlayBtn.textContent = 'ğŸ¬ è‡ªåŠ¨æ’­æ”¾';
            console.log('ğŸ‰ æ’­æ”¾å®Œæˆ');
            window.playbackFinished = true;
            document.title = "PLAYBACK_FINISHED";
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
            else if (e.key === 'ArrowLeft') { e.preventDefault(); previousSlide(); }
        });

        // è‡ªåŠ¨ç¿»é¡µå‡½æ•°ï¼ˆç«‹å³ç¿»é¡µï¼Œæ— å»¶è¿Ÿï¼‰
        function startAutoPageTurn() {
            if (autoPageTimer) {
                clearInterval(autoPageTimer);
            }

            autoPageTimer = setInterval(() => {
                if (currentSlide < totalSlides - 1) {
                    nextSlide();
                    console.log(`ğŸ“„ è‡ªåŠ¨ç¿»é¡µåˆ°ç¬¬ ${currentSlide + 1} é¡µ`);
                } else {
                    clearInterval(autoPageTimer);
                    console.log('âœ… å·²åˆ°è¾¾æœ€åä¸€é¡µï¼Œè‡ªåŠ¨ç¿»é¡µç»“æŸ');
                    window.playbackFinished = true;
                    document.title = "PLAYBACK_FINISHED";
                }
            }, 100); // æ¯100æ¯«ç§’ç¿»ä¸€é¡µ
        }

        document.getElementById('totalSlides').textContent = totalSlides;
        showSlide(0);

        // è‡ªåŠ¨å¯åŠ¨è™šæ‹Ÿäººå¹¶å¼€å§‹æ’­æ”¾
        setTimeout(() => {
            startTeaching().then(() => {
                // ç­‰å¾…è™šæ‹Ÿäººè¿æ¥æˆåŠŸåï¼Œç«‹å³å¼€å§‹æ’­æ”¾å’Œç¿»é¡µ
                const checkConnection = setInterval(() => {
                    if (isConnected && isTeaching) {
                        clearInterval(checkConnection);
                        console.log('âœ… è™šæ‹Ÿäººå·²è¿æ¥ï¼Œç«‹å³å¼€å§‹æ’­æ”¾å’Œç¿»é¡µ...');
                        startAutoPlay();
                        startAutoPageTurn(); // å¯åŠ¨è‡ªåŠ¨ç¿»é¡µ
                    }
                }, 500);
            });
        }, 1500);

    </script>
</body>
</html>