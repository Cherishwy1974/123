<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, initial-scale=1.0">
    <title>04_4.1_æ´›å¿…è¾¾æ³•åˆ™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']], processEscapes: true, processEnvironments: true },
            svg: { fontCache: 'global' },
            startup: { pageReady: () => { return MathJax.startup.defaultPageReady().then(() => { console.log('âœ… MathJaxå·²åŠ è½½'); }); } }
        };
    </script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { width: 100%; height: 100%; margin: 0; padding: 0; }
        body { font-family: 'Noto Serif SC', serif; background: #1a1a2e; overflow: hidden; height: 100vh; width: 100vw; }
        .blackboard { width: 100vw; height: 100vh; background: #1a1a2e; position: relative; border: 10px solid #795548; margin: 0; }
        .avatar-container { position: fixed; top: 60%; left: 50%; transform: translate(-50%, -50%); width: 975px; height: 1105px; overflow: hidden; z-index: 50; pointer-events: none; background: transparent; }
        .wrapper { width: 100%; height: 100%; background: transparent; pointer-events: auto; }
        .slide-container { width: 100%; height: 100%; position: relative; }
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; visibility: hidden; transition: opacity 0.6s ease-in-out; display: flex; justify-content: center; align-items: center; padding: 2rem; background-color: transparent; }
        .slide.active { opacity: 1; visibility: visible; }
        .slide-content { display: flex; flex-direction: row; gap: 2rem; width: 100%; height: 95%; }
        .chalkboard { flex: 0 0 45%; padding: 20px; display: flex; flex-direction: column; justify-content: center; overflow-y: auto; }
        .chalkboard h2 { color: #f1c40f; border-bottom: 2px solid #f39c12; font-size: 28px; padding-bottom: 10px; margin-bottom: 20px; }
        .chalkboard h3 { color: #1abc9c; font-size: 22px; margin-top: 20px; margin-bottom: 10px; }
        .chalkboard p, .chalkboard li { color: #e0e0e0; font-size: 18px; line-height: 1.8; margin: 8px 0; }
        .chalkboard strong { color: #e74c3c; }
        .math-formula { background-color: rgba(0,0,0,0.2); padding: 15px; border-radius: 5px; border-left: 4px solid #f39c12; font-size: 20px; color: #1abc9c; text-align: center; margin: 15px 0; }
        .visualization { flex: 1; padding: 20px; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .control-bar { position: fixed; left: -9999px; top: 50%; transform: translateY(-50%); width: 270px; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); display: flex; flex-direction: column; gap: 12px; z-index: 200; border-radius: 0 20px 20px 0; padding: 25px 20px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.2); }
        .btn { padding: 14px 22px; background: rgba(255, 255, 255, 0.25); color: #333; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 12px; cursor: pointer; font-size: 14px; font-weight: 600; width: 100%; text-align: center; }
        .btn.primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; }
        .subtitle-area { position: absolute; bottom: 20px; left: 50px; right: 50px; min-height: 50px; background: rgba(0,0,0,0.8); border-radius: 8px; display: flex; align-items: center; justify-content: center; z-index: 60; color: white; font-size: 23px; text-align: center; padding: 15px 20px; line-height: 1.4; }
        .status-indicator { position: absolute; top: 10px; right: 10px; padding: 5px 10px; background: rgba(0,0,0,0.5); color: white; border-radius: 5px; font-size: 16px; z-index: 100; display: none; }
        .status-indicator.connected { background: rgba(76, 175, 80, 0.8); display: block; }
        .status-indicator.error { background: rgba(244, 67, 54, 0.8); display: block; }
        .status-indicator.connecting { background: rgba(255, 152, 0, 0.8); display: block; }
    </style>
</head>
<body class="blackboard">
    <div class="status-indicator" id="statusIndicator">ç­‰å¾…è¿æ¥</div>
    <div class="avatar-container"><div class="wrapper" id="avatarWrapper"></div></div>
    <div class="slide-container">
        <!-- ç¬¬1é¡µ:å¼•å…¥ - ä¸å®šå¼çš„å›°å¢ƒ -->
        <div class="slide active">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ±‚æé™çš„å›°å¢ƒ</h2>
                    <p>å‰é¢å­¦ä¹ äº†æ±‚æé™çš„åŸºæœ¬æ–¹æ³•,</p>
                    <p>ä½†é‡åˆ°<strong>ä¸å®šå¼</strong>æ—¶ä¼šå¾ˆå›°éš¾!</p>

                    <h3>ä»€ä¹ˆæ˜¯ä¸å®šå¼?</h3>
                    <p>å½“ $x \to a$ æ—¶,å¦‚æœåˆ†å­åˆ†æ¯éƒ½è¶‹äº0æˆ–âˆ:</p>
                    <div class="math-formula">
                        $$\frac{0}{0}, \quad \frac{\infty}{\infty}$$
                    </div>
                    <p>æ— æ³•ç›´æ¥ä»£å…¥æ±‚å€¼!</p>

                    <h3>ä¾‹å­</h3>
                    <p>æ±‚ $\lim_{x \to 0} \frac{\sin x}{x}$</p>
                    <p>ç›´æ¥ä»£å…¥: $\frac{\sin 0}{0} = \frac{0}{0}$ <strong>ä¸å®šå¼!</strong></p>

                    <p style="margin-top: 20px; color: #f39c12;"><strong>æ´›å¿…è¾¾æ³•åˆ™</strong></p>
                    <p>ä¸“é—¨è§£å†³è¿™ç±»é—®é¢˜!</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="32" text-anchor="middle" x="300" y="60">ä¸å®šå¼çš„å›°å¢ƒ</text>

                        <!-- 0/0å‹ -->
                        <rect x="100" y="120" width="150" height="120" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="3" rx="10">
                            <animate attributeName="opacity" dur="2s" values="0.5;1;0.5" repeatCount="indefinite"/>
                        </rect>
                        <text fill="#ecf0f1" font-size="48" text-anchor="middle" x="175" y="190">0/0</text>

                        <!-- âˆ/âˆå‹ -->
                        <rect x="350" y="120" width="150" height="120" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="3" rx="10">
                            <animate attributeName="r" dur="2s" values="0.5;1;0.5" repeatCount="indefinite" begin="0.5s"/>
                        </rect>
                        <text fill="#ecf0f1" font-size="48" text-anchor="middle" x="425" y="190">âˆ/âˆ</text>

                        <!-- é—®å· -->
                        <circle cx="300" cy="300" r="50" fill="rgba(241,196,15,0.3)" stroke="#f39c12" stroke-width="4">
                            <animate attributeName="r" dur="2s" values="50;60;50" repeatCount="indefinite"/>
                        </circle>
                        <text fill="#f1c40f" font-size="48" text-anchor="middle" x="300" y="320">?</text>

                        <!-- æ´›å¿…è¾¾ -->
                        <rect x="150" y="380" width="300" height="80" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3" rx="10"/>
                        <text fill="#2ecc71" font-size="28" text-anchor="middle" x="300" y="420">æ´›å¿…è¾¾æ³•åˆ™</text>
                        <text fill="#2ecc71" font-size="18" text-anchor="middle" x="300" y="445">L'Hospital's Rule</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- ç¬¬2é¡µ:æ´›å¿…è¾¾æ³•åˆ™çš„å®šç† -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ´›å¿…è¾¾æ³•åˆ™</h2>
                    <h3>å®šç†å†…å®¹</h3>
                    <p>è®¾ $f(x)$ å’Œ $g(x)$ åœ¨ç‚¹ $a$ çš„æŸå»å¿ƒé‚»åŸŸå†…å¯å¯¼,</p>
                    <p>ä¸” $g'(x) \neq 0$, å¦‚æœ:</p>

                    <p style="margin-left: 30px;">1. $\lim_{x \to a} f(x) = 0$, $\lim_{x \to a} g(x) = 0$ (æˆ–éƒ½ä¸ºâˆ)</p>
                    <p style="margin-left: 30px;">2. $\lim_{x \to a} \frac{f'(x)}{g'(x)}$ å­˜åœ¨æˆ–ä¸ºâˆ</p>

                    <p>åˆ™:</p>
                    <div class="math-formula">
                        $$\lim_{x \to a} \frac{f(x)}{g(x)} = \lim_{x \to a} \frac{f'(x)}{g'(x)}$$
                    </div>

                    <h3>æ ¸å¿ƒæ€æƒ³</h3>
                    <p><strong>åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼!</strong></p>
                    <p style="color: #e74c3c;">æ³¨æ„: ä¸æ˜¯å¯¹æ•´ä¸ªåˆ†å¼æ±‚å¯¼!</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="50">æ´›å¿…è¾¾æ³•åˆ™ç¤ºæ„</text>

                        <!-- åŸå¼ -->
                        <rect x="80" y="100" width="180" height="80" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="170" y="135">f(x)</text>
                        <line x1="120" y1="150" x2="220" y2="150" stroke="#ecf0f1" stroke-width="2"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="170" y="170">g(x)</text>

                        <!-- ç®­å¤´ -->
                        <line x1="260" y1="140" x2="340" y2="140" stroke="#f39c12" stroke-width="4" marker-end="url(#arrow5)"/>
                        <text fill="#f39c12" font-size="18" text-anchor="middle" x="300" y="120">æ±‚å¯¼</text>

                        <!-- ç»“æœ -->
                        <rect x="340" y="100" width="180" height="80" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="430" y="135">f'(x)</text>
                        <line x1="380" y1="150" x2="480" y2="150" stroke="#ecf0f1" stroke-width="2"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="430" y="170">g'(x)</text>

                        <!-- æ¡ä»¶æ¡† -->
                        <rect x="80" y="220" width="440" height="200" fill="rgba(52,152,219,0.1)" stroke="#3498db" stroke-width="2" rx="10"/>
                        <text fill="#3498db" font-size="22" x="100" y="255">ä½¿ç”¨æ¡ä»¶:</text>

                        <text fill="#ecf0f1" font-size="18" x="100" y="290">â‘  f(x) â†’ 0, g(x) â†’ 0</text>
                        <text fill="#ecf0f1" font-size="18" x="120" y="315">æˆ– f(x) â†’ âˆ, g(x) â†’ âˆ</text>

                        <text fill="#ecf0f1" font-size="18" x="100" y="350">â‘¡ f, g åœ¨é‚»åŸŸå†…å¯å¯¼</text>

                        <text fill="#ecf0f1" font-size="18" x="100" y="385">â‘¢ g'(x) â‰  0</text>

                        <defs>
                            <marker id="arrow5" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#f39c12"/>
                            </marker>
                        </defs>
                    </svg>
                </div>
            </div>
        </div>

        <!-- ç¬¬3é¡µ:ä¾‹é¢˜1 - 0/0å‹ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä¾‹é¢˜1: 0/0å‹ä¸å®šå¼</h2>
                    <h3>é¢˜ç›®</h3>
                    <p>æ±‚ $\lim_{x \to 0} \frac{\sin x}{x}$</p>

                    <p><strong>è§£:</strong></p>
                    <p style="margin-left: 30px;">1. æ£€æŸ¥å‹åˆ«:</p>
                    <p style="margin-left: 50px;">$x \to 0$ æ—¶, $\sin x \to 0$, $x \to 0$</p>
                    <p style="margin-left: 50px;">æ˜¯ $\frac{0}{0}$ å‹,<strong>å¯ç”¨æ´›å¿…è¾¾!</strong></p>

                    <p style="margin-left: 30px;">2. åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼:</p>
                    <div class="math-formula">
                        $$\lim_{x \to 0} \frac{\sin x}{x} = \lim_{x \to 0} \frac{(\sin x)'}{(x)'}$$
                    </div>
                    <div class="math-formula">
                        $$= \lim_{x \to 0} \frac{\cos x}{1} = \cos 0 = 1$$
                    </div>

                    <p style="margin-top: 20px; color: #2ecc71;"><strong>ç­”æ¡ˆ: 1</strong></p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="24" text-anchor="middle" x="300" y="50">sin x / x æ±‚æé™</text>

                        <!-- æ­¥éª¤1 -->
                        <g opacity="0">
                            <rect x="80" y="100" width="440" height="60" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="2" rx="8"/>
                            <text fill="#ecf0f1" font-size="20" x="100" y="138">åŸå¼: sin x / x (xâ†’0)</text>
                            <animate attributeName="opacity" dur="10s" values="0;1;1;1;1;1" repeatCount="indefinite"/>
                        </g>

                        <!-- æ­¥éª¤2 -->
                        <g opacity="0">
                            <rect x="80" y="180" width="440" height="60" fill="rgba(52,152,219,0.1)" stroke="#3498db" stroke-width="2" rx="8"/>
                            <text fill="#ecf0f1" font-size="18" x="100" y="218">æ£€æŸ¥: 0/0å‹ âœ“ å¯ç”¨æ´›å¿…è¾¾</text>
                            <animate attributeName="opacity" dur="10s" values="0;0;1;1;1;1" repeatCount="indefinite"/>
                        </g>

                        <!-- æ­¥éª¤3 -->
                        <g opacity="0">
                            <rect x="80" y="260" width="440" height="60" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="8"/>
                            <text fill="#ecf0f1" font-size="18" x="100" y="298">æ±‚å¯¼: (sin x)' = cos x, (x)' = 1</text>
                            <animate attributeName="opacity" dur="10s" values="0;0;0;1;1;1" repeatCount="indefinite"/>
                        </g>

                        <!-- æ­¥éª¤4 -->
                        <g opacity="0">
                            <rect x="80" y="340" width="440" height="60" fill="rgba(155,89,182,0.1)" stroke="#9b59b6" stroke-width="2" rx="8"/>
                            <text fill="#ecf0f1" font-size="18" x="100" y="378">ç»“æœ: cos 0 / 1 = 1</text>
                            <animate attributeName="opacity" dur="10s" values="0;0;0;0;1;1" repeatCount="indefinite"/>
                        </g>

                        <!-- æœ€ç»ˆç­”æ¡ˆ -->
                        <g opacity="0">
                            <rect x="200" y="420" width="200" height="60" fill="rgba(241,196,15,0.2)" stroke="#f39c12" stroke-width="3" rx="10"/>
                            <text fill="#f1c40f" font-size="32" text-anchor="middle" x="300" y="460">= 1</text>
                            <animate attributeName="opacity" dur="10s" values="0;0;0;0;0;1" repeatCount="indefinite"/>
                        </g>
                    </svg>
                </div>
            </div>
        </div>

        <!-- ç¬¬4é¡µ:ä¾‹é¢˜2 - âˆ/âˆå‹ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä¾‹é¢˜2: âˆ/âˆå‹ä¸å®šå¼</h2>
                    <h3>é¢˜ç›®</h3>
                    <p>æ±‚ $\lim_{x \to +\infty} \frac{e^x}{x^2}$</p>

                    <p><strong>è§£:</strong></p>
                    <p style="margin-left: 30px;">1. æ£€æŸ¥å‹åˆ«:</p>
                    <p style="margin-left: 50px;">$x \to +\infty$ æ—¶, $e^x \to +\infty$, $x^2 \to +\infty$</p>
                    <p style="margin-left: 50px;">æ˜¯ $\frac{\infty}{\infty}$ å‹,<strong>å¯ç”¨æ´›å¿…è¾¾!</strong></p>

                    <p style="margin-left: 30px;">2. ç¬¬ä¸€æ¬¡æ±‚å¯¼:</p>
                    <div class="math-formula">
                        $$\lim_{x \to +\infty} \frac{e^x}{x^2} = \lim_{x \to +\infty} \frac{e^x}{2x}$$
                    </div>

                    <p style="margin-left: 30px;">3. ä»æ˜¯ $\frac{\infty}{\infty}$, å†æ¬¡æ±‚å¯¼:</p>
                    <div class="math-formula">
                        $$= \lim_{x \to +\infty} \frac{e^x}{2} = +\infty$$
                    </div>

                    <p style="margin-top: 15px; color: #e74c3c;">æ³¨æ„: å¯ä»¥<strong>è¿ç»­ä½¿ç”¨</strong>æ´›å¿…è¾¾!</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="24" text-anchor="middle" x="300" y="50">e^x / xÂ² æ±‚æé™</text>

                        <!-- åŸå¼ -->
                        <rect x="150" y="100" width="300" height="60" fill="rgba(52,152,219,0.1)" stroke="#3498db" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="300" y="138">e^x / xÂ² (âˆ/âˆ)</text>

                        <line x1="300" y1="160" x2="300" y2="190" stroke="#f39c12" stroke-width="3" marker-end="url(#arrow6)"/>
                        <text fill="#f39c12" font-size="16" x="310" y="180">ç¬¬1æ¬¡</text>

                        <!-- ç¬¬ä¸€æ¬¡æ±‚å¯¼ -->
                        <rect x="150" y="190" width="300" height="60" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="300" y="228">e^x / 2x (ä»âˆ/âˆ)</text>

                        <line x1="300" y1="250" x2="300" y2="280" stroke="#f39c12" stroke-width="3" marker-end="url(#arrow6)"/>
                        <text fill="#f39c12" font-size="16" x="310" y="270">ç¬¬2æ¬¡</text>

                        <!-- ç¬¬äºŒæ¬¡æ±‚å¯¼ -->
                        <rect x="150" y="280" width="300" height="60" fill="rgba(155,89,182,0.1)" stroke="#9b59b6" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="300" y="318">e^x / 2</text>

                        <line x1="300" y1="340" x2="300" y2="370" stroke="#2ecc71" stroke-width="3" marker-end="url(#arrow6)"/>
                        <text fill="#2ecc71" font-size="16" x="310" y="360">xâ†’âˆ</text>

                        <!-- ç»“æœ -->
                        <rect x="200" y="370" width="200" height="70" fill="rgba(241,196,15,0.2)" stroke="#f39c12" stroke-width="3" rx="10"/>
                        <text fill="#f1c40f" font-size="32" text-anchor="middle" x="300" y="415">+âˆ</text>

                        <defs>
                            <marker id="arrow6" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#f39c12"/>
                            </marker>
                        </defs>
                    </svg>
                </div>
            </div>
        </div>

        <!-- ç¬¬5é¡µ:å…¶ä»–ä¸å®šå¼çš„è½¬åŒ– -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>å…¶ä»–ä¸å®šå¼çš„è½¬åŒ–</h2>
                    <p>æ´›å¿…è¾¾åªèƒ½ç›´æ¥å¤„ç† $\frac{0}{0}$ å’Œ $\frac{\infty}{\infty}$</p>
                    <p>å…¶ä»–ä¸å®šå¼éœ€è¦<strong>è½¬åŒ–</strong>!</p>

                    <h3>å¸¸è§ç±»å‹</h3>
                    <ul style="margin-left: 30px;">
                        <li><strong>$0 \cdot \infty$ å‹:</strong> åŒ–ä¸º $\frac{0}{0}$ æˆ– $\frac{\infty}{\infty}$</li>
                    </ul>
                    <div class="math-formula">
                        $$f \cdot g = \frac{f}{\frac{1}{g}} \text{ æˆ– } \frac{g}{\frac{1}{f}}$$
                    </div>

                    <ul style="margin-left: 30px;">
                        <li><strong>$\infty - \infty$ å‹:</strong> é€šåˆ†åŒ–ä¸º $\frac{0}{0}$</li>
                        <li><strong>$1^{\infty}, 0^0, \infty^0$ å‹:</strong> å–å¯¹æ•°è½¬åŒ–</li>
                    </ul>

                    <p style="margin-top: 20px; color: #f39c12;">å…³é”®: å…ˆ<strong>è½¬åŒ–</strong>,å†<strong>æ±‚å¯¼</strong>!</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="26" text-anchor="middle" x="300" y="50">ä¸å®šå¼è½¬åŒ–</text>

                        <!-- 0Â·âˆ -->
                        <g>
                            <circle cx="150" cy="150" r="50" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="3"/>
                            <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="150" y="155">0Â·âˆ</text>
                            <line x1="200" y1="150" x2="250" y2="150" stroke="#f39c12" stroke-width="2" marker-end="url(#arrow7)"/>
                            <text fill="#f39c12" font-size="14" text-anchor="middle" x="225" y="140">åŒ–åˆ†å¼</text>
                            <circle cx="320" cy="150" r="50" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3"/>
                            <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="320" y="155">0/0</text>
                        </g>

                        <!-- âˆ-âˆ -->
                        <g>
                            <circle cx="150" cy="270" r="50" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="3"/>
                            <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="150" y="275">âˆ-âˆ</text>
                            <line x1="200" y1="270" x2="250" y2="270" stroke="#f39c12" stroke-width="2" marker-end="url(#arrow7)"/>
                            <text fill="#f39c12" font-size="14" text-anchor="middle" x="225" y="260">é€šåˆ†</text>
                            <circle cx="320" cy="270" r="50" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3"/>
                            <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="320" y="275">0/0</text>
                        </g>

                        <!-- 1^âˆ -->
                        <g>
                            <circle cx="150" cy="390" r="50" fill="rgba(155,89,182,0.2)" stroke="#9b59b6" stroke-width="3"/>
                            <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="150" y="395">1^âˆ</text>
                            <line x1="200" y1="390" x2="250" y2="390" stroke="#f39c12" stroke-width="2" marker-end="url(#arrow7)"/>
                            <text fill="#f39c12" font-size="14" text-anchor="middle" x="225" y="380">å–ln</text>
                            <circle cx="320" cy="390" r="50" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3"/>
                            <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="320" y="395">0/0</text>
                        </g>

                        <!-- æ´›å¿…è¾¾ -->
                        <circle cx="480" cy="270" r="60" fill="rgba(241,196,15,0.3)" stroke="#f39c12" stroke-width="4">
                            <animate attributeName="r" dur="2s" values="60;70;60" repeatCount="indefinite"/>
                        </circle>
                        <text fill="#f1c40f" font-size="18" text-anchor="middle" x="480" y="265">æ´›å¿…è¾¾</text>
                        <text fill="#f1c40f" font-size="16" text-anchor="middle" x="480" y="285">æ³•åˆ™</text>

                        <line x1="370" y1="150" x2="430" y2="210" stroke="#f39c12" stroke-width="2"/>
                        <line x1="370" y1="270" x2="420" y2="270" stroke="#f39c12" stroke-width="2"/>
                        <line x1="370" y1="390" x2="430" y2="330" stroke="#f39c12" stroke-width="2"/>

                        <defs>
                            <marker id="arrow7" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#f39c12"/>
                            </marker>
                        </defs>
                    </svg>
                </div>
            </div>
        </div>

        <!-- ç¬¬6é¡µ:ä¾‹é¢˜3 - 0Â·âˆå‹ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä¾‹é¢˜3: 0Â·âˆå‹ä¸å®šå¼</h2>
                    <h3>é¢˜ç›®</h3>
                    <p>æ±‚ $\lim_{x \to 0^+} x \ln x$</p>

                    <p><strong>è§£:</strong></p>
                    <p style="margin-left: 30px;">1. æ£€æŸ¥å‹åˆ«:</p>
                    <p style="margin-left: 50px;">$x \to 0^+$ æ—¶, $x \to 0$, $\ln x \to -\infty$</p>
                    <p style="margin-left: 50px;">æ˜¯ $0 \cdot \infty$ å‹,<strong>ä¸èƒ½ç›´æ¥ç”¨æ´›å¿…è¾¾!</strong></p>

                    <p style="margin-left: 30px;">2. è½¬åŒ–ä¸ºåˆ†å¼:</p>
                    <div class="math-formula">
                        $$\lim_{x \to 0^+} x \ln x = \lim_{x \to 0^+} \frac{\ln x}{\frac{1}{x}}$$
                    </div>
                    <p style="margin-left: 50px;">è¿™æ˜¯ $\frac{-\infty}{+\infty} = \frac{\infty}{\infty}$ å‹!</p>

                    <p style="margin-left: 30px;">3. ä½¿ç”¨æ´›å¿…è¾¾:</p>
                    <div class="math-formula">
                        $$= \lim_{x \to 0^+} \frac{\frac{1}{x}}{-\frac{1}{x^2}} = \lim_{x \to 0^+} (-x) = 0$$
                    </div>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="24" text-anchor="middle" x="300" y="50">x ln x æ±‚æé™ (xâ†’0+)</text>

                        <!-- æ­¥éª¤1 -->
                        <g opacity="0">
                            <rect x="80" y="100" width="440" height="60" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="2" rx="8"/>
                            <text fill="#ecf0f1" font-size="18" x="100" y="138">åŸå¼: x Â· ln x (0Â·âˆå‹)</text>
                            <animate attributeName="opacity" dur="12s" values="0;1;1;1;1;1" repeatCount="indefinite"/>
                        </g>

                        <!-- æ­¥éª¤2 -->
                        <g opacity="0">
                            <rect x="80" y="180" width="440" height="70" fill="rgba(52,152,219,0.1)" stroke="#3498db" stroke-width="2" rx="8"/>
                            <text fill="#ecf0f1" font-size="18" x="100" y="213">è½¬åŒ–: ln x / (1/x)</text>
                            <text fill="#3498db" font-size="16" x="100" y="235">(âˆ/âˆå‹ âœ“)</text>
                            <animate attributeName="opacity" dur="12s" values="0;0;1;1;1;1" repeatCount="indefinite"/>
                        </g>

                        <!-- æ­¥éª¤3 -->
                        <g opacity="0">
                            <rect x="80" y="270" width="440" height="70" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="8"/>
                            <text fill="#ecf0f1" font-size="18" x="100" y="303">æ´›å¿…è¾¾: (1/x) / (-1/xÂ²)</text>
                            <text fill="#2ecc71" font-size="16" x="100" y="325">= -x</text>
                            <animate attributeName="opacity" dur="12s" values="0;0;0;1;1;1" repeatCount="indefinite"/>
                        </g>

                        <!-- ç»“æœ -->
                        <g opacity="0">
                            <rect x="200" y="370" width="200" height="80" fill="rgba(241,196,15,0.2)" stroke="#f39c12" stroke-width="3" rx="10"/>
                            <text fill="#f1c40f" font-size="36" text-anchor="middle" x="300" y="420">= 0</text>
                            <animate attributeName="opacity" dur="12s" values="0;0;0;0;1;1" repeatCount="indefinite"/>
                        </g>
                    </svg>
                </div>
            </div>
        </div>

        <!-- ç¬¬7é¡µ:æ³¨æ„äº‹é¡¹ä¸æ˜“é”™ç‚¹ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ³¨æ„äº‹é¡¹ä¸æ˜“é”™ç‚¹</h2>

                    <h3>1. å¿…é¡»å…ˆæ£€æŸ¥å‹åˆ«</h3>
                    <p style="color: #e74c3c;">âŒ é”™è¯¯: çœ‹åˆ°åˆ†å¼å°±ç”¨æ´›å¿…è¾¾</p>
                    <p style="color: #2ecc71;">âœ“ æ­£ç¡®: å…ˆåˆ¤æ–­æ˜¯å¦ä¸º $\frac{0}{0}$ æˆ– $\frac{\infty}{\infty}$</p>

                    <h3>2. åˆ†åˆ«æ±‚å¯¼,ä¸æ˜¯å•†çš„å¯¼æ•°</h3>
                    <p style="color: #e74c3c;">âŒ é”™è¯¯: $\left(\frac{f}{g}\right)' = \frac{f'g-fg'}{g^2}$</p>
                    <p style="color: #2ecc71;">âœ“ æ­£ç¡®: åˆ†å­åˆ†æ¯<strong>å„è‡ª</strong>æ±‚å¯¼</p>

                    <h3>3. å¯ä»¥è¿ç»­ä½¿ç”¨</h3>
                    <p>å¦‚æœæ±‚å¯¼åä»æ˜¯ä¸å®šå¼,å¯ä»¥<strong>ç»§ç»­</strong>ç”¨!</p>

                    <h3>4. æœ‰æ—¶ä¸é€‚ç”¨</h3>
                    <p>å¦‚æœ $\lim \frac{f'}{g'}$ ä¸å­˜åœ¨ä¸”ä¸ä¸ºâˆ,</p>
                    <p>æ´›å¿…è¾¾æ³•åˆ™<strong>å¤±æ•ˆ</strong>,éœ€æ¢å…¶ä»–æ–¹æ³•!</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="60">æ˜“é”™ç‚¹è­¦ç¤º</text>

                        <!-- é”™è¯¯1 -->
                        <g>
                            <rect x="80" y="100" width="440" height="80" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="3" rx="10"/>
                            <text fill="#e74c3c" font-size="24" text-anchor="middle" x="300" y="125">âŒ</text>
                            <text fill="#ecf0f1" font-size="16" x="100" y="155">ä¸æ£€æŸ¥å‹åˆ«å°±ç”¨</text>
                            <text fill="#e74c3c" font-size="14" x="100" y="175">å¿…é¡»å…ˆåˆ¤æ–­ 0/0 æˆ– âˆ/âˆ!</text>
                        </g>

                        <!-- é”™è¯¯2 -->
                        <g>
                            <rect x="80" y="200" width="440" height="80" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="3" rx="10"/>
                            <text fill="#e74c3c" font-size="24" text-anchor="middle" x="300" y="225">âŒ</text>
                            <text fill="#ecf0f1" font-size="16" x="100" y="255">ç”¨å•†çš„æ±‚å¯¼æ³•åˆ™</text>
                            <text fill="#e74c3c" font-size="14" x="100" y="275">æ˜¯åˆ†åˆ«æ±‚å¯¼,ä¸æ˜¯(f/g)'!</text>
                        </g>

                        <!-- æ­£ç¡®åšæ³• -->
                        <rect x="100" y="300" width="400" height="160" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="3" rx="10"/>
                        <text fill="#2ecc71" font-size="22" x="120" y="335">æ­£ç¡®æ­¥éª¤:</text>
                        <text fill="#ecf0f1" font-size="16" x="140" y="365">1. åˆ¤æ–­å‹åˆ« (0/0 æˆ– âˆ/âˆ)</text>
                        <text fill="#ecf0f1" font-size="16" x="140" y="395">2. åˆ†å­åˆ†æ¯å„è‡ªæ±‚å¯¼</text>
                        <text fill="#ecf0f1" font-size="16" x="140" y="425">3. æ±‚æ–°çš„æé™</text>

                        <!-- è­¦å‘Šæ ‡å¿— -->
                        <circle cx="550" cy="250" r="35" fill="none" stroke="#e74c3c" stroke-width="4">
                            <animate attributeName="r" dur="2s" values="35;45;35" repeatCount="indefinite"/>
                        </circle>
                        <text fill="#e74c3c" font-size="36" text-anchor="middle" x="550" y="265">!</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- ç¬¬8é¡µ:æ€»ç»“ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ´›å¿…è¾¾æ³•åˆ™æ€»ç»“</h2>
                    <h3>æ ¸å¿ƒå†…å®¹</h3>
                    <div class="math-formula">
                        $$\lim \frac{f(x)}{g(x)} = \lim \frac{f'(x)}{g'(x)}$$
                    </div>

                    <h3>é€‚ç”¨æ¡ä»¶</h3>
                    <ul style="margin-left: 30px;">
                        <li>å‹åˆ«: $\frac{0}{0}$ æˆ– $\frac{\infty}{\infty}$</li>
                        <li>å¯å¯¼: $f, g$ åœ¨é‚»åŸŸå†…å¯å¯¼</li>
                        <li>$g'(x) \neq 0$</li>
                    </ul>

                    <h3>å…¶ä»–ä¸å®šå¼</h3>
                    <ul style="margin-left: 30px;">
                        <li>$0 \cdot \infty$ â†’ åŒ–ä¸ºåˆ†å¼</li>
                        <li>$\infty - \infty$ â†’ é€šåˆ†</li>
                        <li>$1^{\infty}, 0^0, \infty^0$ â†’ å–å¯¹æ•°</li>
                    </ul>

                    <p style="margin-top: 25px; color: #f39c12;"><strong>è®°ä½:</strong></p>
                    <p>æ´›å¿…è¾¾æ³•åˆ™æ˜¯æ±‚<strong>ä¸å®šå¼æé™</strong>çš„åˆ©å™¨,</p>
                    <p>ä½†å¿…é¡»<strong>å…ˆè½¬åŒ–</strong>å†<strong>æ±‚å¯¼</strong>!</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="32" text-anchor="middle" x="300" y="60">æ´›å¿…è¾¾æ³•åˆ™ä½“ç³»</text>

                        <!-- ä¸­å¿ƒ -->
                        <circle cx="300" cy="250" r="90" fill="rgba(241,196,15,0.3)" stroke="#f39c12" stroke-width="4">
                            <animate attributeName="r" dur="3s" values="90;100;90" repeatCount="indefinite"/>
                        </circle>
                        <text fill="#f1c40f" font-size="24" text-anchor="middle" x="300" y="245">æ´›å¿…è¾¾</text>
                        <text fill="#f1c40f" font-size="20" text-anchor="middle" x="300" y="275">æ³•åˆ™</text>

                        <!-- 0/0 -->
                        <circle cx="140" cy="140" r="50" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="3">
                            <animate attributeName="r" dur="3s" values="50;60;50" repeatCount="indefinite" begin="0.5s"/>
                        </circle>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="140" y="145">0/0å‹</text>
                        <line x1="190" y1="180" x2="250" y2="220" stroke="#f39c12" stroke-width="2"/>

                        <!-- âˆ/âˆ -->
                        <circle cx="460" cy="140" r="50" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="3">
                            <animate attributeName="r" dur="3s" values="50;60;50" repeatCount="indefinite" begin="1s"/>
                        </circle>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="460" y="145">âˆ/âˆå‹</text>
                        <line x1="410" y1="180" x2="350" y2="220" stroke="#f39c12" stroke-width="2"/>

                        <!-- 0Â·âˆ -->
                        <circle cx="140" cy="380" r="50" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3">
                            <animate attributeName="r" dur="3s" values="50;60;50" repeatCount="indefinite" begin="1.5s"/>
                        </circle>
                        <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="140" y="380">0Â·âˆ</text>
                        <text fill="#ecf0f1" font-size="12" text-anchor="middle" x="140" y="395">è½¬åŒ–</text>
                        <line x1="190" y1="340" x2="250" y2="300" stroke="#f39c12" stroke-width="2"/>

                        <!-- å…¶ä»– -->
                        <circle cx="460" cy="380" r="50" fill="rgba(155,89,182,0.2)" stroke="#9b59b6" stroke-width="3">
                            <animate attributeName="r" dur="3s" values="50;60;50" repeatCount="indefinite" begin="2s"/>
                        </circle>
                        <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="460" y="375">å…¶ä»–</text>
                        <text fill="#ecf0f1" font-size="12" text-anchor="middle" x="460" y="393">1^âˆç­‰</text>
                        <line x1="410" y1="340" x2="350" y2="300" stroke="#f39c12" stroke-width="2"/>

                        <!-- åº•éƒ¨æ€»ç»“ -->
                        <text fill="#2ecc71" font-size="20" text-anchor="middle" x="300" y="470">æ±‚ä¸å®šå¼æé™çš„åˆ©å™¨!</text>
                    </svg>
                </div>
            </div>
        </div>
    </div>
    <div class="subtitle-area" id="subtitleArea">æ¬¢è¿å­¦ä¹ æ´›å¿…è¾¾æ³•åˆ™!</div>
    <div class="control-bar">
        <div style="color: #f1c40f; font-weight: bold; margin-bottom: 15px; text-align: center;">ç¬¬ <span id="currentSlide">1</span> / <span id="totalSlides">8</span> é¡µ</div>
        <button class="btn" id="prevBtn" onclick="previousSlide()">â¬…ï¸ ä¸Šä¸€é¡µ</button>
        <button class="btn primary" id="startBtn" onclick="startTeaching()">ğŸ€ å¼€å§‹è®²è¯¾</button>
        <button class="btn" id="nextBtn" onclick="nextSlide()">ä¸‹ä¸€é¡µ â¡ï¸</button>
        <button class="btn" onclick="restart()">ğŸ”„ é‡æ–°å¼€å§‹</button>
        <button class="btn" id="autoPlayBtn" onclick="startAutoPlay()">ğŸ¬ è‡ªåŠ¨æ’­æ”¾</button>
    </div>
    <script type="module">
        window.playbackFinished = false;
        try { const { default: AvatarPlatform, SDKEvents, PlayerEvents, RecorderEvents, UserMedia } = await import('./avatar-sdk-web_3.1.2.1002/index.js'); window.AvatarPlatform = AvatarPlatform; window.SDKEvents = SDKEvents; window.PlayerEvents = PlayerEvents; window.RecorderEvents = RecorderEvents; window.UserMedia = UserMedia; console.log('âœ… è®¯é£SDKæ¨¡å—å·²åŠ è½½'); } catch (error) { console.error('âŒ SDKåŠ è½½å¤±è´¥:', error); } window.dispatchEvent(new CustomEvent('sdkReady'));
    </script>
    <script>
        const subtitleScript = { "1": "å‰é¢å­¦ä¹ äº†æ±‚æé™çš„åŸºæœ¬æ–¹æ³•,ä½†é‡åˆ°ä¸å®šå¼æ—¶ä¼šå¾ˆå›°éš¾!ä»€ä¹ˆæ˜¯ä¸å®šå¼?å½“xè¶‹äºaæ—¶,å¦‚æœåˆ†å­åˆ†æ¯éƒ½è¶‹äº0æˆ–æ— ç©·,å°±æ— æ³•ç›´æ¥ä»£å…¥æ±‚å€¼ã€‚æ´›å¿…è¾¾æ³•åˆ™ä¸“é—¨è§£å†³è¿™ç±»é—®é¢˜!", "2": "æ´›å¿…è¾¾æ³•åˆ™çš„å®šç†å†…å®¹:å¦‚æœfå’Œgåœ¨ç‚¹aé™„è¿‘å¯å¯¼,ä¸”å½¢æˆ0æ¯”0æˆ–æ— ç©·æ¯”æ— ç©·å‹,åˆ™fæ¯”gçš„æé™ç­‰äºfæ’‡æ¯”gæ’‡çš„æé™!æ ¸å¿ƒæ€æƒ³æ˜¯åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼ã€‚æ³¨æ„:ä¸æ˜¯å¯¹æ•´ä¸ªåˆ†å¼æ±‚å¯¼!", "3": "çœ‹ç¬¬ä¸€ä¸ªä¾‹é¢˜:æ±‚sin xæ¯”xå½“xè¶‹äº0çš„æé™ã€‚å…ˆæ£€æŸ¥å‹åˆ«,xè¶‹äº0æ—¶sin xä¹Ÿè¶‹äº0,æ˜¯0æ¯”0å‹,å¯ä»¥ç”¨æ´›å¿…è¾¾!åˆ†å­sin xæ±‚å¯¼å¾—cos x,åˆ†æ¯xæ±‚å¯¼å¾—1,æ‰€ä»¥ç»“æœæ˜¯cos 0ç­‰äº1ã€‚", "4": "å†çœ‹æ— ç©·æ¯”æ— ç©·å‹çš„ä¾‹å­:æ±‚eçš„xæ¬¡æ–¹æ¯”xå¹³æ–¹å½“xè¶‹äºæ­£æ— ç©·çš„æé™ã€‚è¿™æ˜¯æ— ç©·æ¯”æ— ç©·å‹,å¯ä»¥ç”¨æ´›å¿…è¾¾!ç¬¬ä¸€æ¬¡æ±‚å¯¼å¾—eçš„xæ¬¡æ–¹æ¯”2x,ä»ç„¶æ˜¯æ— ç©·æ¯”æ— ç©·,å†æ±‚å¯¼å¾—eçš„xæ¬¡æ–¹æ¯”2,ç»“æœæ˜¯æ­£æ— ç©·ã€‚æ³¨æ„å¯ä»¥è¿ç»­ä½¿ç”¨æ´›å¿…è¾¾!", "5": "æ´›å¿…è¾¾åªèƒ½ç›´æ¥å¤„ç†0æ¯”0å’Œæ— ç©·æ¯”æ— ç©·,å…¶ä»–ä¸å®šå¼éœ€è¦è½¬åŒ–!0ä¹˜æ— ç©·å‹åŒ–ä¸ºåˆ†å¼,æ— ç©·å‡æ— ç©·å‹é€šåˆ†,1çš„æ— ç©·æ¬¡æ–¹ã€0çš„0æ¬¡æ–¹ã€æ— ç©·çš„0æ¬¡æ–¹å‹å–å¯¹æ•°è½¬åŒ–ã€‚å…³é”®æ˜¯å…ˆè½¬åŒ–å†æ±‚å¯¼!", "6": "çœ‹ä¸€é“0ä¹˜æ— ç©·å‹çš„ä¾‹é¢˜:æ±‚xä¹˜ln xå½“xè¶‹äº0æ­£çš„æé™ã€‚xè¶‹äº0,ln xè¶‹äºè´Ÿæ— ç©·,æ˜¯0ä¹˜æ— ç©·å‹,ä¸èƒ½ç›´æ¥ç”¨æ´›å¿…è¾¾!è½¬åŒ–ä¸ºln xé™¤ä»¥1é™¤ä»¥x,è¿™æ˜¯æ— ç©·æ¯”æ— ç©·å‹ã€‚ç”¨æ´›å¿…è¾¾æ±‚å¯¼,åˆ†å­1é™¤ä»¥x,åˆ†æ¯è´Ÿ1é™¤ä»¥xå¹³æ–¹,åŒ–ç®€å¾—è´Ÿx,ç»“æœç­‰äº0ã€‚", "7": "æ€»ç»“æ³¨æ„äº‹é¡¹å’Œæ˜“é”™ç‚¹ã€‚ç¬¬ä¸€,å¿…é¡»å…ˆæ£€æŸ¥å‹åˆ«,ä¸è¦çœ‹åˆ°åˆ†å¼å°±ç”¨æ´›å¿…è¾¾ã€‚ç¬¬äºŒ,æ˜¯åˆ†åˆ«æ±‚å¯¼,ä¸æ˜¯ç”¨å•†çš„æ±‚å¯¼æ³•åˆ™ã€‚ç¬¬ä¸‰,å¦‚æœæ±‚å¯¼åä»æ˜¯ä¸å®šå¼,å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚ç¬¬å››,å¦‚æœå¯¼æ•°çš„æé™ä¸å­˜åœ¨ä¸”ä¸ä¸ºæ— ç©·,æ´›å¿…è¾¾æ³•åˆ™å¤±æ•ˆ,éœ€è¦æ¢å…¶ä»–æ–¹æ³•ã€‚", "8": "ä»Šå¤©å­¦ä¹ äº†æ´›å¿…è¾¾æ³•åˆ™çš„å®Œæ•´å†…å®¹:é€‚ç”¨äº0æ¯”0å‹å’Œæ— ç©·æ¯”æ— ç©·å‹ä¸å®šå¼,æ ¸å¿ƒæ˜¯åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼ã€‚å…¶ä»–ä¸å®šå¼éœ€è¦å…ˆè½¬åŒ–:0ä¹˜æ— ç©·åŒ–åˆ†å¼,æ— ç©·å‡æ— ç©·é€šåˆ†,å¹‚æŒ‡å‹å–å¯¹æ•°ã€‚è®°ä½:æ´›å¿…è¾¾æ³•åˆ™æ˜¯æ±‚ä¸å®šå¼æé™çš„åˆ©å™¨,ä½†å¿…é¡»å…ˆè½¬åŒ–å†æ±‚å¯¼!" };
        const actionMap = { "1": "A_RLH_welcome_O", "2": "A_RH_point_O", "3": "A_LH_introduced_O", "4": "A_RH_point_O", "5": "A_LH_introduced_O", "6": "A_RH_point_O", "7": "A_RH_point_O", "8": "A_RLH_welcome_O" };
        let currentSlide = 0; const totalSlides = 8; let avatarPlatform = null; let isConnected = false; let isTeaching = false; let isAutoPlaying = false; const slides = document.querySelectorAll('.slide');
        function showSlide(index) { slides.forEach((slide, i) => slide.classList.toggle('active', i === index)); currentSlide = index; document.getElementById('currentSlide').textContent = index + 1; if (window.MathJax && window.MathJax.typesetPromise) { window.MathJax.typesetPromise([slides[index]]).catch(err => console.error(err)); } document.getElementById('prevBtn').disabled = index === 0; document.getElementById('nextBtn').disabled = index === totalSlides - 1; updateSubtitle(index + 1); }
        function nextSlide() { if (currentSlide < totalSlides - 1) { showSlide(currentSlide + 1); if (!isAutoPlaying) speakContent(currentSlide + 1); } }
        function previousSlide() { if (currentSlide > 0) { showSlide(currentSlide - 1); if (!isAutoPlaying) speakContent(currentSlide + 1); } }
        function restart() { showSlide(0); if (avatarPlatform) { avatarPlatform.stop(); } isConnected = false; isTeaching = false; isAutoPlaying = false; }
        function updateSubtitle(slideNum) { const subtitleArea = document.getElementById('subtitleArea'); subtitleArea.textContent = subtitleScript[slideNum] || ''; }
        async function speakContent(slideNum) { if (!isTeaching || !isConnected || !avatarPlatform) { console.log('âš ï¸ è™šæ‹Ÿäººæœªè¿æ¥'); return; } const content = subtitleScript[slideNum]; if (!content) return; try { const action = actionMap[slideNum]; if (action) { await avatarPlatform.writeCmd("action", action); } await avatarPlatform.writeText(content, { nlp: false }); updateSubtitle(slideNum); } catch (error) { console.error('âŒ è®²è§£å¤±è´¥:', error); } }
        function updateStatus(message, type = 'normal') { const indicator = document.getElementById('statusIndicator'); if (indicator) { indicator.textContent = message; indicator.className = 'status-indicator'; if (type === 'connected') indicator.classList.add('connected'); else if (type === 'error') indicator.classList.add('error'); else if (type === 'connecting') indicator.classList.add('connecting'); } }
        function waitForSDK() { return new Promise((resolve, reject) => { if (typeof AvatarPlatform !== 'undefined') { resolve(); return; } const timeout = setTimeout(() => { reject(new Error('SDKåŠ è½½è¶…æ—¶')); }, 10000); window.addEventListener('sdkReady', function handler() { clearTimeout(timeout); window.removeEventListener('sdkReady', handler); resolve(); }); }); }
        async function startTeaching() { const startBtn = document.getElementById('startBtn'); startBtn.textContent = 'ğŸ”„ å¯åŠ¨ä¸­...'; startBtn.disabled = true; try { updateStatus('ç­‰å¾…SDK...', 'connecting'); await waitForSDK(); if(avatarPlatform) { avatarPlatform.destroy(); } avatarPlatform = new AvatarPlatform({ useInlinePlayer: true }); avatarPlatform.on('connected', (initResp) => { console.log('ğŸ‰ è¿æ¥æˆåŠŸ'); isConnected = true; isTeaching = true; updateStatus('å·²è¿æ¥', 'connected'); startBtn.textContent = 'ğŸ’– è™šæ‹Ÿäººå·²å°±ç»ª'; setTimeout(() => { speakContent(currentSlide + 1); }, 1000); }).on('disconnected', (err) => { isConnected = false; updateStatus('è¿æ¥æ–­å¼€', 'error'); }).on('error', (error) => { console.error('âŒ é”™è¯¯:', error); updateStatus('é”™è¯¯', 'error'); startBtn.textContent = 'âŒ è¿æ¥å¤±è´¥'; startBtn.disabled = false; isTeaching = false; }); avatarPlatform.setApiInfo({ appId: 'e8c180ed', apiKey: 'e0c44f0e2ef0f47582ffa7e864da0d9b', apiSecret: 'MDZkNDNiZWU4NDkzNWM5MDQzMTY4N2Nh', sceneId: '237415046114840576', serverUrl: 'wss://avatar.cn-huadong-1.xf-yun.com/v1/interact' }); avatarPlatform.setGlobalParams({ stream: { protocol: 'xrtc', alpha: 1, bitrate: 1000000, fps: 25 }, avatar: { avatar_id: '110332017', width: 1920, height: 1080, scale: 1, move_h: 0, move_v: 0, audio_format: 1 }, tts: { vcn: 'x4_yiting', speed: 50, pitch: 50, volume: 100 }, avatar_dispatch: { interactive_mode: 1, content_analysis: 0 } }); await avatarPlatform.start({ wrapper: document.getElementById('avatarWrapper') }); } catch (error) { console.error('âŒ å¯åŠ¨å¤±è´¥:', error); updateStatus('å¯åŠ¨å¤±è´¥', 'error'); startBtn.textContent = 'ğŸ€ å¼€å§‹è®²è¯¾'; startBtn.disabled = false; } }
        async function startAutoPlay() { if (!avatarPlatform || !isConnected) { await startTeaching(); await new Promise(resolve => setTimeout(resolve, 2000)); } isAutoPlaying = true; document.getElementById('autoPlayBtn').disabled = true; for (let i = currentSlide; i < totalSlides; i++) { showSlide(i); await speakContent(i + 1); const duration = (subtitleScript[i + 1].length / 4) * 1000 + 3000; await new Promise(resolve => setTimeout(resolve, duration)); } isAutoPlaying = false; document.getElementById('autoPlayBtn').disabled = false; window.playbackFinished = true; document.title = "PLAYBACK_FINISHED"; console.log('ğŸ‰ æ’­æ”¾å®Œæˆ'); }
        document.addEventListener('keydown', (e) => { if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); } else if (e.key === 'ArrowLeft') { e.preventDefault(); previousSlide(); } else if (e.key === 'Enter') { e.preventDefault(); speakContent(currentSlide + 1); } });
        document.getElementById('totalSlides').textContent = totalSlides; showSlide(0);
        setTimeout(() => { console.log('ğŸš€ è‡ªåŠ¨å¯åŠ¨æ’­æ”¾...'); startAutoPlay(); }, 3000);
    </script>
</body>
</html>
