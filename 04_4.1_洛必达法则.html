<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, initial-scale=1.0">
    <title>04_4.1_æ´›å¿…è¾¾æ³•åˆ™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        window.MathJax = {
            tex: { 
                inlineMath: [['$', '$'], ['\\(', '\\)']], 
                displayMath: [['$$', '$$'], ['\\[', '\\]']], 
                processEscapes: true, 
                processEnvironments: true 
            },
            svg: { fontCache: 'global' },
            startup: { 
                pageReady: () => { 
                    return MathJax.startup.defaultPageReady().then(() => { 
                        console.log('âœ… MathJaxå·²åŠ è½½'); 
                    }); 
                } 
            }
        };
    </script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { width: 100%; height: 100%; margin: 0; padding: 0; }
        body { font-family: 'Noto Serif SC', serif; background: #1a1a2e; overflow: hidden; height: 100vh; width: 100vw; }
        .blackboard { width: 100vw; height: 100vh; background: #1a1a2e; position: relative; border: 10px solid #795548; margin: 0; }
        .avatar-container { position: fixed; top: 60%; left: 50%; transform: translate(-50%, -50%); width: 975px; height: 1105px; overflow: hidden; z-index: 50; pointer-events: none; background: transparent; }
        .wrapper { width: 100%; height: 100%; background: transparent; pointer-events: auto; }
        .slide-container { width: 100%; height: calc(100% - 100px); position: relative; }
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; visibility: hidden; transition: opacity 0.6s ease-in-out; display: flex; justify-content: center; align-items: center; padding: 2rem; padding-bottom: 0; background-color: transparent; }
        .slide.active { opacity: 1; visibility: visible; }
        .slide-content { display: flex; flex-direction: row; gap: 2rem; width: 100%; height: 100%; max-height: 100%; }
        .chalkboard { flex: 0 0 45%; padding: 20px; display: flex; flex-direction: column; justify-content: center; overflow-y: auto; }
        .chalkboard h2 { color: #f1c40f; border-bottom: 2px solid #f39c12; font-size: 28px; padding-bottom: 10px; margin-bottom: 20px; }
        .chalkboard h3 { color: #1abc9c; font-size: 22px; margin-top: 20px; margin-bottom: 10px; }
        .chalkboard p, .chalkboard li { color: #e0e0e0; font-size: 18px; line-height: 1.8; margin: 8px 0; }
        .chalkboard strong { color: #e74c3c; }
        .math-formula { background-color: rgba(0,0,0,0.2); padding: 15px; border-radius: 5px; border-left: 4px solid #f39c12; font-size: 20px; color: #1abc9c; text-align: center; margin: 15px 0; }
        .visualization { flex: 1; padding: 20px; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .control-bar { position: fixed; left: -9999px; top: 50%; transform: translateY(-50%); width: 270px; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); display: flex; flex-direction: column; gap: 12px; z-index: 200; border-radius: 0 20px 20px 0; padding: 25px 20px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.2); }
        .btn { padding: 14px 22px; background: rgba(255, 255, 255, 0.25); color: #333; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 12px; cursor: pointer; font-size: 14px; font-weight: 600; width: 100%; text-align: center; }
        .btn.primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; }
        .subtitle-area { position: fixed; bottom: 10px; left: 50px; right: 50px; min-height: 60px; max-height: 90px; background: rgba(0,0,0,0.85); border-radius: 8px; display: flex; align-items: center; justify-content: center; z-index: 100; color: white; font-size: 22px; text-align: center; padding: 15px 20px; line-height: 1.4; overflow-y: auto; }
        .status-indicator { position: absolute; top: 10px; right: 10px; padding: 5px 10px; background: rgba(0,0,0,0.5); color: white; border-radius: 5px; font-size: 16px; z-index: 100; display: none; }
        .status-indicator.connected { background: rgba(76, 175, 80, 0.8); display: block; }
        .status-indicator.error { background: rgba(244, 67, 54, 0.8); display: block; }
        .status-indicator.connecting { background: rgba(255, 152, 0, 0.8); display: block; }
    </style>
</head>
<body class="blackboard">
    <div class="status-indicator" id="statusIndicator">ç­‰å¾…è¿æ¥</div>
    <div class="avatar-container"><div class="wrapper" id="avatarWrapper"></div></div>
    <div class="slide-container">
        <!-- Page 1: Title -->
        <div class="slide active">
            <div class="slide-content">
                <div class="chalkboard" style="text-align: center;">
                    <h1 style="font-size: 2.8rem; font-weight: bold; color: #f1c40f; text-shadow: 0 0 10px rgba(241, 196, 15, 0.6);">æ´›å¿…è¾¾æ³•åˆ™</h1>
                    <p style="font-size: 1.2rem; color: #bdc3c7; margin-top: 1rem;">ç¬¬4ç«  - æ±‚è§£ä¸å®šå¼æé™çš„åˆ©å™¨</p>
                    <div style="margin-top: 2.5rem; text-align: left; display: inline-block;">
                        <p style="font-size: 1rem; margin: 0.8rem 0; color: #e0e0e0;">âœ“ ä¸å®šå¼çš„æ¦‚å¿µä¸åˆ†ç±»</p>
                        <p style="font-size: 1rem; margin: 0.8rem 0; color: #e0e0e0;">âœ“ æ´›å¿…è¾¾æ³•åˆ™çš„æ¡ä»¶ä¸åº”ç”¨</p>
                        <p style="font-size: 1rem; margin: 0.8rem 0; color: #e0e0e0;">âœ“ å…¸å‹ä¾‹é¢˜åˆ†æ­¥ç²¾è®²</p>
                        <p style="font-size: 1rem; margin: 0.8rem 0; color: #e0e0e0;">âœ“ å…¶ä»–ä¸å®šå¼çš„è½¬åŒ–æŠ€å·§</p>
                    </div>
                </div>
                <div class="visualization">
                    <svg class="w-full h-full" viewBox="0 0 600 500">
                        <rect fill="rgba(231,76,60,0.2)" height="80" rx="10" stroke="#e74c3c" stroke-width="4" width="180" x="100" y="150"></rect>
                        <text fill="#ecf0f1" font-size="32" text-anchor="middle" x="190" y="200">lim f/g</text>
                        <text fill="#f39c12" font-size="40" text-anchor="middle" x="300" y="195">=</text>
                        <rect fill="rgba(46,204,113,0.2)" height="80" rx="10" stroke="#2ecc71" stroke-width="4" width="200" x="320" y="150"></rect>
                        <text fill="#ecf0f1" font-size="32" text-anchor="middle" x="420" y="200">lim f'/g'</text>
                        <text fill="#f39c12" font-size="24" text-anchor="middle" x="300" y="280">0/0 æˆ– âˆ/âˆ å‹</text>
                        <text fill="#2ecc71" font-size="20" text-anchor="middle" x="300" y="350">åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 2: ä¸å®šå¼ 0/0 å¼•å…¥ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ç¬¬ä¸€ç§å›°å¢ƒï¼š\(\frac{0}{0}\) å‹</h2>
                    <p>è€ƒè™‘è¿™ä¸ªæé™ï¼š</p>
                    <div class="math-formula">
                        \[\lim\limits_{x \to 0} \frac{\sin x}{x}\]
                    </div>
                    <p style="margin-top:20px;">å¦‚æœç›´æ¥ä»£å…¥ \(x=0\) ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">ç»å…¸ä¾‹å­</text>
                        <rect x="100" y="150" width="400" height="100" fill="rgba(255,255,255,0.1)" stroke="#ecf0f1" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="26" text-anchor="middle" x="300" y="210">lim (sin x) / x</text>
                        <text fill="#95a5a6" font-size="20" text-anchor="middle" x="300" y="240">x â†’ 0</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 3: 0/0 å‹è¯¦è§£ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä»£å…¥åçš„ç»“æœ</h2>
                    <p>å½“ \(x \to 0\) æ—¶ï¼š</p>
                    <p style="text-align:center; font-size: 24px; color:#e74c3c; margin:20px 0;">åˆ†å­ï¼š\(\sin 0 = 0\)</p>
                    <p style="text-align:center; font-size: 24px; color:#e74c3c; margin:20px 0;">åˆ†æ¯ï¼š\(0\)</p>
                    <p style="margin-top:30px;">æˆ‘ä»¬å¾—åˆ°äº† \(\frac{0}{0}\) çš„å½¢å¼ï¼</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">ä»£å…¥ x = 0</text>
                        <rect x="150" y="200" width="300" height="150" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="3" rx="10">
                            <animate attributeName="opacity" dur="2s" values="0.5;1;0.5" repeatCount="indefinite"/>
                        </rect>
                        <text fill="#ecf0f1" font-size="70" text-anchor="middle" x="300" y="295">0/0</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 4: ä¸å®šå¼æ¦‚å¿µ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä»€ä¹ˆæ˜¯ä¸å®šå¼ï¼Ÿ</h2>
                    <p>\(\frac{0}{0}\) è¢«ç§°ä¸º<strong>ä¸å®šå¼</strong> (Indeterminate Form)ã€‚</p>
                    <p style="margin-top:20px;">å®ƒçš„å€¼æ˜¯<strong>ä¸ç¡®å®šçš„</strong>,ä¸èƒ½ç›´æ¥è®¡ç®—ã€‚</p>
                    <p style="margin-top:20px; color:#95a5a6;">ä¸åŒçš„å‡½æ•°å¯èƒ½å¾—åˆ°ä¸åŒçš„ç»“æœï¼š0ã€1ã€æˆ–å…¶ä»–å€¼ã€‚</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="32" text-anchor="middle" x="300" y="80">ä¸å®šå¼</text>
                        <circle cx="300" cy="250" r="100" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="50" text-anchor="middle" x="300" y="270">0/0</text>
                        <text fill="#e74c3c" font-size="22" text-anchor="middle" x="300" y="400">å€¼ä¸ç¡®å®šï¼</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 5: ä¸å®šå¼ âˆ/âˆ å¼•å…¥ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ç¬¬äºŒç§å›°å¢ƒï¼š\(\frac{\infty}{\infty}\) å‹</h2>
                    <p>è¿˜æœ‰å¦ä¸€ç§å¸¸è§çš„ä¸å®šå¼ã€‚</p>
                    <p style="margin-top:20px;">è€ƒè™‘è¿™ä¸ªä¾‹å­ï¼š</p>
                    <div class="math-formula">
                        \[\lim\limits_{x \to +\infty} \frac{e^x}{x^2}\]
                    </div>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">å¦ä¸€ä¸ªä¾‹å­</text>
                        <rect x="100" y="150" width="400" height="100" fill="rgba(255,255,255,0.1)" stroke="#ecf0f1" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="26" text-anchor="middle" x="300" y="210">lim e^x / xÂ²</text>
                        <text fill="#95a5a6" font-size="20" text-anchor="middle" x="300" y="240">x â†’ +âˆ</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 6: âˆ/âˆ å‹è¯¦è§£ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>è¶‹å‘æ— ç©·çš„æƒ…å†µ</h2>
                    <p>å½“ \(x \to +\infty\) æ—¶ï¼š</p>
                    <p style="text-align:center; font-size: 24px; color:#3498db; margin:20px 0;">åˆ†å­ï¼š\(e^x \to +\infty\)</p>
                    <p style="text-align:center; font-size: 24px; color:#3498db; margin:20px 0;">åˆ†æ¯ï¼š\(x^2 \to +\infty\)</p>
                    <p style="margin-top:30px;">æˆ‘ä»¬å¾—åˆ°äº† \(\frac{\infty}{\infty}\) çš„å½¢å¼ï¼</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">x â†’ +âˆ</text>
                        <rect x="150" y="200" width="300" height="150" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="3" rx="10">
                            <animate attributeName="opacity" dur="2s" values="0.5;1;0.5" repeatCount="indefinite" begin="0.5s"/>
                        </rect>
                        <text fill="#ecf0f1" font-size="60" text-anchor="middle" x="300" y="295">âˆ/âˆ</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 7: âˆ/âˆ ä¹Ÿæ˜¯ä¸å®šå¼ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>åˆä¸€ä¸ªä¸å®šå¼</h2>
                    <p>\(\frac{\infty}{\infty}\) ä¹Ÿæ˜¯ä¸€ç§<strong>ä¸å®šå¼</strong>ã€‚</p>
                    <p style="margin-top:20px;">å®ƒçš„ç»“æœåŒæ ·ä¸ç¡®å®šï¼š</p>
                    <p style="margin-left:20px; margin-top:15px;">â€¢ å¯èƒ½æ˜¯ 0</p>
                    <p style="margin-left:20px;">â€¢ å¯èƒ½æ˜¯ \(\infty\)</p>
                    <p style="margin-left:20px;">â€¢ ä¹Ÿå¯èƒ½æ˜¯æŸä¸ªå¸¸æ•°</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="32" text-anchor="middle" x="300" y="80">ä¸å®šå¼</text>
                        <circle cx="300" cy="250" r="100" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="50" text-anchor="middle" x="300" y="270">âˆ/âˆ</text>
                        <text fill="#3498db" font-size="20" text-anchor="middle" x="300" y="400">ç»“æœå¯èƒ½æ˜¯ 0, âˆ, æˆ–å¸¸æ•°</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 8: å¼•å‡ºæ´›å¿…è¾¾æ³•åˆ™ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>å¦‚ä½•è§£å†³ä¸å®šå¼ï¼Ÿ</h2>
                    <p>é¢å¯¹è¿™ä¸¤ç§ä¸å®šå¼ï¼š</p>
                    <p style="text-align:center; font-size:28px; margin:20px 0;">\(\frac{0}{0}\) å’Œ \(\frac{\infty}{\infty}\)</p>
                    <p style="margin-top:30px;">æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·...</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="32" text-anchor="middle" x="300" y="100">ä¸¤ç§ä¸å®šå¼</text>
                        <rect x="80" y="150" width="180" height="100" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="3" rx="10"/>
                        <text fill="#ecf0f1" font-size="40" text-anchor="middle" x="170" y="215">0/0</text>
                        <rect x="340" y="150" width="180" height="100" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="3" rx="10"/>
                        <text fill="#ecf0f1" font-size="40" text-anchor="middle" x="430" y="215">âˆ/âˆ</text>
                        <text fill="#f39c12" font-size="50" text-anchor="middle" x="300" y="350">?</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 9: æ´›å¿…è¾¾æ³•åˆ™ç™»åœº -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ´›å¿…è¾¾æ³•åˆ™</h2>
                    <p style="font-size:28px; color:#2ecc71; text-align:center; margin:30px 0;"><strong>L'HÃ´pital's Rule</strong></p>
                    <p>è¿™æ˜¯ä¸“é—¨ç”¨æ¥è§£å†³ä¸å®šå¼æé™çš„å¼ºå¤§å·¥å…·ã€‚</p>
                    <p style="margin-top:30px; color:#f39c12;">å®ƒçš„æ ¸å¿ƒæ€æƒ³éå¸¸å·§å¦™...</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="36" text-anchor="middle" x="300" y="150">æ´›å¿…è¾¾æ³•åˆ™</text>
                        <circle cx="300" cy="300" r="80" fill="rgba(46,204,113,0.3)" stroke="#2ecc71" stroke-width="4">
                            <animate attributeName="r" dur="2s" values="80;90;80" repeatCount="indefinite"/>
                        </circle>
                        <text fill="#2ecc71" font-size="50" text-anchor="middle" x="300" y="320">ğŸ’¡</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 10: æ³•åˆ™æ ¸å¿ƒæ€æƒ³ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ ¸å¿ƒæ€æƒ³</h2>
                    <p>å½“ç›´æ¥æ±‚ \(\frac{f(x)}{g(x)}\) çš„æé™é‡åˆ°å›°éš¾æ—¶...</p>
                    <p style="margin-top:30px; font-size:22px; color:#f39c12;">æˆ‘ä»¬å¯ä»¥å°è¯•æ±‚å®ƒä»¬<strong>å¯¼æ•°çš„æ¯”å€¼</strong>çš„æé™ï¼</p>
                    <div class="math-formula" style="margin-top:30px;">
                        \[\text{åŸæé™} \to \text{å¯¼æ•°çš„æé™}\]
                    </div>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">æ ¸å¿ƒæ€æƒ³</text>
                        <rect x="100" y="150" width="400" height="80" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="200">lim f(x) / g(x)</text>
                        <text fill="#f39c12" font-size="40" text-anchor="middle" x="300" y="280">â†“</text>
                        <rect x="100" y="320" width="400" height="80" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="370">lim f'(x) / g'(x)</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 11: æ³•åˆ™å…¬å¼ (0/0) -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ´›å¿…è¾¾æ³•åˆ™ (\(\frac{0}{0}\) å‹)</h2>
                    <p>å½“æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶ï¼š</p>
                    <div class="math-formula">
                        \[\lim\limits_{x \to a} \frac{f(x)}{g(x)} = \lim\limits_{x \to a} \frac{f'(x)}{g'(x)}\]
                    </div>
                    <p style="margin-top:20px; color:#95a5a6;">æ³¨æ„ï¼šè¿™é‡Œæ˜¯åˆ†å­åˆ†æ¯<strong>åˆ†åˆ«æ±‚å¯¼</strong>ï¼</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">æ³•åˆ™å…¬å¼</text>
                        <rect x="80" y="150" width="180" height="80" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="170" y="200">lim f/g</text>
                        <text fill="#f39c12" font-size="35" text-anchor="middle" x="300" y="195">=</text>
                        <rect x="340" y="150" width="180" height="80" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="2" rx="10"/>
                        <text fill="#ecf0f1" font-size="22" text-anchor="middle" x="430" y="200">lim f'/g'</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 12: ä½¿ç”¨æ¡ä»¶1 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä½¿ç”¨æ¡ä»¶ï¼ˆä¸€ï¼‰</h2>
                    <p><strong>æ¡ä»¶1ï¼š</strong>æé™å¿…é¡»æ˜¯ä¸å®šå¼</p>
                    <p style="margin-left:20px; margin-top:15px;">\(\lim\limits_{x \to a} f(x) = 0\) ä¸” \(\lim\limits_{x \to a} g(x) = 0\)</p>
                    <p style="margin-top:20px; color:#e74c3c;">å³ï¼šå¿…é¡»æ˜¯ \(\frac{0}{0}\) å‹ï¼</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">æ¡ä»¶1</text>
                        <rect x="100" y="180" width="400" height="150" fill="rgba(231,76,60,0.1)" stroke="#e74c3c" stroke-width="3" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="230">æé™ç±»å‹</text>
                        <text fill="#e74c3c" font-size="50" text-anchor="middle" x="300" y="295">0/0</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 13: ä½¿ç”¨æ¡ä»¶2 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä½¿ç”¨æ¡ä»¶ï¼ˆäºŒï¼‰</h2>
                    <p><strong>æ¡ä»¶2ï¼š</strong>å‡½æ•°å¯å¯¼</p>
                    <p style="margin-left:20px; margin-top:15px;">åœ¨ç‚¹ \(a\) çš„æŸå»å¿ƒé‚»åŸŸå†…,\(f(x)\) å’Œ \(g(x)\) éƒ½å¯å¯¼</p>
                    <p style="margin-left:20px; margin-top:10px;">ä¸” \(g'(x) \neq 0\)</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">æ¡ä»¶2</text>
                        <rect x="100" y="180" width="400" height="150" fill="rgba(52,152,219,0.1)" stroke="#3498db" stroke-width="3" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="230">å‡½æ•°å¯å¯¼</text>
                        <text fill="#3498db" font-size="22" text-anchor="middle" x="300" y="280">f'(x), g'(x) å­˜åœ¨</text>
                        <text fill="#3498db" font-size="22" text-anchor="middle" x="300" y="310">g'(x) â‰  0</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 14: ä½¿ç”¨æ¡ä»¶3 -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>ä½¿ç”¨æ¡ä»¶ï¼ˆä¸‰ï¼‰</h2>
                    <p><strong>æ¡ä»¶3ï¼š</strong>å¯¼æ•°æé™å­˜åœ¨</p>
                    <p style="margin-left:20px; margin-top:15px;">\(\lim\limits_{x \to a} \frac{f'(x)}{g'(x)}\) å­˜åœ¨ï¼ˆæˆ–ä¸º \(\infty\)ï¼‰</p>
                    <p style="margin-top:30px; color:#2ecc71;">æ»¡è¶³è¿™ä¸‰ä¸ªæ¡ä»¶,å°±å¯ä»¥ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™ï¼</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">æ¡ä»¶3</text>
                        <rect x="100" y="180" width="400" height="150" fill="rgba(46,204,113,0.1)" stroke="#2ecc71" stroke-width="3" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="230">å¯¼æ•°æé™å­˜åœ¨</text>
                        <text fill="#2ecc71" font-size="22" text-anchor="middle" x="300" y="280">lim f'/g' å­˜åœ¨</text>
                        <text fill="#2ecc71" font-size="22" text-anchor="middle" x="300" y="310">æˆ–ä¸º âˆ</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 15: âˆ/âˆ å‹æ³•åˆ™ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ´›å¿…è¾¾æ³•åˆ™ (\(\frac{\infty}{\infty}\) å‹)</h2>
                    <p>è¯¥æ³•åˆ™åŒæ ·é€‚ç”¨äº \(\frac{\infty}{\infty}\) å‹ï¼</p>
                    <p style="margin-top:20px;">åªéœ€å°†æ¡ä»¶1æ”¹ä¸ºï¼š</p>
                    <p style="margin-left:20px; margin-top:15px;">\(\lim\limits_{x \to a} f(x) = \infty\) ä¸” \(\lim\limits_{x \to a} g(x) = \infty\)</p>
                    <p style="margin-top:20px;">å…¶ä»–æ¡ä»¶å’Œç»“è®ºå®Œå…¨ç›¸åŒã€‚</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">âˆ/âˆ å‹</text>
                        <rect x="100" y="180" width="400" height="150" fill="rgba(52,152,219,0.1)" stroke="#3498db" stroke-width="3" rx="10"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="230">æé™ç±»å‹</text>
                        <text fill="#3498db" font-size="50" text-anchor="middle" x="300" y="295">âˆ/âˆ</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 16: æ€»ç»“ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>æ€»ç»“ä¸æ³¨æ„äº‹é¡¹</h2>
                    <p><strong>æ ¸å¿ƒè¦ç‚¹ï¼š</strong></p>
                    <p style="margin-left:20px; margin-top:15px;">â€¢ æ´›å¿…è¾¾æ³•åˆ™æ˜¯åˆ†åˆ«æ±‚å¯¼ï¼Œä¸æ˜¯å•†çš„æ±‚å¯¼æ³•åˆ™</p>
                    <p style="margin-left:20px;">â€¢ å¿…é¡»å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºä¸å®šå¼</p>
                    <p style="margin-left:20px;">â€¢ æ¡ä»¶æ»¡è¶³æ—¶å¯ä»¥è¿ç»­ä½¿ç”¨</p>
                    <p style="margin-top:20px; color:#2ecc71;">æŒæ¡è¿™ä¸ªæ³•åˆ™ï¼Œæé™é—®é¢˜è¿åˆƒè€Œè§£ï¼</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="32" text-anchor="middle" x="300" y="80">æ ¸å¿ƒæ€æƒ³</text>
                        <circle cx="300" cy="250" r="100" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="3"/>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="240">åˆ†åˆ«æ±‚å¯¼</text>
                        <text fill="#ecf0f1" font-size="24" text-anchor="middle" x="300" y="270">æ±‚æ–°æé™</text>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Page 17: å…¶ä»–ä¸å®šå¼æ€»ç»“ -->
        <div class="slide">
            <div class="slide-content">
                <div class="chalkboard">
                    <h2>å…¶ä»–ä¸å®šå¼çš„å¤„ç†æ–¹æ³•</h2>
                    <p><strong>0Â·âˆ å‹ï¼š</strong>åŒ–ä¸ºåˆ†å¼ \(\frac{f}{1/g}\) æˆ– \(\frac{g}{1/f}\)</p>
                    <p style="margin-top:15px;"><strong>âˆ-âˆ å‹ï¼š</strong>é€šåˆ†æˆ–æœ‰ç†åŒ–</p>
                    <p style="margin-top:15px;"><strong>å¹‚æŒ‡å‹ï¼š</strong>å–å¯¹æ•°è½¬åŒ–ä¸º 0Â·âˆ å‹</p>
                    <p style="margin-top:30px; color:#f1c40f; font-size:22px;">è®°ä½ï¼šå…ˆåˆ¤æ–­ï¼Œå†è½¬åŒ–ï¼Œåæ±‚å¯¼ï¼</p>
                </div>
                <div class="visualization">
                    <svg viewBox="0 0 600 500" style="width: 100%; height: 100%;">
                        <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="60">å¤„ç†æµç¨‹</text>
                        <rect x="100" y="120" width="400" height="60" fill="rgba(231,76,60,0.2)" stroke="#e74c3c" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="300" y="155">ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­ç±»å‹</text>
                        <line x1="300" y1="180" x2="300" y2="220" stroke="#f39c12" stroke-width="2" marker-end="url(#arrow)"/>
                        <rect x="100" y="220" width="400" height="60" fill="rgba(52,152,219,0.2)" stroke="#3498db" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="300" y="255">ç¬¬äºŒæ­¥ï¼šè½¬åŒ–ä¸ºæ ‡å‡†å½¢å¼</text>
                        <line x1="300" y1="280" x2="300" y2="320" stroke="#f39c12" stroke-width="2" marker-end="url(#arrow)"/>
                        <rect x="100" y="320" width="400" height="60" fill="rgba(46,204,113,0.2)" stroke="#2ecc71" stroke-width="2" rx="8"/>
                        <text fill="#ecf0f1" font-size="20" text-anchor="middle" x="300" y="355">ç¬¬ä¸‰æ­¥ï¼šåº”ç”¨æ´›å¿…è¾¾æ³•åˆ™</text>
                    </svg>
                </div>
            </div>
        </div>
    </div>
    <div class="subtitle-area" id="subtitleArea">æ¬¢è¿å­¦ä¹ æ´›å¿…è¾¾æ³•åˆ™!</div>
    <div class="control-bar">
        <div style="color: #f1c40f; font-weight: bold; margin-bottom: 15px; text-align: center;">ç¬¬ <span id="currentSlide">1</span> / <span id="totalSlides">17</span> é¡µ</div>
        <button class="btn" id="prevBtn" onclick="previousSlide()">â¬…ï¸ ä¸Šä¸€é¡µ</button>
        <button class="btn primary" id="startBtn" onclick="startTeaching()">ğŸ€ å¼€å§‹è®²è¯¾</button>
        <button class="btn" id="nextBtn" onclick="nextSlide()">ä¸‹ä¸€é¡µ â¡ï¸</button>
        <button class="btn" onclick="restart()">ğŸ”„ é‡æ–°å¼€å§‹</button>
        <button class="btn" id="autoPlayBtn" onclick="startAutoPlay()">ğŸ¬ è‡ªåŠ¨æ’­æ”¾</button>
    </div>

    <script type="module">
        // è™šæ‹ŸäººSDKåŠ è½½
        window.playbackFinished = false; 
        try { 
            const { default: AvatarPlatform } = await import('./avatar-sdk-web_3.1.2.1002/index.js'); 
            window.AvatarPlatform = AvatarPlatform; 
            console.log('âœ… è®¯é£SDKæ¨¡å—å·²åŠ è½½'); 
        } catch (error) { 
            console.error('âŒ SDKåŠ è½½å¤±è´¥:', error); 
        } 
        window.dispatchEvent(new CustomEvent('sdkReady'));
    </script>

    <script>
        // ===== é…ç½®æ•°æ® =====
        // æ€»å¹»ç¯ç‰‡æ•°ï¼ˆå¿…é¡»ä¸HTMLä¸­çš„å®é™…å¹»ç¯ç‰‡æ•°ä¸€è‡´ï¼‰
        const totalSlides = 17;

        // å­—å¹•è„šæœ¬ï¼ˆæ¯é¡µä¸€æ¡ï¼‰
        const subtitleScript = {
            "1": "æ¬¢è¿å­¦ä¹ æ´›å¿…è¾¾æ³•åˆ™ï¼šæ±‚è§£ä¸å®šå¼æé™çš„åˆ©å™¨ã€‚",
            "2": "å½“ç›´æ¥ä»£å…¥å¾—åˆ°0æ¯”0æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä¸å®šå¼ï¼Œæ— æ³•ç›´æ¥ç¡®å®šå…¶å€¼ã€‚",
            "3": "å½“å˜é‡è¶‹äºæ— ç©·ï¼Œå¾—åˆ°æ— ç©·æ¯”æ— ç©·æ—¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„ä¸å®šå¼ã€‚",
            "4": "ä¸ºè§£å†³ä¸å®šå¼é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·â€”â€”æ´›å¿…è¾¾æ³•åˆ™ã€‚",
            "5": "æ´›å¿…è¾¾æ³•åˆ™0æ¯”0å‹ï¼šåŸæé™ç­‰äºå…¶åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼åçš„æé™ã€‚",
            "6": "è¯¥æ³•åˆ™åŒæ ·é€‚ç”¨äºæ— ç©·æ¯”æ— ç©·å‹ä¸å®šå¼ï¼Œä½¿ç”¨æ¡ä»¶å’Œç»“è®ºå®Œå…¨ç›¸åŒã€‚",
            "7": "ä¾‹1ï¼Œ0æ¯”0å‹ï¼šæ±‚å½“xè¶‹äº0æ—¶ï¼Œsinxé™¤ä»¥xçš„æé™ï¼Œåº”ç”¨æ³•åˆ™åå¾—cosxé™¤ä»¥1ï¼Œç»“æœä¸º1ã€‚",
            "8": "ä¾‹2ï¼Œæ— ç©·æ¯”æ— ç©·å‹ï¼šæ±‚å½“xè¶‹äºæ­£æ— ç©·æ—¶ï¼Œeçš„xæ¬¡æ–¹é™¤ä»¥xå¹³æ–¹çš„æé™ï¼Œé¦–æ¬¡åº”ç”¨æ³•åˆ™åå¾—åˆ°eçš„xæ¬¡æ–¹é™¤ä»¥2xã€‚",
            "9": "æ–°æé™ä»ä¸ºæ— ç©·æ¯”æ— ç©·å‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿ç»­ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™ï¼Œæœ€ç»ˆå¾—åˆ°æ­£æ— ç©·ã€‚",
            "10": "å…¶ä»–ä¸å®šå¼ï¼Œ0ä¹˜ä»¥æ— ç©·å‹ï¼šéœ€å…ˆå˜å½¢ä¸ºfé™¤ä»¥1é™¤ä»¥gæˆ–gé™¤ä»¥1é™¤ä»¥fæ¥åˆ›é€ åˆ†æ•°å½¢å¼ã€‚",
            "11": "å…¶ä»–ä¸å®šå¼ï¼Œæ— ç©·å‡æ— ç©·å‹ï¼šé€šå¸¸é€šè¿‡é€šåˆ†æˆ–æœ‰ç†åŒ–ï¼Œå°†å…¶è½¬åŒ–ä¸º0æ¯”0å‹ã€‚",
            "12": "å…¶ä»–ä¸å®šå¼ï¼Œå¹‚æŒ‡å‹ï¼šé€šè¿‡å–å¯¹æ•°çš„æ–¹æ³•ï¼Œå°†å…¶è½¬åŒ–ä¸º0ä¹˜ä»¥æ— ç©·å‹ã€‚",
            "13": "ä¾‹3ï¼Œ0ä¹˜ä»¥æ— ç©·å‹ï¼šæ±‚å½“xä»å³ä¾§è¶‹äº0æ—¶ï¼Œxä¹˜ä»¥lnxçš„æé™ï¼Œè½¬åŒ–ä¸ºlnxé™¤ä»¥xåˆ†ä¹‹ä¸€ååº”ç”¨æ³•åˆ™ï¼Œå¾—0ã€‚",
            "14": "æ³¨æ„ï¼šå¿…é¡»å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºä¸å®šå¼ï¼Œå¦åˆ™æ»¥ç”¨æ³•åˆ™å°†å¯¼è‡´é”™è¯¯ç»“æœã€‚",
            "15": "æ³¨æ„ï¼šæ´›å¿…è¾¾æ³•åˆ™æ˜¯åˆ†åˆ«æ±‚å¯¼ï¼Œåˆ‡å‹¿ä¸å•†çš„æ±‚å¯¼æ³•åˆ™ç›¸æ··æ·†ã€‚",
            "16": "æ€»ç»“ï¼šæ´›å¿…è¾¾æ³•åˆ™çš„æ ¸å¿ƒæ˜¯è½¬åŒ–ä¸å®šå¼æé™ä¸ºå¯¼æ•°çš„æ¯”å€¼æé™ã€‚",
            "17-1": "åŒå­¦ä»¬ï¼Œç°åœ¨æˆ‘ä»¬æ¥åˆ°äº†æœ€åä¸€ä¸ªæ€»ç»“é¡µé¢ã€‚è¿™ä¸€é¡µä¸»è¦è®²è§£çš„æ˜¯ï¼Œå½“æˆ‘ä»¬é‡åˆ°ä¸€äº›éæ ‡å‡†çš„ä¸å®šå¼ç±»å‹æ—¶ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ã€‚è¿™äº›ç±»å‹åŒ…æ‹¬0ä¹˜ä»¥æ— ç©·ã€æ— ç©·å‡æ— ç©·ï¼Œä»¥åŠå¹‚æŒ‡å‹ç­‰ã€‚å®ƒä»¬éƒ½éœ€è¦é€šè¿‡é€‚å½“çš„è½¬åŒ–ï¼Œæ‰èƒ½å˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„0æ¯”0æˆ–æ— ç©·æ¯”æ— ç©·å‹ã€‚",
            "17-2": "é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹0ä¹˜ä»¥æ— ç©·å‹ã€‚è¿™ç§ç±»å‹çš„å¤„ç†æ–¹æ³•æ˜¯ï¼ŒæŠŠå®ƒåŒ–ä¸ºåˆ†å¼å½¢å¼ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå…¶ä¸­ä¸€ä¸ªå› å­å†™æˆ1é™¤ä»¥å®ƒçš„å€’æ•°çš„å½¢å¼ï¼Œæ”¾åˆ°åˆ†æ¯ä¸Šã€‚è¿™æ ·å°±æŠŠ0ä¹˜ä»¥æ— ç©·è½¬åŒ–æˆäº†0æ¯”0æˆ–æ— ç©·æ¯”æ— ç©·å‹ï¼Œç„¶åå°±å¯ä»¥åº”ç”¨æ´›å¿…è¾¾æ³•åˆ™äº†ã€‚",
            "17-3": "ç¬¬äºŒç§ç±»å‹æ˜¯æ— ç©·å‡æ— ç©·ã€‚è¿™ç§ä¸å®šå¼é€šå¸¸å‡ºç°åœ¨ä¸¤ä¸ªåˆ†å¼ç›¸å‡çš„æƒ…å†µã€‚æˆ‘ä»¬çš„å¤„ç†ç­–ç•¥æ˜¯é€šè¿‡é€šåˆ†ï¼ŒæŠŠä¸¤ä¸ªåˆ†å¼åˆå¹¶æˆä¸€ä¸ªåˆ†å¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®ƒé€šå¸¸å°±ä¼šå˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„0æ¯”0å‹ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™æ±‚è§£äº†ã€‚",
            "17-4": "ç¬¬ä¸‰ç§ç±»å‹æ˜¯å¹‚æŒ‡å‹ï¼ŒåŒ…æ‹¬1çš„æ— ç©·æ¬¡æ–¹ã€0çš„0æ¬¡æ–¹ã€æ— ç©·çš„0æ¬¡æ–¹ç­‰ç­‰ã€‚å¯¹ä»˜è¿™ç±»é—®é¢˜çš„é€šç”¨ç­–ç•¥æ˜¯å–å¯¹æ•°ã€‚æˆ‘ä»¬å…ˆè®¾åŸå‡½æ•°ä¸ºyï¼Œç„¶åä¸¤è¾¹å–è‡ªç„¶å¯¹æ•°ï¼Œåˆ©ç”¨å¯¹æ•°çš„æ€§è´¨æŠŠæŒ‡æ•°æ‹¿ä¸‹æ¥ã€‚è¿™æ ·é—®é¢˜å°±è½¬åŒ–æˆäº†æ±‚lnyçš„æé™ï¼Œé€šå¸¸æ˜¯0ä¹˜ä»¥æ— ç©·å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§å‰é¢çš„æ–¹æ³•å¤„ç†ã€‚æœ€ååˆ«å¿˜äº†ï¼Œæ±‚å‡ºæ¥çš„æ˜¯lnyçš„æé™Lï¼ŒåŸæé™åº”è¯¥æ˜¯eçš„Læ¬¡æ–¹ã€‚",
            "17-5": "æœ€åï¼Œè®©æˆ‘ä»¬å¼ºè°ƒä¸€ä¸‹æ ¸å¿ƒæ€æƒ³ã€‚å¯¹äºæ‰€æœ‰è¿™äº›å¤æ‚çš„ä¸å®šå¼ï¼Œæˆ‘ä»¬çš„å¤„ç†æµç¨‹æ˜¯ï¼šå…ˆåˆ¤æ–­ç±»å‹ï¼Œå†é€‰æ‹©åˆé€‚çš„è½¬åŒ–æ–¹æ³•ï¼Œæœ€ååº”ç”¨æ´›å¿…è¾¾æ³•åˆ™æ±‚å¯¼ã€‚è¿™ä¸ªæµç¨‹å¯ä»¥æ€»ç»“ä¸ºä¸€å¥è¯ï¼šå…ˆåˆ¤æ–­ï¼Œå†è½¬åŒ–ï¼Œåæ±‚å¯¼ã€‚è¯·åŒå­¦ä»¬ä¸€å®šè¦ç‰¢è®°è¿™ä¸ªåŸåˆ™ï¼Œå®ƒæ˜¯è§£å†³æ‰€æœ‰ä¸å®šå¼æé™é—®é¢˜çš„é‡‘é’¥åŒ™ã€‚è°¢è°¢å¤§å®¶ï¼"
        };

        // è¯­éŸ³è„šæœ¬ï¼ˆæ¯é¡µä¸€æ¡ï¼Œä¸subtitleScriptå¯¹åº”ï¼‰
        const speechScript = {
            "1": "åŒå­¦ä»¬å¥½ï¼æ¬¢è¿æ¥åˆ°æ´›å¿…è¾¾æ³•åˆ™çš„å­¦ä¹ ã€‚ä»Šå¤©æˆ‘ä»¬å°†å­¦ä¹ ä¸€ä¸ªéå¸¸é‡è¦ä¸”å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒä¸“é—¨ç”¨æ¥æ±‚è§£ä¸å®šå¼æé™ã€‚è¿™ä¸ªæ³•åˆ™åœ¨é«˜ç­‰æ•°å­¦ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼ŒæŒæ¡å®ƒèƒ½å¸®åŠ©æˆ‘ä»¬è½»æ¾è§£å†³å¾ˆå¤šçœ‹ä¼¼å›°éš¾çš„æé™é—®é¢˜ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼",
            "2": "æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç»å…¸çš„ä¾‹å­ï¼Œæ±‚sinxé™¤ä»¥xçš„æé™ï¼Œå½“xè¶‹äº0æ—¶ã€‚å¦‚æœç›´æ¥ä»£å…¥ï¼Œåˆ†å­sin0ç­‰äº0ï¼Œåˆ†æ¯ä¹Ÿæ˜¯0ã€‚æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ª0æ¯”0çš„å½¢å¼ã€‚è¿™åœ¨æ•°å­¦ä¸Šå«åšä¸å®šå¼ï¼Œå®ƒçš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼Œä¸èƒ½æƒ³å½“ç„¶åœ°è®¤ä¸ºæ˜¯1æˆ–è€…0ã€‚",
            "3": "é™¤äº†0æ¯”0ï¼Œè¿˜æœ‰å¦ä¸€ç§å¸¸è§çš„ä¸å®šå¼ã€‚æ¯”å¦‚æ±‚eçš„xæ¬¡æ–¹é™¤ä»¥xå¹³æ–¹çš„æé™ï¼Œå½“xè¶‹äºæ­£æ— ç©·æ—¶ã€‚è¿™æ—¶å€™ï¼Œåˆ†å­å’Œåˆ†æ¯éƒ½å†²å‘äº†æ— ç©·å¤§ã€‚æˆ‘ä»¬å¾—åˆ°çš„å°±æ˜¯æ— ç©·æ¯”æ— ç©·çš„å½¢å¼ã€‚å®ƒçš„ç»“æœåŒæ ·æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦ç‰¹æ®Šçš„å·¥å…·æ¥è§£å†³ã€‚",
            "4": "é‚£ä¹ˆï¼Œå¦‚ä½•è§£å†³è¿™äº›æ£˜æ‰‹çš„ä¸å®šå¼å‘¢ï¼Ÿä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸ªä¸“é—¨ä¸ºæ­¤è€Œç”Ÿçš„å¼ºå¤§æ­¦å™¨ï¼Œå®ƒçš„åå­—å«æ´›å¿…è¾¾æ³•åˆ™ã€‚è¿™ä¸ªæ³•åˆ™çš„æ€è·¯éå¸¸å·§å¦™ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œå½“ä¸€ä¸ªåˆ†å¼çš„æé™ä¸å¥½æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¯•è¯•çœ‹ï¼Œæ±‚å®ƒçš„åˆ†å­åˆ†æ¯å„è‡ªæ±‚å¯¼ä¹‹åçš„é‚£ä¸ªæ–°åˆ†å¼çš„æé™ã€‚",
            "5": "æˆ‘ä»¬å…ˆæ¥çœ‹0æ¯”0å‹æ´›å¿…è¾¾æ³•åˆ™çš„ä¸¥æ ¼å®šä¹‰ã€‚å®ƒæœ‰ä¸‰ä¸ªå‰ææ¡ä»¶ï¼šç¬¬ä¸€ï¼Œæé™å¿…é¡»æ˜¯0æ¯”0çš„å½¢å¼ã€‚ç¬¬äºŒï¼Œåˆ†å­åˆ†æ¯å‡½æ•°åœ¨æ±‚æé™ç‚¹çš„é™„è¿‘è¦å¯å¯¼ï¼Œå¹¶ä¸”åˆ†æ¯çš„å¯¼æ•°ä¸èƒ½æ˜¯0ã€‚ç¬¬ä¸‰ï¼Œæ±‚å¯¼ä¹‹åçš„æ–°åˆ†å¼ï¼Œå®ƒçš„æé™å¿…é¡»å­˜åœ¨ã€‚å¦‚æœè¿™ä¸‰ç‚¹éƒ½æ»¡è¶³ï¼Œé‚£ä¹ˆåŸæ¥çš„æé™å°±ç­‰äºæ±‚å¯¼åçš„æ–°æé™ã€‚",
            "6": "æ´›å¿…è¾¾æ³•åˆ™çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œå®ƒä¸ä»…å¯¹0æ¯”0å‹æœ‰æ•ˆï¼Œå¯¹æˆ‘ä»¬åˆšæ‰æåˆ°çš„æ— ç©·æ¯”æ— ç©·å‹ï¼Œä¹Ÿå®Œå…¨é€‚ç”¨ã€‚å®šç†çš„å†…å®¹å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œåªéœ€è¦æŠŠç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä»å‡½æ•°è¶‹äº0ï¼Œæ”¹æˆå‡½æ•°è¶‹äºæ— ç©·å¤§å°±å¯ä»¥äº†ã€‚å…¶ä»–æ¡ä»¶å’Œç»“è®ºéƒ½ä¿æŒä¸å˜ã€‚è¿™ä¸€ç‚¹éå¸¸æ–¹ä¾¿æˆ‘ä»¬è®°å¿†å’Œä½¿ç”¨ã€‚",
            "7": "ç†è®ºè¯´å®Œäº†ï¼Œæˆ‘ä»¬æ¥å®æˆ˜ä¸€ä¸‹ã€‚å›åˆ°æœ€åˆçš„é—®é¢˜ï¼Œæ±‚sinxé™¤ä»¥xçš„æé™ã€‚ç¬¬ä¸€æ­¥ï¼Œæ£€æŸ¥ç±»å‹ï¼Œæ˜¯0æ¯”0å‹ï¼Œæ»¡è¶³æ¡ä»¶ã€‚ç¬¬äºŒæ­¥ï¼Œåº”ç”¨æ³•åˆ™ï¼Œå¯¹åˆ†å­sinxæ±‚å¯¼å¾—åˆ°cosxï¼Œå¯¹åˆ†æ¯xæ±‚å¯¼å¾—åˆ°1ã€‚ç¬¬ä¸‰æ­¥ï¼Œè®¡ç®—æ–°æé™ï¼Œcosxé™¤ä»¥1çš„æé™ï¼Œå°±æ˜¯cos0ï¼Œç­‰äº1ã€‚é—®é¢˜è½»æ¾è§£å†³ï¼",
            "8": "æˆ‘ä»¬å†æ¥çœ‹æ— ç©·æ¯”æ— ç©·çš„ä¾‹å­ï¼Œeçš„xæ¬¡æ–¹é™¤ä»¥xå¹³æ–¹ã€‚ç¬¬ä¸€æ­¥ï¼Œæ£€æŸ¥ç±»å‹ï¼Œæ˜¯æ— ç©·æ¯”æ— ç©·ï¼Œæ»¡è¶³æ¡ä»¶ã€‚ç¬¬äºŒæ­¥ï¼Œåº”ç”¨æ³•åˆ™ï¼Œåˆ†å­æ±‚å¯¼è¿˜æ˜¯eçš„xæ¬¡æ–¹ï¼Œåˆ†æ¯æ±‚å¯¼æ˜¯2xã€‚æˆ‘ä»¬å¾—åˆ°çš„æ–°æé™æ˜¯eçš„xæ¬¡æ–¹é™¤ä»¥2xã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªæ–°æé™ä»ç„¶æ˜¯æ— ç©·æ¯”æ— ç©·çš„å½¢å¼ï¼è¿™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ",
            "9": "åˆ«æ‹…å¿ƒï¼Œæ´›å¿…è¾¾æ³•åˆ™çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œåªè¦æ¡ä»¶ä¸€ç›´æ»¡è¶³ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸€ç›´ç”¨ä¸‹å»ï¼å¯¹äºåˆšæ‰å¾—åˆ°çš„eçš„xæ¬¡æ–¹é™¤ä»¥2xï¼Œæˆ‘ä»¬å†æ¬¡æ£€æŸ¥ï¼Œå®ƒä»ç„¶æ˜¯æ— ç©·æ¯”æ— ç©·å‹ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®ƒå†æ¬¡ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™ï¼åˆ†å­æ±‚å¯¼è¿˜æ˜¯eçš„xæ¬¡æ–¹ï¼Œåˆ†æ¯æ±‚å¯¼å˜æˆäº†2ã€‚ç°åœ¨æé™å°±éå¸¸æ¸…æ™°äº†ï¼Œç»“æœæ˜¯æ­£æ— ç©·ã€‚",
            "10": "åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªè®¨è®ºäº†0æ¯”0å’Œæ— ç©·æ¯”æ— ç©·è¿™ä¸¤ç§æ ‡å‡†çš„ä¸å®šå¼ã€‚ä½†è¿˜æœ‰å…¶ä»–ç±»å‹ï¼Œæ¯”å¦‚0ä¹˜ä»¥æ— ç©·ã€‚å¯¹äºè¿™ç§ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåšä¸€ä¸ªå˜å½¢ï¼ŒæŠŠå®ƒå†™æˆåˆ†æ•°å½¢å¼ã€‚é€šå¸¸æ˜¯æŠŠå…¶ä¸­ä¸€ä¸ªå› å­ï¼Œå†™æˆ1é™¤ä»¥å®ƒçš„å€’æ•°çš„å½¢å¼ï¼Œæ”¾åˆ°åˆ†æ¯ä¸Šï¼Œè¿™æ ·å°±æŠŠå®ƒè½¬åŒ–æˆäº†æ ‡å‡†çš„0æ¯”0æˆ–è€…æ— ç©·æ¯”æ— ç©·å‹ã€‚",
            "11": "å¦ä¸€ç§ç±»å‹æ˜¯æ— ç©·å‡æ— ç©·ã€‚è¿™ç§ä¸å®šå¼é€šå¸¸å‡ºç°åœ¨åˆ†å¼ç›¸å‡çš„æƒ…å†µã€‚æˆ‘ä»¬çš„ç­–ç•¥æ˜¯ï¼Œé€šè¿‡é€šåˆ†ï¼ŒæŠŠä¸¤ä¸ªåˆ†å¼åˆå¹¶æˆä¸€ä¸ªã€‚è¿™æ ·ä¸€æ¥ï¼Œå®ƒé€šå¸¸å°±ä¼šå˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„0æ¯”0å‹äº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™äº†ã€‚",
            "12": "æœ€å¤æ‚çš„ä¸€ç±»ä¸å®šå¼æ˜¯å¹‚æŒ‡å‡½æ•°å‹ï¼Œæ¯”å¦‚1çš„æ— ç©·æ¬¡æ–¹ï¼Œ0çš„0æ¬¡æ–¹ç­‰ç­‰ã€‚å¯¹ä»˜å®ƒä»¬çš„é€šç”¨ç­–ç•¥æ˜¯å–å¯¹æ•°ã€‚æˆ‘ä»¬å…ˆè®¾åŸå‡½æ•°ä¸ºyï¼Œç„¶åä¸¤è¾¹å–è‡ªç„¶å¯¹æ•°ï¼Œåˆ©ç”¨å¯¹æ•°çš„æ€§è´¨æŠŠæŒ‡æ•°æ‹¿ä¸‹æ¥ã€‚è¿™æ ·é—®é¢˜å°±è½¬åŒ–æˆäº†æ±‚lnyçš„æé™ï¼Œå®ƒé€šå¸¸æ˜¯0ä¹˜ä»¥æ— ç©·å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§å‰é¢çš„æ–¹æ³•å¤„ç†ã€‚æœ€ååˆ«å¿˜äº†ï¼Œæ±‚å‡ºæ¥çš„æ˜¯lnyçš„æé™Lï¼ŒåŸæé™åº”è¯¥æ˜¯eçš„Læ¬¡æ–¹ã€‚",
            "13": "æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª0ä¹˜ä»¥æ— ç©·çš„ä¾‹å­ï¼Œæ±‚xä¹˜ä»¥lnxçš„æé™ï¼Œå½“xä»å³ä¾§è¶‹äº0æ—¶ã€‚è¿™æ˜¯å…¸å‹çš„0ä¹˜ä»¥æ— ç©·å‹ã€‚æˆ‘ä»¬æŠŠå®ƒå˜å½¢ä¸ºlnxé™¤ä»¥xåˆ†ä¹‹ä¸€ã€‚ç°åœ¨ï¼Œå®ƒå˜æˆäº†æ— ç©·æ¯”æ— ç©·å‹ï¼Œæ»¡è¶³äº†æ´›å¿…è¾¾æ³•åˆ™çš„æ¡ä»¶ã€‚åˆ†å­æ±‚å¯¼æ˜¯xåˆ†ä¹‹ä¸€ï¼Œåˆ†æ¯æ±‚å¯¼æ˜¯è´Ÿxå¹³æ–¹åˆ†ä¹‹ä¸€ï¼ŒåŒ–ç®€åç­‰äºè´Ÿxï¼Œæé™å°±æ˜¯0ã€‚",
            "14": "å­¦ä¹ äº†å¼ºå¤§çš„å·¥å…·ï¼Œæ›´è¦äº†è§£å®ƒçš„ä½¿ç”¨é™åˆ¶ã€‚æœ€éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä½¿ç”¨å‰å¿…é¡»æ£€æŸ¥å®ƒæ˜¯ä¸æ˜¯0æ¯”0æˆ–è€…æ— ç©·æ¯”æ— ç©·å‹ï¼å¦‚æœä¸æ˜¯ï¼Œæ¯”å¦‚ä¸€ä¸ªæé™å¯ä»¥ç›´æ¥ä»£å…¥ç®—å‡ºç»“æœï¼Œä½ å´é”™è¯¯åœ°ç”¨äº†æ´›å¿…è¾¾ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªå®Œå…¨é”™è¯¯çš„ç­”æ¡ˆã€‚æ‰€ä»¥ï¼Œæ£€æŸ¥ç±»å‹æ˜¯é“å¾‹ï¼",
            "15": "ç¬¬äºŒä¸ªå¸¸è§çš„é”™è¯¯ï¼Œæ˜¯æŠŠæ´›å¿…è¾¾æ³•åˆ™å’Œæˆ‘ä»¬ä¹‹å‰å­¦çš„å•†çš„æ±‚å¯¼æ³•åˆ™ææ··äº†ã€‚è¯·å¤§å®¶ä¸€å®šè®°ä½ï¼Œæ´›å¿…è¾¾æ³•åˆ™æ˜¯å¯¹åˆ†å­å’Œåˆ†æ¯åˆ†åˆ«æ±‚å¯¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ±‚æé™çš„æŠ€å·§ã€‚è€Œå•†çš„æ±‚å¯¼æ³•åˆ™æ˜¯æ±‚ä¸€ä¸ªåˆ†å¼å‡½æ•°çš„å¯¼æ•°ï¼Œä¸¤è€…å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ã€‚",
            "16": "å¥½äº†ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹æ´›å¿…è¾¾æ³•åˆ™çš„æ ¸å¿ƒå†…å®¹ã€‚å®ƒçš„å…¬å¼æ˜¯ï¼ŒåŸåˆ†å¼çš„æé™ç­‰äºå¯¼æ•°åˆ†å¼çš„æé™ã€‚å®ƒç›´æ¥é€‚ç”¨äº0æ¯”0å’Œæ— ç©·æ¯”æ— ç©·è¿™ä¸¤ç§ä¸å®šå¼ï¼Œå¹¶ä¸”ä½¿ç”¨æ—¶éœ€è¦æ»¡è¶³ä¸‰ä¸ªå‰ææ¡ä»¶ã€‚è¿™æ˜¯æ³•åˆ™çš„åŸºç¡€ã€‚",
            "17-1": "åŒå­¦ä»¬ï¼Œç°åœ¨æˆ‘ä»¬æ¥åˆ°äº†æœ€åä¸€ä¸ªæ€»ç»“é¡µé¢ã€‚è¿™ä¸€é¡µä¸»è¦è®²è§£çš„æ˜¯ï¼Œå½“æˆ‘ä»¬é‡åˆ°ä¸€äº›éæ ‡å‡†çš„ä¸å®šå¼ç±»å‹æ—¶ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ã€‚è¿™äº›ç±»å‹åŒ…æ‹¬0ä¹˜ä»¥æ— ç©·ã€æ— ç©·å‡æ— ç©·ï¼Œä»¥åŠå¹‚æŒ‡å‹ç­‰ã€‚å®ƒä»¬éƒ½éœ€è¦é€šè¿‡é€‚å½“çš„è½¬åŒ–ï¼Œæ‰èƒ½å˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„0æ¯”0æˆ–æ— ç©·æ¯”æ— ç©·å‹ã€‚",
            "17-2": "é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹0ä¹˜ä»¥æ— ç©·å‹ã€‚è¿™ç§ç±»å‹çš„å¤„ç†æ–¹æ³•æ˜¯ï¼ŒæŠŠå®ƒåŒ–ä¸ºåˆ†å¼å½¢å¼ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå…¶ä¸­ä¸€ä¸ªå› å­å†™æˆ1é™¤ä»¥å®ƒçš„å€’æ•°çš„å½¢å¼ï¼Œæ”¾åˆ°åˆ†æ¯ä¸Šã€‚è¿™æ ·å°±æŠŠ0ä¹˜ä»¥æ— ç©·è½¬åŒ–æˆäº†0æ¯”0æˆ–æ— ç©·æ¯”æ— ç©·å‹ï¼Œç„¶åå°±å¯ä»¥åº”ç”¨æ´›å¿…è¾¾æ³•åˆ™äº†ã€‚",
            "17-3": "ç¬¬äºŒç§ç±»å‹æ˜¯æ— ç©·å‡æ— ç©·ã€‚è¿™ç§ä¸å®šå¼é€šå¸¸å‡ºç°åœ¨ä¸¤ä¸ªåˆ†å¼ç›¸å‡çš„æƒ…å†µã€‚æˆ‘ä»¬çš„å¤„ç†ç­–ç•¥æ˜¯é€šè¿‡é€šåˆ†ï¼ŒæŠŠä¸¤ä¸ªåˆ†å¼åˆå¹¶æˆä¸€ä¸ªåˆ†å¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®ƒé€šå¸¸å°±ä¼šå˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„0æ¯”0å‹ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™æ±‚è§£äº†ã€‚",
            "17-4": "ç¬¬ä¸‰ç§ç±»å‹æ˜¯å¹‚æŒ‡å‹ï¼ŒåŒ…æ‹¬1çš„æ— ç©·æ¬¡æ–¹ã€0çš„0æ¬¡æ–¹ã€æ— ç©·çš„0æ¬¡æ–¹ç­‰ç­‰ã€‚å¯¹ä»˜è¿™ç±»é—®é¢˜çš„é€šç”¨ç­–ç•¥æ˜¯å–å¯¹æ•°ã€‚æˆ‘ä»¬å…ˆè®¾åŸå‡½æ•°ä¸ºyï¼Œç„¶åä¸¤è¾¹å–è‡ªç„¶å¯¹æ•°ï¼Œåˆ©ç”¨å¯¹æ•°çš„æ€§è´¨æŠŠæŒ‡æ•°æ‹¿ä¸‹æ¥ã€‚è¿™æ ·é—®é¢˜å°±è½¬åŒ–æˆäº†æ±‚lnyçš„æé™ï¼Œé€šå¸¸æ˜¯0ä¹˜ä»¥æ— ç©·å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§å‰é¢çš„æ–¹æ³•å¤„ç†ã€‚æœ€ååˆ«å¿˜äº†ï¼Œæ±‚å‡ºæ¥çš„æ˜¯lnyçš„æé™Lï¼ŒåŸæé™åº”è¯¥æ˜¯eçš„Læ¬¡æ–¹ã€‚",
            "17-5": "æœ€åï¼Œè®©æˆ‘ä»¬å¼ºè°ƒä¸€ä¸‹æ ¸å¿ƒæ€æƒ³ã€‚å¯¹äºæ‰€æœ‰è¿™äº›å¤æ‚çš„ä¸å®šå¼ï¼Œæˆ‘ä»¬çš„å¤„ç†æµç¨‹æ˜¯ï¼šå…ˆåˆ¤æ–­ç±»å‹ï¼Œå†é€‰æ‹©åˆé€‚çš„è½¬åŒ–æ–¹æ³•ï¼Œæœ€ååº”ç”¨æ´›å¿…è¾¾æ³•åˆ™æ±‚å¯¼ã€‚è¿™ä¸ªæµç¨‹å¯ä»¥æ€»ç»“ä¸ºä¸€å¥è¯ï¼šå…ˆåˆ¤æ–­ï¼Œå†è½¬åŒ–ï¼Œåæ±‚å¯¼ã€‚è¯·åŒå­¦ä»¬ä¸€å®šè¦ç‰¢è®°è¿™ä¸ªåŸåˆ™ï¼Œå®ƒæ˜¯è§£å†³æ‰€æœ‰ä¸å®šå¼æé™é—®é¢˜çš„é‡‘é’¥åŒ™ã€‚è°¢è°¢å¤§å®¶ï¼"
        };

        // è™šæ‹ŸäººåŠ¨ä½œé…ç½®
        const actionMap = {
            "1": "A_RLH_welcome_O", "2": "A_RH_point_O", "3": "A_LH_introduced_O", "4": "A_RH_point_O",
            "5": "A_LH_introduced_O", "6": "A_LH_introduced_O", "7": "A_RH_point_O", "8": "A_LH_introduced_O",
            "9": "A_RH_point_O", "10": "A_LH_introduced_O", "11": "A_RH_point_O", "12": "A_LH_introduced_O",
            "13": "A_RH_point_O", "14": "A_LH_introduced_O", "15": "A_RH_point_O", "16": "A_LH_introduced_O",
            "17": "A_RLH_welcome_O", "17-1": "A_RLH_welcome_O", "17-2": "A_RH_point_O", "17-3": "A_LH_introduced_O", "17-4": "A_RH_point_O", "17-5": "A_RLH_welcome_O"
        };

        // æ£€æŸ¥æ˜¯å¦ä¸ºå¤šç‰‡æ®µè¯­éŸ³
        function getMultiSegmentSpeech(slideNum) {
            if (slideNum === 17) {
                return ["17-1", "17-2", "17-3", "17-4", "17-5"];
            }
            return null;
        }

        let currentSlide = 0;
        let avatarPlatform = null;
        let isConnected = false;
        let isTeaching = false;
        let isAutoPlaying = false;
        let speechFinishedResolve = null;

        const slides = document.querySelectorAll('.slide');

        function showSlide(index) {
            slides.forEach((slide, i) => slide.classList.toggle('active', i === index));
            currentSlide = index;
            document.getElementById('currentSlide').textContent = index + 1;
            if (window.MathJax && window.MathJax.typesetPromise) {
                window.MathJax.typesetPromise([slides[index]]).catch(err => console.error('MathJax æ¸²æŸ“å¤±è´¥:', err));
            }
            document.getElementById('prevBtn').disabled = index === 0;
            document.getElementById('nextBtn').disabled = index === totalSlides - 1;
            updateSubtitle(index + 1);
        }

        function nextSlide() { if (currentSlide < totalSlides - 1) { showSlide(currentSlide + 1); if (!isAutoPlaying) speakContent(currentSlide + 1); } }
        function previousSlide() { if (currentSlide > 0) { showSlide(currentSlide - 1); if (!isAutoPlaying) speakContent(currentSlide); } }
        function restart() { showSlide(0); if (avatarPlatform) { avatarPlatform.stop(); } isConnected = false; isTeaching = false; isAutoPlaying = false; document.getElementById('autoPlayBtn').disabled = false; }
        function updateSubtitle(slideNum) { const subtitleArea = document.getElementById('subtitleArea'); subtitleArea.textContent = subtitleScript[slideNum] || ''; }

        async function speakContent(slideNum) {
            if (!isTeaching || !isConnected || !avatarPlatform) { console.log('âš ï¸ è™šæ‹Ÿäººæœªè¿æ¥æˆ–æœªå¼€å§‹è®²è¯¾'); return; }
            
            const segments = getMultiSegmentSpeech(slideNum);
            if (segments) {
                for (let i = 0; i < segments.length; i++) {
                    const segmentId = segments[i];
                    const content = speechScript[segmentId];
                    if (!content) continue;
                    try {
                        const action = actionMap[segmentId];
                        if (action) { await avatarPlatform.writeCmd("action", action); }
                        await avatarPlatform.writeText(content, { nlp: false });
                        updateSubtitle(segmentId);
                        const speech = speechScript[segmentId];
                        const duration = speech ? speech.length * 150 + 1000 : 5000;
                        await new Promise(resolve => setTimeout(resolve, duration));
                    } catch (error) { console.error(`âŒ è®²è§£ç‰‡æ®µ${segmentId}å¤±è´¥:`, error); }
                }
                if (isAutoPlaying && speechFinishedResolve) {
                    console.log('âœ… ç¬¬' + slideNum + 'é¡µæ‰€æœ‰è¯­éŸ³ç‰‡æ®µæ’­æ”¾å®Œæˆ');
                    speechFinishedResolve();
                    speechFinishedResolve = null;
                }
            } else {
                const content = speechScript[slideNum];
                if (!content) return;
                try {
                    const action = actionMap[slideNum];
                    if (action) { await avatarPlatform.writeCmd("action", action); }
                    await avatarPlatform.writeText(content, { nlp: false });
                    updateSubtitle(slideNum);
                } catch (error) { console.error('âŒ è®²è§£å¤±è´¥:', error); }
            }
        }

        function getSlideDuration(slideNum) {
            const segments = getMultiSegmentSpeech(slideNum);
            if (segments) {
                let totalDuration = 0;
                for (let segmentId of segments) {
                    const speech = speechScript[segmentId];
                    if (speech) {
                        totalDuration += speech.length * 180;
                    }
                }
                return totalDuration;
            }

            const speech = speechScript[slideNum];
            if (!speech) return 10000;
            return speech.length * 180;
        }

        function updateStatus(message, type = 'normal') { const indicator = document.getElementById('statusIndicator'); if (indicator) { indicator.textContent = message; indicator.className = 'status-indicator'; if (type === 'connected') indicator.classList.add('connected'); else if (type === 'error') indicator.classList.add('error'); else if (type === 'connecting') indicator.classList.add('connecting'); } }

        function waitForSDK() {
            return new Promise((resolve, reject) => {
                if (window.AvatarPlatform) { resolve(); return; }
                const timeout = setTimeout(() => { reject(new Error('SDKåŠ è½½è¶…æ—¶')); }, 10000);
                window.addEventListener('sdkReady', function handler() { clearTimeout(timeout); window.removeEventListener('sdkReady', handler); resolve(); });
            });
        }

        async function startTeaching() {
            const startBtn = document.getElementById('startBtn');
            startBtn.disabled = true;
            startBtn.textContent = 'ğŸ”„ è¿æ¥ä¸­...';
            updateStatus('æ­£åœ¨è¿æ¥è™šæ‹Ÿäºº...', 'connecting');
            try {
                await waitForSDK();
                isTeaching = true;
                avatarPlatform = new window.AvatarPlatform();
                avatarPlatform.on('error', (error) => { console.error('âŒ è™šæ‹Ÿäººé”™è¯¯:', error); updateStatus('è™šæ‹Ÿäººé”™è¯¯', 'error'); });
                avatarPlatform.on('connect', () => { console.log('âœ… è™šæ‹Ÿäººå·²è¿æ¥'); isConnected = true; updateStatus('è™šæ‹Ÿäººå·²è¿æ¥', 'connected'); startBtn.textContent = 'ğŸ€ è®²è¯¾ä¸­'; });
                avatarPlatform.on('frame_stop', (data) => { console.log('âœ… è™šæ‹Ÿäººè®²è§£å®Œæˆ frame_stop:', data); if (isAutoPlaying && speechFinishedResolve) { console.log('ğŸ¬ é€šçŸ¥è‡ªåŠ¨æ’­æ”¾ï¼šè™šæ‹Ÿäººè®²è§£å®Œæˆ'); speechFinishedResolve(); speechFinishedResolve = null; } });
                
                avatarPlatform.setApiInfo({ appId: 'e8c180ed', apiKey: 'e0c44f0e2ef0f47582ffa7e864da0d9b', apiSecret: 'MDZkNDNiZWU4NDkzNWM5MDQzMTY4N2Nh', sceneId: '237415046114840576', serverUrl: 'wss://avatar.cn-huadong-1.xf-yun.com/v1/interact' });
                avatarPlatform.setGlobalParams({ stream: { protocol: 'xrtc', alpha: 1, bitrate: 1000000, fps: 25 }, avatar: { avatar_id: '110332017', width: 1920, height: 1080, scale: 1, move_h: 0, move_v: 0, audio_format: 1 }, tts: { vcn: 'x4_yiting', speed: 50, pitch: 50, volume: 100 }, avatar_dispatch: { interactive_mode: 1, content_analysis: 0, enable_action_status: 1 } });
                await avatarPlatform.start({ wrapper: document.getElementById('avatarWrapper') });
            } catch (error) {
                console.error('âŒ å¯åŠ¨å¤±è´¥:', error);
                updateStatus('å¯åŠ¨å¤±è´¥', 'error');
                startBtn.textContent = 'ğŸ€ å¼€å§‹è®²è¯¾';
                startBtn.disabled = false;
            }
        }

        async function startAutoPlay() {
            if (!isTeaching) { alert("è¯·å…ˆç‚¹å‡»å¼€å§‹è®²è¯¾è¿æ¥è™šæ‹Ÿäººã€‚"); return; }
            if (!isConnected) { alert("è™šæ‹Ÿäººæœªè¿æ¥ï¼Œæ— æ³•è‡ªåŠ¨æ’­æ”¾ã€‚"); return; }

            isAutoPlaying = true;
            document.getElementById('autoPlayBtn').disabled = true;
            try {
                for (let i = currentSlide; i < totalSlides; i++) {
                    if (!isAutoPlaying) { console.log('ğŸ›‘ è‡ªåŠ¨æ’­æ”¾è¢«åœæ­¢'); break; }
                    showSlide(i);
                    const speechPromise = new Promise(resolve => { speechFinishedResolve = resolve; });
                    await speakContent(i + 1);
                    const timeoutPromise = new Promise(resolve => setTimeout(() => {
                        console.log(`âš ï¸ ç¬¬${i + 1}é¡µè®²è§£è¶…æ—¶, ç»§ç»­ä¸‹ä¸€é¡µ`);
                        if (speechFinishedResolve) {
                            speechFinishedResolve();
                            speechFinishedResolve = null;
                        }
                        resolve();
                    }, getSlideDuration(i + 1)));
                    await Promise.race([speechPromise, timeoutPromise]);
                }
            } catch (error) { console.error('âŒ è‡ªåŠ¨æ’­æ”¾å¤±è´¥:', error); }
            finally {
                isAutoPlaying = false;
                document.getElementById('autoPlayBtn').disabled = false;
                window.playbackFinished = true;
                document.title = "PLAYBACK_FINISHED";
                console.log('ğŸ‰ æ’­æ”¾å®Œæˆ');
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
            else if (e.key === 'ArrowLeft') { e.preventDefault(); previousSlide(); }
        });

        document.getElementById('totalSlides').textContent = totalSlides;
        showSlide(0);
        
        setTimeout(() => { startTeaching(); }, 1500);
    </script>
</body>
</html>

