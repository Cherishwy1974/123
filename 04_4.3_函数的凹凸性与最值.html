
<!DOCTYPE html>
<html lang="zh-CN">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   04_4.3_函数的凹凸性与最值
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
  <script>
   window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre'],ignoreHtmlClass:'tex2jax_ignore',processHtmlClass:'tex2jax_process'},startup:{ready:()=>{console.log('✅ MathJax已加载并配置完成');MathJax.startup.defaultReady();}}};
  </script>
  <script async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <style>
   *{margin:0;padding:0;box-sizing:border-box;}html,body{width:100%;height:100%;margin:0;padding:0;}body{font-family:'Noto Serif SC',serif;background:#1a1a2e;overflow:hidden;height:100vh;width:100vw;}.blackboard{width:100vw;height:100vh;background:#1a1a2e;position:relative;border:10px solid #795548;margin:0;}.avatar-container{position:fixed;top:60%;left:50%;transform:translate(-50%,-50%);width:975px;height:1105px;overflow:hidden;z-index:50;pointer-events:none;background:transparent;}.wrapper{width:100%;height:100%;background:transparent;pointer-events:auto;}.slide-container{width:100%;height:100%;position:relative;}.slide{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;visibility:hidden;transition:opacity 0.6s ease-in-out;display:flex;justify-content:center;align-items:center;padding:2rem;background-color:transparent;}.slide.active{opacity:1;visibility:visible;}.slide-content{display:flex;flex-direction:row;gap:2rem;width:100%;width: 100%;height:95%;}.blackboard-text{font-family:'Noto Serif SC','Source Han Serif SC','Source Han Serif CN','Songti SC','SimSun','宋体',serif;color:#e0e0e0;display:flex;flex-direction:column;justify-content:center;padding:1.5rem;}.blackboard-text h1{color:#f1c40f;text-shadow:0 0 8px rgba(241,196,15,0.5);}.blackboard-text h2{color:#f1c40f;border-bottom:2px solid #f39c12;}.blackboard-text h3{color:#1abc9c;}.blackboard-text strong{color:#e74c3c;}.blackboard-text .math-formula{background-color:rgba(0,0,0,0.2);padding:1rem;border-radius:0.5rem;border-left:4px solid #f39c12;font-size:20px;}.animation-pane{position:relative;overflow:hidden;background:transparent;}.control-bar{position:fixed;left:-9999px;top:50%;transform:translateY(-50%);width:250px;background:rgba(30,30,30,0.95);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;z-index:200;border-radius:0 15px 15px 0;padding:20px 15px;transition:left 0.3s ease;}.control-bar:hover{left: -9999px;}.control-bar::before{content:'▶️';position:absolute;top:50%;right:-25px;transform:translateY(-50%);background:rgba(30,30,30,0.95);padding:10px 5px;border-radius:0 10px 10px 0;font-size:16px;writing-mode:vertical-lr;}.btn{padding:12px 20px;background:linear-gradient(135deg,#4a4a4a,#666);color:white;border:none;border-radius:8px;cursor:pointer;font-size:16px;font-weight:bold;transition:all 0.3s ease;width:100%;text-align:center;}.btn:hover{background:linear-gradient(135deg,#555,#777);transform:translateY(-2px);}.btn.primary{background:linear-gradient(135deg,#FF69B4,#FF1493);}.btn:disabled{opacity:0.5;cursor:not-allowed;transform:none;}.subtitle-area{position:absolute;bottom:20px;left:50px;right:50px;height:50px;background:rgba(0,0,0,0.8);border-radius:8px;display:flex;align-items:center;justify-content:center;z-index:60;color:white;font-size:23px;text-align:center;padding:0 20px;line-height:1.4;}.status-indicator{position:absolute;top:10px;right:10px;padding:5px 10px;background:rgba(0,0,0,0.5);color:white;border-radius:5px;font-size:16px;z-index:100;transition:opacity 0.3s ease;display:none;}.status-indicator.connected{background:rgba(76,175,80,0.8);display:block;}.status-indicator.recording{background:rgba(244,67,54,0.8);animation:pulse 1.5s infinite;display:block;}@keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.5;}}.status-indicator.error{background:rgba(244,67,54,0.8);display:block;}.status-indicator.connecting{background:rgba(255,152,0,0.8);display:block;}.recording-mode .status-indicator{opacity:0;pointer-events:none;}.recording-mode .control-bar{left:-9999px;transition:left 0.5s ease;}.nav-btn{background-color:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);transition:all 0.3s ease;}.nav-btn:hover{background-color:rgba(255,255,255,0.2);transform:translateY(-2px);}.nav-btn:disabled{opacity:0.4;cursor:not-allowed;}
  </style>
 </head>
 <body class="blackboard">
  <div class="status-indicator" id="statusIndicator">
   等待连接
  </div>
  <div class="avatar-container">
   <div class="wrapper" id="avatarWrapper">
   </div>
  </div>
  <div class="slide-container flex-grow" id="slide-container">
   <!-- 第1页：封面 -->
   <div class="slide active">
    <div style="display: flex; width: 100%; height: 100%; align-items: center; justify-content: center;">
     <div style="flex: 1; text-align: center; padding: 2rem;">
      <h1 style="font-size: 2.2rem; font-weight: bold; color: #f1c40f; text-shadow: 0 0 8px rgba(241, 196, 15, 0.5); margin-bottom: 1rem;">
       函数的凹凸性与最值
      </h1>
      <p style="font-size: 1.1rem; color: #9ca3af; margin-bottom: 1.5rem;">
       第4章 视频 4.3
      </p>
      <div style="display: inline-block; text-align: left; margin-top: 1.5rem;">
       <p style="font-size: 0.95rem; color: #e0e0e0; margin: 0.6rem 0;">
        ✓ 凹凸性的定义
       </p>
       <p style="font-size: 0.95rem; color: #e0e0e0; margin: 0.6rem 0;">
        ✓ 拐点的求法
       </p>
       <p style="font-size: 0.95rem; color: #e0e0e0; margin: 0.6rem 0;">
        ✓ 最值问题的求解
       </p>
       <p style="font-size: 0.95rem; color: #e0e0e0; margin: 0.6rem 0;">
        ✓ 实际应用问题优化
       </p>
      </div>
     </div>
     <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
      <svg style="width: 100%; max-width: 500px; height: 400px;" viewbox="0 0 600 500">
       <defs>
        <lineargradient id="grad4" x1="0%" x2="0%" y1="0%" y2="100%">
         <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1">
         </stop>
         <stop offset="100%" style="stop-color:#3498db;stop-opacity:1">
         </stop>
        </lineargradient>
       </defs>
       <path d="M 50 350 Q 150 100 300 250 T 550 300" fill="none" stroke="url(#grad4)" stroke-width="4">
        <animate attributename="stroke-dasharray" dur="4s" repeatcount="indefinite" values="0,2000;2000,0">
        </animate>
       </path>
       <circle cx="180" cy="150" fill="#e74c3c" r="12">
        <animate attributename="cy" dur="2s" repeatcount="indefinite" values="150;170;150">
        </animate>
       </circle>
       <circle cx="420" cy="280" fill="#2ecc71" r="12">
        <animate attributename="cy" dur="2s" repeatcount="indefinite" values="280;260;280">
        </animate>
       </circle>
       <text fill="#9b59b6" font-size="36" text-anchor="middle" x="300" y="450">
        极值与拐点
       </text>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第2页：什么是凹凸性 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       什么是凹凸性？
      </h2>
      <p class="mt-4 leading-relaxed">
       凹凸性描述的是函数曲线的弯曲方向。
      </p>
      <p class="mt-6 leading-relaxed text-gray-300">
       想象一下，如果曲线像一个杯子，能够盛水，我们就说它是<strong>向上凹</strong>的。
      </p>
      <p class="mt-4 leading-relaxed text-gray-300">
       反之，如果曲线像一个倒扣的帽子，我们就说它是<strong>向下凸</strong>的。
      </p>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <text fill="#2ecc71" font-size="28" text-anchor="middle" x="150" y="100">
        向上凹（杯形）
       </text>
       <path d="M 80 250 Q 150 150, 220 250" fill="none" stroke="#2ecc71" stroke-width="5">
       </path>
       <text fill="#2ecc71" font-size="18" text-anchor="middle" x="150" y="300">
        ∪
       </text>
       <text fill="#e74c3c" font-size="28" text-anchor="middle" x="450" y="100">
        向下凸（帽形）
       </text>
       <path d="M 380 150 Q 450 250, 520 150" fill="none" stroke="#e74c3c" stroke-width="5">
       </path>
       <text fill="#e74c3c" font-size="18" text-anchor="middle" x="450" y="300">
        ∩
       </text>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第3页：二阶导数与凹凸性 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       二阶导数判定凹凸性
      </h2>
      <p class="mt-4 leading-relaxed">
       二阶导数的符号直接决定了函数的凹凸性。
      </p>
      <div class="math-formula mt-6">
       $$f''(x) > 0 \\Rightarrow \\text{向上凹}$$
      </div>
      <div class="math-formula mt-4">
       $$f''(x) < 0 \\Rightarrow \\text{向下凸}$$
      </div>
      <p class="mt-6 text-gray-300">
       记忆技巧：二阶导数为正，曲线开口向上；二阶导数为负，曲线开口向下。
      </p>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="550" y1="350" y2="350">
       </line>
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="50" y1="350" y2="100">
       </line>
       <path d="M 100 300 Q 200 200, 300 300" fill="none" stroke="#2ecc71" stroke-width="5">
       </path>
       <text fill="#2ecc71" font-size="20" text-anchor="middle" x="200" y="180">
        f'' > 0
       </text>
       <path d="M 350 200 Q 450 300, 550 200" fill="none" stroke="#e74c3c" stroke-width="5">
       </path>
       <text fill="#e74c3c" font-size="20" text-anchor="middle" x="450" y="330">
        f'' < 0
       </text>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第4页：什么是拐点 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       拐点的定义
      </h2>
      <p class="mt-4 leading-relaxed">
       拐点是曲线凹凸性发生改变的点。
      </p>
      <p class="mt-6 leading-relaxed text-gray-300">
       在拐点处，曲线从向上凹变为向下凸，或者从向下凸变为向上凹。
      </p>
      <p class="mt-6 leading-relaxed">
       <strong>判定条件：</strong>
      </p>
      <div class="math-formula mt-4">
       $$f''(x_0) = 0 \\text{ 或 } f''(x_0) \\text{ 不存在}$$
      </div>
      <p class="mt-4 text-gray-300">
       且在 $x_0$ 两侧 $f''(x)$ 符号相反。
      </p>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="550" y1="350" y2="350">
       </line>
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="50" y1="350" y2="100">
       </line>
       <path d="M 100 300 Q 200 200, 300 250 Q 400 300, 500 200" fill="none" stroke="#3498db" stroke-width="5">
       </path>
       <circle cx="300" cy="250" fill="#f39c12" r="10">
        <animate attributename="r" dur="2s" repeatcount="indefinite" values="10;15;10">
        </animate>
       </circle>
       <text fill="#f39c12" font-size="20" text-anchor="middle" x="300" y="220">
        拐点
       </text>
       <line stroke="#f39c12" stroke-dasharray="5,5" stroke-width="2" x1="300" x2="300" y1="250" y2="350">
       </line>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第5页：如何求拐点 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       拐点的求法
      </h2>
      <p class="mt-4 leading-relaxed">
       求拐点的步骤：
      </p>
      <ul class="list-disc list-inside mt-6 space-y-4">
       <li>
        <strong>第一步：</strong>求二阶导数 $f''(x)$
       </li>
       <li>
        <strong>第二步：</strong>令 $f''(x) = 0$，解出可能的拐点
       </li>
       <li>
        <strong>第三步：</strong>检验 $f''(x)$ 在该点两侧符号是否改变
       </li>
       <li>
        <strong>第四步：</strong>若符号改变，则该点为拐点
       </li>
      </ul>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <rect fill="rgba(52,152,219,0.1)" height="80" rx="10" stroke="#3498db" stroke-width="3" width="400" x="100" y="80">
       </rect>
       <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="300" y="130">
        求 f''(x) = 0
       </text>
       <text fill="#3498db" font-size="40" text-anchor="middle" x="300" y="200">
        ↓
       </text>
       <rect fill="rgba(46,204,113,0.1)" height="80" rx="10" stroke="#2ecc71" stroke-width="3" width="400" x="100" y="220">
       </rect>
       <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="300" y="270">
        检验符号变化
       </text>
       <text fill="#2ecc71" font-size="40" text-anchor="middle" x="300" y="340">
        ↓
       </text>
       <rect fill="rgba(241,196,15,0.1)" height="80" rx="10" stroke="#f39c12" stroke-width="3" width="400" x="100" y="360">
       </rect>
       <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="300" y="410">
        确定拐点
       </text>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第6页：极值的概念 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       极值的概念
      </h2>
      <p class="mt-4 leading-relaxed">
       极值是函数在某个局部范围内的最大值或最小值。
      </p>
      <p class="mt-6 leading-relaxed text-gray-300">
       <strong>极大值：</strong>函数在该点附近取得最大值
      </p>
      <p class="mt-4 leading-relaxed text-gray-300">
       <strong>极小值：</strong>函数在该点附近取得最小值
      </p>
      <p class="mt-6 leading-relaxed">
       注意：极值是局部概念，不一定是全局最值。
      </p>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="550" y1="350" y2="350">
       </line>
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="50" y1="350" y2="100">
       </line>
       <path d="M 100 250 Q 200 150, 300 200 Q 400 250, 500 180" fill="none" stroke="#3498db" stroke-width="5">
       </path>
       <circle cx="200" cy="160" fill="#2ecc71" r="10">
        <animate attributename="r" dur="2s" repeatcount="indefinite" values="10;15;10">
        </animate>
       </circle>
       <text fill="#2ecc71" font-size="18" text-anchor="middle" x="200" y="140">
        极大值
       </text>
       <circle cx="400" cy="260" fill="#e74c3c" r="10">
        <animate attributename="r" begin="1s" dur="2s" repeatcount="indefinite" values="10;15;10">
        </animate>
       </circle>
       <text fill="#e74c3c" font-size="18" text-anchor="middle" x="400" y="285">
        极小值
       </text>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第7页：极值的判定 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       极值的判定方法
      </h2>
      <p class="mt-4 leading-relaxed">
       利用二阶导数判定极值：
      </p>
      <div class="math-formula mt-6">
       $$f'(x_0) = 0, \\quad f''(x_0) > 0 \\Rightarrow \\text{极小值}$$
      </div>
      <div class="math-formula mt-4">
       $$f'(x_0) = 0, \\quad f''(x_0) < 0 \\Rightarrow \\text{极大值}$$
      </div>
      <p class="mt-6 text-gray-300">
       记忆：二阶导数为正，开口向上，是极小值；二阶导数为负，开口向下，是极大值。
      </p>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <text fill="#2ecc71" font-size="24" text-anchor="middle" x="150" y="120">
        极小值点
       </text>
       <path d="M 80 250 Q 150 150, 220 250" fill="none" stroke="#2ecc71" stroke-width="5">
       </path>
       <circle cx="150" cy="150" fill="#2ecc71" r="8">
       </circle>
       <text fill="#2ecc71" font-size="18" text-anchor="middle" x="150" y="300">
        f' = 0, f'' > 0
       </text>
       <text fill="#e74c3c" font-size="24" text-anchor="middle" x="450" y="120">
        极大值点
       </text>
       <path d="M 380 150 Q 450 250, 520 150" fill="none" stroke="#e74c3c" stroke-width="5">
       </path>
       <circle cx="450" cy="250" fill="#e74c3c" r="8">
       </circle>
       <text fill="#e74c3c" font-size="18" text-anchor="middle" x="450" y="300">
        f' = 0, f'' < 0
       </text>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第8页：最值的概念 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       最值的概念
      </h2>
      <p class="mt-4 leading-relaxed">
       最值是函数在整个定义域或闭区间上的最大值和最小值。
      </p>
      <p class="mt-6 leading-relaxed text-gray-300">
       <strong>最大值：</strong>函数在整个区间上的最大值
      </p>
      <p class="mt-4 leading-relaxed text-gray-300">
       <strong>最小值：</strong>函数在整个区间上的最小值
      </p>
      <p class="mt-6 leading-relaxed">
       最值可能出现在极值点，也可能出现在区间端点。
      </p>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="550" y1="350" y2="350">
       </line>
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="50" y1="350" y2="100">
       </line>
       <path d="M 100 250 Q 200 150, 300 200 Q 400 250, 500 180" fill="none" stroke="#3498db" stroke-width="5">
       </path>
       <circle cx="100" cy="250" fill="#9b59b6" r="8">
       </circle>
       <text fill="#9b59b6" font-size="16" text-anchor="middle" x="100" y="380">
        端点a
       </text>
       <circle cx="500" cy="180" fill="#9b59b6" r="8">
       </circle>
       <text fill="#9b59b6" font-size="16" text-anchor="middle" x="500" y="380">
        端点b
       </text>
       <circle cx="200" cy="150" fill="#f39c12" r="10">
        <animate attributename="r" dur="2s" repeatcount="indefinite" values="10;15;10">
        </animate>
       </circle>
       <text fill="#f39c12" font-size="18" text-anchor="middle" x="200" y="130">
        最大值
       </text>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第9页：闭区间最值求法 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       闭区间最值的求法
      </h2>
      <p class="mt-4 leading-relaxed">
       在闭区间 $[a, b]$ 上求最值的步骤：
      </p>
      <ul class="list-disc list-inside mt-6 space-y-4">
       <li>
        求出所有临界点（令 $f'(x) = 0$）
       </li>
       <li>
        计算端点 $f(a)$ 和 $f(b)$ 的值
       </li>
       <li>
        计算所有临界点的函数值
       </li>
       <li>
        比较所有值，最大的是最大值，最小的是最小值
       </li>
      </ul>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <rect fill="rgba(52,152,219,0.1)" height="60" rx="8" stroke="#3498db" stroke-width="3" width="400" x="100" y="80">
       </rect>
       <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="300" y="115">
        1. 求临界点 f'(x) = 0
       </text>
       <text fill="#3498db" font-size="30" text-anchor="middle" x="300" y="170">
        ↓
       </text>
       <rect fill="rgba(46,204,113,0.1)" height="60" rx="8" stroke="#2ecc71" stroke-width="3" width="400" x="100" y="190">
       </rect>
       <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="300" y="225">
        2. 计算端点和临界点的值
       </text>
       <text fill="#2ecc71" font-size="30" text-anchor="middle" x="300" y="280">
        ↓
       </text>
       <rect fill="rgba(241,196,15,0.1)" height="60" rx="8" stroke="#f39c12" stroke-width="3" width="400" x="100" y="300">
       </rect>
       <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="300" y="335">
        3. 比较得出最大值和最小值
       </text>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第10页：实际应用-成本最小化 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       应用：成本最小化
      </h2>
      <p class="mt-4 leading-relaxed">
       在生产管理中，我们常常需要找到使成本最低的生产量。
      </p>
      <p class="mt-6 leading-relaxed text-gray-300">
       <strong>步骤：</strong>
      </p>
      <ul class="list-disc list-inside mt-4 space-y-3">
       <li>
        建立成本函数 $C(x)$
       </li>
       <li>
        求导数 $C'(x)$
       </li>
       <li>
        令 $C'(x) = 0$，求临界点
       </li>
       <li>
        验证是否为最小值
       </li>
      </ul>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="550" y1="350" y2="350">
       </line>
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="50" y1="350" y2="100">
       </line>
       <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="300" y="390">
        产量 x
       </text>
       <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="30" y="250">
        成本
       </text>
       <path d="M 100 300 Q 200 150, 300 180 Q 400 210, 500 250" fill="none" stroke="#2ecc71" stroke-width="5">
       </path>
       <circle cx="300" cy="180" fill="#f39c12" r="10">
        <animate attributename="r" dur="2s" repeatcount="indefinite" values="10;15;10">
        </animate>
       </circle>
       <text fill="#f39c12" font-size="18" text-anchor="middle" x="300" y="160">
        最低成本
       </text>
       <line stroke="#f39c12" stroke-dasharray="5,5" stroke-width="2" x1="300" x2="300" y1="180" y2="350">
       </line>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第11页：实际应用-利润最大化 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       应用：利润最大化
      </h2>
      <p class="mt-4 leading-relaxed">
       企业追求利润最大化，需要找到最优的生产或销售策略。
      </p>
      <p class="mt-6 leading-relaxed text-gray-300">
       利润函数：$P(x) = R(x) - C(x)$
      </p>
      <p class="mt-4 leading-relaxed text-gray-300">
       其中 $R(x)$ 是收入，$C(x)$ 是成本。
      </p>
      <p class="mt-6 leading-relaxed">
       求 $P'(x) = 0$ 的解，即可找到利润最大化的点。
      </p>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="550" y1="350" y2="350">
       </line>
       <line stroke="#ecf0f1" stroke-width="2" x1="50" x2="50" y1="350" y2="100">
       </line>
       <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="300" y="390">
        销量 x
       </text>
       <text fill="#ecf0f1" font-size="18" text-anchor="middle" x="30" y="250">
        利润
       </text>
       <path d="M 100 300 Q 200 150, 350 180 Q 450 200, 500 280" fill="none" stroke="#e74c3c" stroke-width="5">
       </path>
       <circle cx="350" cy="180" fill="#f39c12" r="10">
        <animate attributename="r" dur="2s" repeatcount="indefinite" values="10;15;10">
        </animate>
       </circle>
       <text fill="#f39c12" font-size="18" text-anchor="middle" x="350" y="160">
        最大利润
       </text>
       <line stroke="#f39c12" stroke-dasharray="5,5" stroke-width="2" x1="350" x2="350" y1="180" y2="350">
       </line>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第12页：实际应用-资源优化 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       应用：资源优化配置
      </h2>
      <p class="mt-4 leading-relaxed">
       在有限资源下，如何分配才能达到最优效果？
      </p>
      <p class="mt-6 leading-relaxed text-gray-300">
       例如：在固定预算下，如何分配广告投入使销售额最大？
      </p>
      <p class="mt-6 leading-relaxed">
       <strong>方法：</strong>建立目标函数，利用导数找到最优配置方案。
      </p>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <circle cx="300" cy="250" fill="rgba(241,196,15,0.1)" r="140" stroke="#f39c12" stroke-width="4">
       </circle>
       <text fill="#f39c12" font-size="28" text-anchor="middle" x="300" y="80">
        资源优化
       </text>
       <rect fill="rgba(46,204,113,0.2)" height="50" rx="8" stroke="#2ecc71" stroke-width="2" width="180" x="210" y="180">
       </rect>
       <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="300" y="210">
        建立目标函数
       </text>
       <text fill="#3498db" font-size="30" text-anchor="middle" x="300" y="260">
        ↓
       </text>
       <rect fill="rgba(52,152,219,0.2)" height="50" rx="8" stroke="#3498db" stroke-width="2" width="180" x="210" y="280">
       </rect>
       <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="300" y="310">
        求导找极值
       </text>
       <text fill="#e74c3c" font-size="30" text-anchor="middle" x="300" y="360">
        ↓
       </text>
       <text fill="#2ecc71" font-size="20" text-anchor="middle" x="300" y="400">
        最优配置方案
       </text>
      </svg>
     </div>
    </div>
   </div>

   <!-- 第13页：小结 -->
   <div class="slide">
    <div class="slide-content">
     <div class="blackboard-text w-1/2 text-xl p-8">
      <h2 class="text-4xl font-bold mb-8 pb-2">
       本节小结
      </h2>
      <p class="mt-4 leading-relaxed">
       <strong>核心知识点：</strong>
      </p>
      <ul class="list-disc list-inside mt-6 space-y-4">
       <li>
        凹凸性由二阶导数符号决定
       </li>
       <li>
        拐点是凹凸性改变的点
       </li>
       <li>
        最值需比较临界点和端点
       </li>
       <li>
        实际应用：建模、求导、优化
       </li>
      </ul>
      <p class="mt-8 text-gray-400">
       掌握这些方法，就能解决大部分优化问题。
      </p>
     </div>
     <div class="animation-pane w-1/2">
      <svg class="w-full h-full" viewbox="0 0 600 500">
       <text fill="#f39c12" font-size="32" text-anchor="middle" x="300" y="80">
        📊 核心方法
       </text>
       <rect fill="rgba(52,152,219,0.1)" height="300" rx="10" stroke="#3498db" stroke-width="3" width="400" x="100" y="120">
       </rect>
       <rect fill="rgba(46,204,113,0.2)" height="50" rx="5" stroke="#2ecc71" stroke-width="2" width="320" x="140" y="160">
       </rect>
       <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="300" y="190">
        f'' > 0 凹，f'' < 0 凸
       </text>
       <rect fill="rgba(231,76,60,0.2)" height="50" rx="5" stroke="#e74c3c" stroke-width="2" width="320" x="140" y="230">
       </rect>
       <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="300" y="260">
        拐点：f'' = 0 且符号改变
       </text>
       <rect fill="rgba(155,89,182,0.2)" height="50" rx="5" stroke="#9b59b6" stroke-width="2" width="320" x="140" y="300">
       </rect>
       <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="300" y="330">
        最值：比较临界点和端点
       </text>
       <rect fill="rgba(241,196,15,0.2)" height="50" rx="5" stroke="#f39c12" stroke-width="2" width="320" x="140" y="370">
       </rect>
       <text fill="#ecf0f1" font-size="16" text-anchor="middle" x="300" y="400">
        应用：建模 → 求导 → 优化
       </text>
      </svg>
     </div>
    </div>
   </div>
  </div>
  <div class="subtitle-area" id="subtitleArea">
   欢迎学习函数的凹凸性与最值！点击开始讲课启动虚拟人讲师。
  </div>
  <div class="control-bar">
   <div style="color:#f1c40f;font-weight:bold;margin-bottom:15px;text-align:center;">
    第
    <span id="currentSlide">
     1
    </span>
    /
    <span id="totalSlides">
     13
    </span>
    页
   </div>
   <button class="btn nav-btn" id="prevBtn" onclick="previousSlide()">
    ⬅️ 上一页
   </button>
   <button class="btn primary" id="startBtn" onclick="startTeaching()">
    🎀 开始讲课
   </button>
   <button class="btn nav-btn" id="nextBtn" onclick="nextSlide()">
    下一页 ➡️
   </button>
   <button class="btn" onclick="restart()">
    🔄 重新开始
   </button>
   <button class="btn" id="autoPlayBtn" onclick="startAutoPlay()">
    🎬 自动播放
   </button>
  </div>
  <script type="module">
        // 播放完成标记（供OBS检测）
        window.playbackFinished = false;

   try{const{default:AvatarPlatform,SDKEvents,PlayerEvents,RecorderEvents,UserMedia}=await import('./avatar-sdk-web_3.1.2.1002/index.js');window.AvatarPlatform=AvatarPlatform;window.SDKEvents=SDKEvents;window.PlayerEvents=PlayerEvents;window.RecorderEvents=RecorderEvents;window.UserMedia=UserMedia;console.log('✅ 讯飞官方SDK模块已加载');console.log('SDK版本:',AvatarPlatform.getVersion());}catch(error){console.error('❌ SDK模块加载失败:',error);}window.dispatchEvent(new CustomEvent('sdkReady'));
  </script>
  <script>
   const lessonTitle="函数的凹凸性与最值";const subtitleScript={"1":"欢迎学习函数的凹凸性与最值！今天我们将深入探讨函数曲线的弯曲特性以及如何求解最值问题。","2":"首先，让我们理解什么是凹凸性。凹凸性描述的是函数曲线的弯曲方向。想象一下，如果曲线像一个杯子，能够盛水，我们就说它是向上凹的；反之，如果曲线像一个倒扣的帽子，我们就说它是向下凸的。","3":"那么如何判定凹凸性呢？答案是利用二阶导数。当二阶导数大于零时，函数向上凹，曲线开口向上；当二阶导数小于零时，函数向下凸，曲线开口向下。这是一个非常重要的判定方法。","4":"接下来我们看拐点的定义。拐点是曲线凹凸性发生改变的点。在拐点处，曲线从向上凹变为向下凸，或者从向下凸变为向上凹。拐点的判定条件是：二阶导数等于零或不存在，且在该点两侧二阶导数符号相反。","5":"如何求拐点呢？步骤很简单：第一步，求二阶导数；第二步，令二阶导数等于零，解出可能的拐点；第三步，检验二阶导数在该点两侧符号是否改变；第四步，若符号改变，则该点为拐点。","6":"现在我们来看极值的概念。极值是函数在某个局部范围内的最大值或最小值。极大值是函数在该点附近取得的最大值，极小值是函数在该点附近取得的最小值。需要注意的是，极值是局部概念，不一定是全局最值。","7":"如何判定极值呢？我们可以利用二阶导数。当一阶导数等于零，且二阶导数大于零时，该点是极小值点；当一阶导数等于零，且二阶导数小于零时，该点是极大值点。记住：二阶导数为正，开口向上，是极小值；二阶导数为负，开口向下，是极大值。","8":"接下来是最值的概念。最值是函数在整个定义域或闭区间上的最大值和最小值。最大值是函数在整个区间上的最大值，最小值是函数在整个区间上的最小值。最值可能出现在极值点，也可能出现在区间端点。","9":"在闭区间上如何求最值呢？步骤如下：第一，求出所有临界点，令一阶导数等于零；第二，计算端点的函数值；第三，计算所有临界点的函数值；第四，比较所有值，最大的是最大值，最小的是最小值。","10":"现在我们看实际应用。在生产管理中，我们常常需要找到使成本最低的生产量。方法是：建立成本函数，求导数，令导数等于零求临界点，然后验证是否为最小值。这样就能找到最优的生产量。","11":"再看利润最大化问题。企业追求利润最大化，需要找到最优的生产或销售策略。利润函数等于收入减去成本。求利润函数的导数等于零的解，即可找到利润最大化的点。","12":"资源优化配置也是一个重要应用。在有限资源下，如何分配才能达到最优效果？例如，在固定预算下，如何分配广告投入使销售额最大？方法是建立目标函数，利用导数找到最优配置方案。","13":"最后我们来总结一下。凹凸性由二阶导数符号决定；拐点是凹凸性改变的点；最值需要比较临界点和端点；实际应用的关键是建模、求导、优化。掌握这些方法，就能解决大部分优化问题。感谢大家的学习！"};const actionMap={"1":"A_RLH_welcome_O","2":"A_LH_introduced_O","3":"A_RH_point_O","4":"A_LH_introduced_O","5":"A_RH_point_O","6":"A_LH_introduced_O","7":"A_RH_point_O","8":"A_LH_introduced_O","9":"A_RH_point_O","10":"A_LH_introduced_O","11":"A_RH_point_O","12":"A_LH_introduced_O","13":"A_RLH_welcome_O"};let currentSlide=1;const totalSlides=13;let avatarPlatform=null;let isConnected=false;let isTeaching=false;let isAutoPlaying=false;let speechFinishedResolve=null;const slides=document.querySelectorAll('.slide');function showSlide(index){slides.forEach((slide,i)=>slide.classList.toggle('active',i===index));currentSlide=index;document.getElementById('currentSlide').textContent=index+1;if(window.MathJax&&window.MathJax.typesetPromise){window.MathJax.typesetPromise([slides[index]]).catch(err=>console.error(err));}document.getElementById('prevBtn').disabled=index===0;document.getElementById('nextBtn').disabled=index===totalSlides-1;updateSubtitle(index+1);}function nextSlide(){if(currentSlide<totalSlides-1){showSlide(currentSlide+1);if(!isAutoPlaying)speakContent(currentSlide+1);}}function previousSlide(){if(currentSlide>0){showSlide(currentSlide-1);if(!isAutoPlaying)speakContent(currentSlide+1);}}function restart(){showSlide(0);if(avatarPlatform){avatarPlatform.stop();}isConnected=false;isTeaching=false;isAutoPlaying=false;}function updateSubtitle(slideNum){const subtitleArea=document.getElementById('subtitleArea');subtitleArea.textContent=subtitleScript[slideNum]||'';}async function speakContent(slideNum){if(!isTeaching||!isConnected||!avatarPlatform){console.log('⚠️ 虚拟人未连接或未开始教学，跳过语音播报');return;}const content=subtitleScript[slideNum];if(!content)return;try{const action=actionMap[slideNum];if(action){await avatarPlatform.writeCmd("action",action);console.log(`✅ 执行动作: ${action}`);}await avatarPlatform.writeText(content,{nlp:false});console.log(`✅ 沐沐讲解第${slideNum}页: ${content}`);updateSubtitle(slideNum);}catch(error){console.error('❌ 虚拟人讲解失败:',error);}}function updateStatus(message,type='normal'){const indicator=document.getElementById('statusIndicator');if(indicator){indicator.textContent=message;indicator.className='status-indicator';if(type==='connected'){indicator.classList.add('connected');}else if(type==='error'){indicator.classList.add('error');}else if(type==='connecting'){indicator.classList.add('connecting');}}}function waitForSDK(){return new Promise((resolve,reject)=>{if(typeof AvatarPlatform!=='undefined'){resolve();return;}const timeout=setTimeout(()=>{reject(new Error('SDK加载超时，请刷新页面重试'));},10000);window.addEventListener('sdkReady',function handler(){clearTimeout(timeout);window.removeEventListener('sdkReady',handler);resolve();});})}async function startTeaching(){const startBtn=document.getElementById('startBtn');startBtn.textContent='🔄 启动中...';startBtn.disabled=true;try{console.log('⏳ 等待SDK模块加载...');updateStatus('等待SDK加载...','connecting');await waitForSDK();console.log('✅ 讯飞官方SDK已加载');updateStatus('SDK已加载','connecting');if(avatarPlatform){avatarPlatform.destroy();}avatarPlatform=new AvatarPlatform({useInlinePlayer:true});avatarPlatform.on('connected',(initResp)=>{console.log('🎉 虚拟人连接成功！',initResp);isConnected=true;isTeaching=true;updateStatus('已连接','connected');startBtn.textContent='💖 虚拟人已就绪';setTimeout(()=>{speakContent(currentSlide+1);},1000);}).on('disconnected',(err)=>{console.log('🔌 虚拟人连接断开');isConnected=false;updateStatus('连接断开','error');if(err){console.error('❌ 连接异常断开:',err);}}).on('error',(error)=>{console.error('❌ 虚拟人错误:',error);updateStatus('错误: '+error.message,'error');startBtn.textContent='❌ 连接失败';startBtn.disabled=false;isTeaching=false;}).on('frame_stop',(data)=>{console.log('✅ 虚拟人讲解完成 frame_stop:',data);if(isAutoPlaying&&speechFinishedResolve){console.log('🎬 通知自动播放：虚拟人讲解完成');speechFinishedResolve();speechFinishedResolve=null;}});avatarPlatform.setApiInfo({
                    appId: 'e8c180ed',
                    apiKey: 'e0c44f0e2ef0f47582ffa7e864da0d9b',
                    apiSecret: 'MDZkNDNiZWU4NDkzNWM5MDQzMTY4N2Nh',
                    sceneId: '237415046114840576',
                    serverUrl: 'wss://avatar.cn-huadong-1.xf-yun.com/v1/interact'
                });avatarPlatform.setGlobalParams({stream:{protocol:'xrtc',alpha:1,bitrate:1000000,fps:25},avatar:{avatar_id:'110332017',width:1920,height:1080,scale:1,move_h:0,move_v:0,audio_format:1},tts:{vcn:'x4_yiting',speed:50,pitch:50,volume:100},avatar_dispatch:{interactive_mode:1,content_analysis:0,enable_action_status:1}});await avatarPlatform.start({wrapper:document.getElementById('avatarWrapper')});console.log('🎓 虚拟人教学系统启动完成');}catch(error){console.error('❌ 启动失败:',error);updateStatus('启动失败: '+error.message,'error');startBtn.textContent='🎀 开始讲课';startBtn.disabled=false;}}
        // 计算单页播放时长（用于超时fallback）
        // 注意：speechScript中的内容已经是公式音译后的汉字，直接计算字数即可
        // 修复：之前错误地使用了subtitleScript，现在改为speechScript
        function getSlideDuration(slideNum){
            const speech=speechScript[slideNum];
            if(!speech)return 10000;
            // 每个汉字180ms（正常语速）
            return speech.length*180;
        }async function startAutoPlay(){if(isAutoPlaying){stopAutoPlay();return;}try{console.log('🎬 开始自动播放完整课程...');isAutoPlaying=true;const autoPlayBtn=document.getElementById('autoPlayBtn');autoPlayBtn.textContent='⏹️ 停止播放';autoPlayBtn.style.background='linear-gradient(135deg, #f44336, #d32f2f)';updateStatus('🎬 自动播放开始！','recording');if(!avatarPlatform||!isConnected){console.log('🎬 启动虚拟人...');await startTeaching();await new Promise(resolve=>setTimeout(resolve,2000));}for(let slide=1;slide<=totalSlides;slide++){try{if(!isAutoPlaying){console.log('🛑 自动播放被停止');break;}console.log(`\n🎬 === 开始播放第${slide}页/${totalSlides}页 ===`);showSlide(slide-1);updateStatus(`📖 第${slide}页/${totalSlides}页 - 讲解中`,'recording');if(isConnected&&isTeaching&&avatarPlatform){try{const speechPromise=new Promise(resolve=>{speechFinishedResolve=resolve;});await speakContent(slide);console.log(`⏳ 等待虚拟人讲解第${slide}页完成...`);const timeoutPromise=new Promise(resolve=>setTimeout(()=>{console.log(`⚠️ 第${slide}页讲解超时，继续下一页`);resolve();},getSlideDuration(slide)));await Promise.race([speechPromise,timeoutPromise]);console.log(`✅ 第${slide}页讲解完成`);}catch(error){console.error(`❌ 第${slide}页讲解异常:`,error);}}else{console.log('⚠️ 虚拟人未连接，使用固定延时');await new Promise(resolve=>setTimeout(resolve,getSlideDuration(slide)));};}catch(error){console.error(`❌ 第${slide}页播放过程出错:`,error);}}if(isAutoPlaying){stopAutoPlay();}}catch(error){console.error('❌ 自动播放失败:',error);updateStatus('自动播放失败: '+error.message,'error');stopAutoPlay();}}function stopAutoPlay(){if(isAutoPlaying){isAutoPlaying=false;window.playbackFinished=true;document.title="PLAYBACK_FINISHED";console.log('🎉 播放完成！已修改标题为 PLAYBACK_FINISHED');document.body.classList.remove('recording-mode');const autoPlayBtn=document.getElementById('autoPlayBtn');autoPlayBtn.textContent='🎬 自动播放';autoPlayBtn.style.background='linear-gradient(135deg, #2196f3, #1976d2)';console.log('⏹️ 自动播放已停止');updateStatus('自动播放已停止','normal');}}document.addEventListener('keydown',(e)=>{if(e.key==='ArrowRight'||e.key===' '){e.preventDefault();nextSlide();}else if(e.key==='ArrowLeft'){e.preventDefault();previousSlide();}else if(e.key==='Enter'){e.preventDefault();speakContent(currentSlide+1);}});document.getElementById('totalSlides').textContent=totalSlides;showSlide(0);
        // 🚀 自动启动播放 - 延迟3秒后自动开始
        setTimeout(() => {
            console.log('🚀 自动启动播放...');
            startAutoPlay();
        }, 3000);
  </script>
 </body>
</html>
