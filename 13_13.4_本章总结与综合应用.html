<!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>第13章 章节总结与综合应用</title>
<link href="./noto-serif-sc.css" rel="stylesheet"/>
<style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Noto Serif SC', 'Source Han Serif SC', 'Songti SC', 'SimSun', serif; background: #1a1a2e; overflow: hidden; height: 100vh; width: 100vw; }
        .blackboard { width: 100vw; height: 100vh; background: #1a1a2e; position: relative; display: flex; }
        .page { position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0; visibility: hidden; transition: all 0.5s ease; padding: 30px; display: flex; }
        .page.active { opacity: 1; visibility: visible; }
        .left-panel { width: 35%; height: 100%; padding: 30px; display: flex; flex-direction: column; position: relative; overflow: hidden; }
        .right-panel { width: 65%; height: 100%; padding: 20px; display: flex; align-items: center; justify-content: center; position: relative; overflow: visible; }
        .chalk-text { color: #ffffff; font-size: 16px; font-weight: normal; letter-spacing: 0.5px; line-height: 1.5; }
        .title { font-size: 24px; margin-bottom: 20px; text-align: center; color: #e1bee7; }
        .emphasis { color: #FF6B6B; font-size: 18px; }
        .formula-box { background: rgba(255,224,102,0.1); padding: 15px; border-radius: 8px; border: 2px dashed rgba(255,224,102,0.4); margin: 15px 0; text-align: center; }
        .chalk-list { list-style: none; padding-left: 0; margin: 15px 0; }
        .chalk-list li { position: relative; padding-left: 20px; margin: 10px 0; font-size: 16px; }
        .chalk-list li::before { content: "•"; position: absolute; left: 0; color: #FFE066; }
        .svg-animation { width: 100%; height: auto; max-width: none; max-height: none; transform: translateX(-70px) scale(2); transform-origin: left center; }
        .page-indicator { position: absolute; top: 20px; right: 20px; color: #FFE066; font-size: 16px; z-index: 100; }
        .small-text { font-size: 14px; color: rgba(255,255,255,0.8); }
        .mjx-chtml { color: #ffffff !important; font-size: 16px !important; }
        .status-indicator { position: absolute; top: 10px; right: 10px; padding: 5px 10px; background: rgba(0,0,0,0.5); color: white; border-radius: 5px; font-size: 12px; z-index: 100; display: none !important; }
        .avatar-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1.5);
            width: 600px;
            height: 1400px;
            overflow: hidden;
            z-index: 10;
            pointer-events: none;
            background: transparent;
        }        .wrapper { width: 100%; height: 100%; background: transparent; pointer-events: auto; }
        .subtitle-area { 
            position: absolute; 
            bottom: 8px; 
            left: 0; 
            right: 0; 
            height: 50px; 
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); 
            overflow: hidden; 
            z-index: 110; 
            pointer-events: none;
            display: flex;
            align-items: center;
        }
        .subtitle-text {
            color: #fff; 
            font-size: 18px; 
            font-weight: 500;
            white-space: nowrap;
            display: inline-block;
            padding-left: 100%;
            animation: scroll-left 25s linear infinite;
        }
        @keyframes scroll-left {
            from { transform: translateX(0); }
            to { transform: translateX(-100%); }
        }
        .control-bar { position: fixed; left: -9999px; top: 50%; transform: translateY(-50%); width: 270px; height: auto; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 12px; z-index: 200; border-radius: 0 20px 20px 0; padding: 25px 20px; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.2); }
        .control-bar:hover { left: -9999px; box-shadow: 0 12px 40px rgba(0,0,0,0.3); }
        .control-bar::before { content: '▶️'; position: absolute; top: 50%; right: -30px; transform: translateY(-50%); background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px); padding: 12px 8px; border-radius: 0 15px 15px 0; font-size: 0.9rem; writing-mode: vertical-lr; border: 1px solid rgba(255, 255, 255, 0.1); color: #333; }
        .btn { padding: 14px 22px; background: rgba(255, 255, 255, 0.25); color: #333; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 12px; cursor: pointer; font-size: 14px; font-weight: 600; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); width: 100%; text-align: center; backdrop-filter: blur(5px); text-shadow: 0 1px 2px rgba(255,255,255,0.3); }
        .btn:hover { background: rgba(255, 255, 255, 0.35); transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2); }
        .btn.primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.3); }
        .btn.primary:hover { background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%); box-shadow: 0 8px 25px rgba(102,126,234,0.4); }
        .recording-mode .control-bar { left: -9999px; transition: left 0.5s ease; }
    
        /* 封面页样式覆盖 */
        .page.cover-page {
            display: flex !important;
            padding: 0 !important;
            align-items: center !important;
            justify-content: center !important;
        }
        .page.cover-page > div {
            display: flex !important;
        }
    </style>
<script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\(', '\)']], displayMath: [['$$', '$$'], ['\[', '\]']], packages: ['base', 'ams'], processEscapes: true, processEnvironments: true, macros: { frac: ['\frac{#1}{#2}', 2], dfrac: ['\displaystyle\frac{#1}{#2}', 2] } },
            startup: { pageReady: () => { console.log('MathJax is ready.'); return MathJax.startup.defaultPageReady(); } },
            options: { processHtmlClass: 'tex2jax_process', ignoreHtmlClass: 'tex2jax_ignore' }
        };
    </script>
<script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<div class="blackboard">
<div class="status-indicator" id="statusIndicator">等待连接</div>
<div class="avatar-container"><div class="wrapper" id="avatarWrapper"></div></div>
<div class="page-indicator">第 <span id="currentPage">1</span> / 15 页</div>
<!-- 第1页：第13章知识回顾 -->
<div class="page active cover-page" data-page="1" id="page1"><div style="display: flex; width: 100%; height: 100%; align-items: center; justify-content: center;">
<div style="flex: 1; text-align: center; padding: 2rem;">
<h1 style="font-size: 2.2rem; font-weight: bold; color: #f1c40f; text-shadow: 0 0 8px rgba(241, 196, 15, 0.5); margin-bottom: 1rem;">
                        本章总结与综合应用
                    </h1>
<p style="font-size: 1.1rem; color: #9ca3af; margin-bottom: 1.5rem;">
                        第13章 视频 13.4
                    </p>
<div style="display: inline-block; text-align: left; margin-top: 1.5rem;">
<p style="font-size: 0.95rem; color: #e0e0e0; margin: 0.6rem 0;">✓ 应用场景介绍</p>
<p style="font-size: 0.95rem; color: #e0e0e0; margin: 0.6rem 0;">✓ 解题思路分析</p>
<p style="font-size: 0.95rem; color: #e0e0e0; margin: 0.6rem 0;">✓ 典型例题讲解</p>
<p style="font-size: 0.95rem; color: #e0e0e0; margin: 0.6rem 0;">✓ 综合应用技巧</p>
</div>
</div>
<div style="flex: 1; display: flex; align-items: center; justify-content: center;">
<svg style="width: 100%; max-width: 500px; height: 400px;" viewbox="0 0 600 500">
<defs>
<lineargradient id="grad13" x1="0%" x2="100%" y1="0%" y2="100%">
<stop offset="0%" style="stop-color:#00bcd4;stop-opacity:1"></stop>
<stop offset="100%" style="stop-color:#0097a7;stop-opacity:1"></stop>
</lineargradient>
</defs>
<text fill="url(#grad13)" font-family="serif" font-size="50" text-anchor="middle" x="300" y="100">
                            P(X)
                            <animate attributename="opacity" dur="2s" repeatcount="indefinite" values="0.6;1;0.6"></animate>
</text>
<path d="M 100 350 Q 200 150 300 250 T 500 200" fill="none" stroke="#00bcd4" stroke-width="3"></path>
<path d="M 100 350 Q 200 150 300 250 T 500 200 L 500 350 L 100 350 Z" fill="url(#grad13)" opacity="0.3">
<animate attributename="opacity" dur="3s" repeatcount="indefinite" values="0.2;0.5;0.2"></animate>
</path>
</svg>
</div>
</div></div>
<div class="page" id="page2">
<div class="left-panel">
<h1 class="title chalk-text">应用1：质量控制</h1>
<div class="board-content">
<p class="chalk-text emphasis">问题</p>
<p class="chalk-text">某工厂生产零件，直径服从 $N(10, 0.01)$ mm</p>
<p class="chalk-text emphasis">质量标准</p>
<p class="chalk-text">合格品：$9.7 \leq X \leq 10.3$ mm</p>
<p class="chalk-text emphasis">分析</p>
<ul class="chalk-list">
<li class="chalk-text">$\mu = 10$ mm，$\sigma = 0.1$ mm</li>
<li class="chalk-text">$[9.7, 10.3] = [\mu - 3\sigma, \mu + 3\sigma]$</li>
<li class="chalk-text">合格率约 99.7%</li>
</ul>
<p class="chalk-text emphasis">结论</p>
<p class="chalk-text">生产过程稳定，质量良好</p>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewbox="0 0 700 600">
<!-- 质量控制图 -->
<text fill="#ffffff" font-size="16" text-anchor="middle" x="350" y="40">质量控制图</text>
<!-- 坐标轴 -->
<line stroke="#ffffff" stroke-width="2" x1="100" x2="600" y1="400" y2="400"></line>
<line stroke="#ffffff" stroke-width="2" x1="100" x2="100" y1="400" y2="150"></line>
<text fill="#ffffff" font-size="12" x="610" y="405">直径(mm)</text>
<!-- 正态分布曲线 -->
<path d="M 120 395 Q 180 350, 240 280 T 350 200 T 460 280 T 520 350 T 580 395" fill="rgba(78,205,196,0.2)" stroke="#4ECDC4" stroke-width="3">
<animate attributename="stroke-opacity" dur="3s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</path>
<!-- 均值线 -->
<line stroke="#FFE066" stroke-dasharray="5,5" stroke-width="3" x1="350" x2="350" y1="400" y2="200">
<animate attributename="stroke-opacity" dur="2s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</line>
<circle cx="350" cy="200" fill="#FFE066" r="6">
<animate attributename="r" dur="2s" repeatcount="indefinite" values="6;9;6"></animate>
</circle>
<text fill="#FFE066" font-size="12" text-anchor="middle" x="350" y="430">μ=10</text>
<!-- 控制上限 UCL -->
<line stroke="#FF6B6B" stroke-dasharray="3,3" stroke-width="2" x1="530" x2="530" y1="150" y2="400"></line>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="530" y="140">UCL</text>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="530" y="430">10.3</text>
<!-- 控制下限 LCL -->
<line stroke="#FF6B6B" stroke-dasharray="3,3" stroke-width="2" x1="170" x2="170" y1="150" y2="400"></line>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="170" y="140">LCL</text>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="170" y="430">9.7</text>
<!-- 合格区域标记 -->
<path d="M 170 400 L 170 280 Q 260 220, 350 200 Q 440 220, 530 280 L 530 400 Z" fill="rgba(255,107,107,0.15)" stroke="none">
<animate attributename="fill-opacity" dur="3s" repeatcount="indefinite" values="0.1;0.25;0.1"></animate>
</path>
<text fill="#4ECDC4" font-size="14" text-anchor="middle" x="350" y="470">合格区域 99.7%</text>
<!-- 3σ标记 -->
<line stroke="#9370DB" stroke-width="2" x1="170" x2="530" y1="450" y2="450"></line>
<line stroke="#9370DB" stroke-width="2" x1="170" x2="170" y1="445" y2="455"></line>
<line stroke="#9370DB" stroke-width="2" x1="530" x2="530" y1="445" y2="455"></line>
<text fill="#9370DB" font-size="11" text-anchor="middle" x="350" y="480">6σ 范围</text>
<!-- 样本点 -->
<circle cx="330" cy="250" fill="#FFE066" r="4"><animate attributename="opacity" dur="1s" repeatcount="indefinite" values="0;1;1"></animate></circle>
<circle cx="360" cy="240" fill="#FFE066" r="4"><animate attributename="opacity" begin="0.2s" dur="1s" repeatcount="indefinite" values="0;1;1"></animate></circle>
<circle cx="340" cy="260" fill="#FFE066" r="4"><animate attributename="opacity" begin="0.4s" dur="1s" repeatcount="indefinite" values="0;1;1"></animate></circle>
<circle cx="370" cy="245" fill="#FFE066" r="4"><animate attributename="opacity" begin="0.6s" dur="1s" repeatcount="indefinite" values="0;1;1"></animate></circle>
<text fill="#e1bee7" font-size="12" text-anchor="middle" x="350" y="530">过程能力指数 Cpk ≥ 1.33</text>
</svg>
</div>
</div>
</div>
<!-- 第3页：应用2 - 可靠性分析 -->
<div class="page" id="page3">
<div class="left-panel">
<h1 class="title chalk-text">应用2：可靠性分析</h1>
<div class="board-content">
<p class="chalk-text emphasis">问题</p>
<p class="chalk-text">某电子元件寿命服从指数分布，平均寿命1000小时</p>
<p class="chalk-text emphasis">可靠性函数</p>
<div class="formula-box"><p class="chalk-text">$$R(t) = P(T &gt; t) = e^{-\lambda t}$$</p></div>
<p class="chalk-text">其中 $\lambda = \frac{1}{1000}$</p>
<p class="chalk-text emphasis">计算</p>
<ul class="chalk-list">
<li class="chalk-text">工作500小时的可靠度：$R(500) \approx 0.606$</li>
<li class="chalk-text">工作1000小时的可靠度：$R(1000) \approx 0.368$</li>
</ul>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewbox="0 0 700 600">
<!-- 可靠性曲线 -->
<text fill="#ffffff" font-size="16" text-anchor="middle" x="350" y="40">可靠性曲线</text>
<!-- 坐标轴 -->
<line marker-end="url(#arrow-t)" stroke="#ffffff" stroke-width="2" x1="100" x2="600" y1="450" y2="450"></line>
<line marker-end="url(#arrow-r)" stroke="#ffffff" stroke-width="2" x1="100" x2="100" y1="450" y2="100"></line>
<text fill="#ffffff" font-size="12" x="610" y="455">t (小时)</text>
<text fill="#ffffff" font-size="12" x="90" y="90">R(t)</text>
<!-- 可靠性曲线 R(t) = e^(-t/1000) -->
<path d="M 100 120 Q 200 180, 300 260 T 500 380 T 580 430" fill="none" stroke="#4ECDC4" stroke-width="4">
<animate attributename="stroke-opacity" dur="3s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</path>
<!-- 填充区域 -->
<path d="M 100 450 L 100 120 Q 200 180, 300 260 T 500 380 T 580 430 L 580 450 Z" fill="rgba(78,205,196,0.15)" stroke="none">
<animate attributename="fill-opacity" dur="3s" repeatcount="indefinite" values="0.1;0.2;0.1"></animate>
</path>
<!-- 关键点标记 -->
<!-- t=0, R=1 -->
<circle cx="100" cy="120" fill="#FFE066" r="6">
<animate attributename="r" dur="2s" repeatcount="indefinite" values="6;9;6"></animate>
</circle>
<text fill="#FFE066" font-size="11" text-anchor="end" x="90" y="115">1.0</text>
<line stroke="#FFE066" stroke-width="1" x1="90" x2="110" y1="120" y2="120"></line>
<!-- t=500, R≈0.606 -->
<line stroke="#FF6B6B" stroke-dasharray="3,3" stroke-width="2" x1="300" x2="300" y1="450" y2="260">
<animate attributename="stroke-opacity" dur="2s" repeatcount="indefinite" values="0.3;0.8;0.3"></animate>
</line>
<circle cx="300" cy="260" fill="#FF6B6B" r="5">
<animate attributename="r" dur="2s" repeatcount="indefinite" values="5;8;5"></animate>
</circle>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="300" y="475">500</text>
<line stroke="#FF6B6B" stroke-dasharray="2,2" stroke-width="1" x1="100" x2="300" y1="260" y2="260"></line>
<text fill="#FF6B6B" font-size="10" text-anchor="end" x="90" y="265">0.606</text>
<!-- t=1000, R≈0.368 -->
<line stroke="#9370DB" stroke-dasharray="3,3" stroke-width="2" x1="500" x2="500" y1="450" y2="380">
<animate attributename="stroke-opacity" begin="1s" dur="2s" repeatcount="indefinite" values="0.3;0.8;0.3"></animate>
</line>
<circle cx="500" cy="380" fill="#9370DB" r="5">
<animate attributename="r" begin="1s" dur="2s" repeatcount="indefinite" values="5;8;5"></animate>
</circle>
<text fill="#9370DB" font-size="11" text-anchor="middle" x="500" y="475">1000</text>
<line stroke="#9370DB" stroke-dasharray="2,2" stroke-width="1" x1="100" x2="500" y1="380" y2="380"></line>
<text fill="#9370DB" font-size="10" text-anchor="end" x="90" y="385">0.368</text>
<!-- 平均寿命标记 -->
<text fill="#FFE066" font-size="12" text-anchor="middle" x="500" y="350">MTBF</text>
<text fill="#FFE066" font-size="11" text-anchor="middle" x="500" y="365">=1000h</text>
<defs>
<marker id="arrow-t" markerheight="10" markerwidth="10" orient="auto" refx="5" refy="5">
<polygon fill="#ffffff" points="0,0 10,5 0,10"></polygon>
</marker>
<marker id="arrow-r" markerheight="10" markerwidth="10" orient="auto" refx="5" refy="5">
<polygon fill="#ffffff" points="0,0 10,5 0,10"></polygon>
</marker>
</defs>
<text fill="#e1bee7" font-size="12" text-anchor="middle" x="350" y="530">可靠性随时间指数衰减</text>
</svg>
</div>
</div>
</div>
<!-- 第4页：应用3 - 风险评估 -->
<div class="page" id="page4">
<div class="left-panel">
<h1 class="title chalk-text">应用3：风险评估</h1>
<div class="board-content">
<p class="chalk-text emphasis">问题</p>
<p class="chalk-text">投资项目收益率服从 $N(0.08, 0.04)$</p>
<p class="chalk-text emphasis">风险分析</p>
<ul class="chalk-list">
<li class="chalk-text">期望收益率：8%</li>
<li class="chalk-text">标准差：20%</li>
<li class="chalk-text">亏损概率：$P(X &lt; 0)$</li>
</ul>
<p class="chalk-text emphasis">计算</p>
<div class="formula-box"><p class="chalk-text">$$Z = \frac{0 - 0.08}{0.2} = -0.4$$</p></div>
<p class="chalk-text">$P(X &lt; 0) \approx 0.345$，即34.5%的亏损概率</p>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewbox="0 0 700 600">
<!-- 风险评估矩阵 -->
<text fill="#ffffff" font-size="16" text-anchor="middle" x="350" y="40">风险-收益分析</text>
<!-- 坐标轴 -->
<line marker-end="url(#arrow-return)" stroke="#ffffff" stroke-width="2" x1="100" x2="600" y1="400" y2="400"></line>
<line marker-end="url(#arrow-prob)" stroke="#ffffff" stroke-width="2" x1="350" x2="350" y1="450" y2="100"></line>
<text fill="#ffffff" font-size="12" x="610" y="405">收益率</text>
<text fill="#ffffff" font-size="12" x="340" y="90">概率密度</text>
<!-- 正态分布曲线 -->
<path d="M 120 395 Q 180 360, 240 300 T 350 220 T 460 300 T 520 360 T 580 395" fill="none" stroke="#4ECDC4" stroke-width="3">
<animate attributename="stroke-opacity" dur="3s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</path>
<!-- 亏损区域（X<0） -->
<path d="M 120 400 L 120 395 Q 180 360, 240 300 T 350 220 L 350 400 Z" fill="rgba(255,107,107,0.3)" stroke="#FF6B6B" stroke-width="2">
<animate attributename="fill-opacity" dur="3s" repeatcount="indefinite" values="0.2;0.4;0.2"></animate>
</path>
<text fill="#FF6B6B" font-size="13" text-anchor="middle" x="235" y="350">亏损区</text>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="235" y="370">34.5%</text>
<!-- 盈利区域（X>0） -->
<path d="M 350 400 L 350 220 Q 460 300, 520 360 T 580 395 L 580 400 Z" fill="rgba(78,205,196,0.3)" stroke="#4ECDC4" stroke-width="2">
<animate attributename="fill-opacity" begin="1s" dur="3s" repeatcount="indefinite" values="0.2;0.4;0.2"></animate>
</path>
<text fill="#4ECDC4" font-size="13" text-anchor="middle" x="465" y="350">盈利区</text>
<text fill="#4ECDC4" font-size="11" text-anchor="middle" x="465" y="370">65.5%</text>
<!-- 0点标记 -->
<line stroke="#FFE066" stroke-dasharray="5,5" stroke-width="2" x1="350" x2="350" y1="400" y2="220">
<animate attributename="stroke-opacity" dur="2s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</line>
<circle cx="350" cy="220" fill="#FFE066" r="5">
<animate attributename="r" dur="2s" repeatcount="indefinite" values="5;8;5"></animate>
</circle>
<text fill="#FFE066" font-size="12" text-anchor="middle" x="350" y="430">0%</text>
<!-- 期望收益率标记 -->
<line stroke="#9370DB" stroke-width="2" x1="450" x2="450" y1="410" y2="420"></line>
<text fill="#9370DB" font-size="12" text-anchor="middle" x="450" y="440">E=8%</text>
<!-- 风险矩阵 -->
<rect fill="rgba(255,255,255,0.05)" height="80" rx="5" stroke="#ffffff" stroke-width="1" width="400" x="150" y="480"></rect>
<text fill="#FF6B6B" font-size="12" text-anchor="middle" x="350" y="505">风险等级：中等</text>
<text fill="#4ECDC4" font-size="11" text-anchor="middle" x="350" y="525">期望收益：8%</text>
<text fill="#FFE066" font-size="11" text-anchor="middle" x="350" y="545">标准差：20%</text>
<defs>
<marker id="arrow-return" markerheight="10" markerwidth="10" orient="auto" refx="5" refy="5">
<polygon fill="#ffffff" points="0,0 10,5 0,10"></polygon>
</marker>
<marker id="arrow-prob" markerheight="10" markerwidth="10" orient="auto" refx="5" refy="5">
<polygon fill="#ffffff" points="0,0 10,5 0,10"></polygon>
</marker>
</defs>
</svg>
</div>
</div>
</div>
<!-- 第5页：应用4 - 数据分析 -->
<div class="page" id="page5">
<div class="left-panel">
<h1 class="title chalk-text">应用4：数据分析</h1>
<div class="board-content">
<p class="chalk-text emphasis">问题</p>
<p class="chalk-text">某班50名学生考试成绩统计</p>
<p class="chalk-text emphasis">数据</p>
<ul class="chalk-list">
<li class="chalk-text">平均分：75分</li>
<li class="chalk-text">标准差：10分</li>
<li class="chalk-text">假设服从正态分布</li>
</ul>
<p class="chalk-text emphasis">分析</p>
<ul class="chalk-list">
<li class="chalk-text">60-90分的学生约占68%</li>
<li class="chalk-text">50-100分的学生约占95%</li>
<li class="chalk-text">90分以上约占16%</li>
</ul>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewbox="0 0 700 600">
<!-- 成绩分布直方图 -->
<text fill="#ffffff" font-size="16" text-anchor="middle" x="350" y="40">成绩分布分析</text>
<!-- 坐标轴 -->
<line stroke="#ffffff" stroke-width="2" x1="100" x2="600" y1="450" y2="450"></line>
<line stroke="#ffffff" stroke-width="2" x1="100" x2="100" y1="450" y2="150"></line>
<text fill="#ffffff" font-size="12" x="610" y="455">分数</text>
<text fill="#ffffff" font-size="12" x="90" y="140">人数</text>
<!-- 直方图 -->
<rect fill="rgba(255,107,107,0.5)" height="20" stroke="#FF6B6B" stroke-width="2" width="40" x="120" y="430">
<animate attributename="height" dur="2s" repeatcount="indefinite" values="0;20;20"></animate>
<animate attributename="y" dur="2s" repeatcount="indefinite" values="450;430;430"></animate>
</rect>
<text fill="#FF6B6B" font-size="10" text-anchor="middle" x="140" y="470">50</text>
<rect fill="rgba(255,107,107,0.5)" height="40" stroke="#FF6B6B" stroke-width="2" width="40" x="170" y="410">
<animate attributename="height" begin="0.2s" dur="2s" repeatcount="indefinite" values="0;40;40"></animate>
<animate attributename="y" begin="0.2s" dur="2s" repeatcount="indefinite" values="450;410;410"></animate>
</rect>
<text fill="#FF6B6B" font-size="10" text-anchor="middle" x="190" y="470">60</text>
<rect fill="rgba(78,205,196,0.5)" height="100" stroke="#4ECDC4" stroke-width="2" width="40" x="220" y="350">
<animate attributename="height" begin="0.4s" dur="2s" repeatcount="indefinite" values="0;100;100"></animate>
<animate attributename="y" begin="0.4s" dur="2s" repeatcount="indefinite" values="450;350;350"></animate>
</rect>
<text fill="#4ECDC4" font-size="10" text-anchor="middle" x="240" y="470">65</text>
<rect fill="rgba(78,205,196,0.5)" height="170" stroke="#4ECDC4" stroke-width="2" width="40" x="270" y="280">
<animate attributename="height" begin="0.6s" dur="2s" repeatcount="indefinite" values="0;170;170"></animate>
<animate attributename="y" begin="0.6s" dur="2s" repeatcount="indefinite" values="450;280;280"></animate>
</rect>
<text fill="#4ECDC4" font-size="10" text-anchor="middle" x="290" y="470">70</text>
<rect fill="rgba(255,224,102,0.5)" height="230" stroke="#FFE066" stroke-width="2" width="40" x="320" y="220">
<animate attributename="height" begin="0.8s" dur="2s" repeatcount="indefinite" values="0;230;230"></animate>
<animate attributename="y" begin="0.8s" dur="2s" repeatcount="indefinite" values="450;220;220"></animate>
</rect>
<text fill="#FFE066" font-size="10" text-anchor="middle" x="340" y="470">75</text>
<rect fill="rgba(78,205,196,0.5)" height="170" stroke="#4ECDC4" stroke-width="2" width="40" x="370" y="280">
<animate attributename="height" begin="1s" dur="2s" repeatcount="indefinite" values="0;170;170"></animate>
<animate attributename="y" begin="1s" dur="2s" repeatcount="indefinite" values="450;280;280"></animate>
</rect>
<text fill="#4ECDC4" font-size="10" text-anchor="middle" x="390" y="470">80</text>
<rect fill="rgba(78,205,196,0.5)" height="100" stroke="#4ECDC4" stroke-width="2" width="40" x="420" y="350">
<animate attributename="height" begin="1.2s" dur="2s" repeatcount="indefinite" values="0;100;100"></animate>
<animate attributename="y" begin="1.2s" dur="2s" repeatcount="indefinite" values="450;350;350"></animate>
</rect>
<text fill="#4ECDC4" font-size="10" text-anchor="middle" x="440" y="470">85</text>
<rect fill="rgba(147,112,219,0.5)" height="40" stroke="#9370DB" stroke-width="2" width="40" x="470" y="410">
<animate attributename="height" begin="1.4s" dur="2s" repeatcount="indefinite" values="0;40;40"></animate>
<animate attributename="y" begin="1.4s" dur="2s" repeatcount="indefinite" values="450;410;410"></animate>
</rect>
<text fill="#9370DB" font-size="10" text-anchor="middle" x="490" y="470">90</text>
<rect fill="rgba(147,112,219,0.5)" height="20" stroke="#9370DB" stroke-width="2" width="40" x="520" y="430">
<animate attributename="height" begin="1.6s" dur="2s" repeatcount="indefinite" values="0;20;20"></animate>
<animate attributename="y" begin="1.6s" dur="2s" repeatcount="indefinite" values="450;430;430"></animate>
</rect>
<text fill="#9370DB" font-size="10" text-anchor="middle" x="540" y="470">95</text>
<!-- 正态曲线叠加 -->
<path d="M 120 445 Q 190 410, 240 350 T 340 220 T 440 350 T 490 410 T 560 445" fill="none" stroke="#e1bee7" stroke-dasharray="5,5" stroke-width="3">
<animate attributename="stroke-opacity" dur="3s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</path>
<!-- 均值标记 -->
<line stroke="#FFE066" stroke-dasharray="3,3" stroke-width="2" x1="340" x2="340" y1="450" y2="220">
<animate attributename="stroke-opacity" dur="2s" repeatcount="indefinite" values="0.3;0.8;0.3"></animate>
</line>
<circle cx="340" cy="220" fill="#FFE066" r="5">
<animate attributename="r" dur="2s" repeatcount="indefinite" values="5;8;5"></animate>
</circle>
<text fill="#FFE066" font-size="12" text-anchor="middle" x="340" y="210">μ=75</text>
<text fill="#e1bee7" font-size="12" text-anchor="middle" x="350" y="530">成绩近似服从正态分布</text>
</svg>
</div>
</div>
</div>
<!-- 第6页：总结与展望 -->
<div class="page" id="page6">
<div class="left-panel">
<h1 class="title chalk-text">总结与展望</h1>
<div class="board-content">
<p class="chalk-text emphasis">本章总结</p>
<ul class="chalk-list">
<li class="chalk-text">掌握概率的基本概念与性质</li>
<li class="chalk-text">理解随机变量、期望、方差</li>
<li class="chalk-text">熟悉常见分布及其应用</li>
<li class="chalk-text">能够解决实际问题</li>
</ul>
<p class="chalk-text emphasis">进一步学习</p>
<ul class="chalk-list">
<li class="chalk-text">参数估计与假设检验</li>
<li class="chalk-text">回归分析</li>
<li class="chalk-text">方差分析</li>
<li class="chalk-text">时间序列分析</li>
</ul>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewbox="0 0 700 600">
<!-- 完整知识体系 -->
<text fill="#ffffff" font-size="18" text-anchor="middle" x="350" y="50">概率论与数理统计</text>
<!-- 中心圆 -->
<circle cx="350" cy="280" fill="rgba(255,224,102,0.3)" r="90" stroke="#FFE066" stroke-width="4">
<animate attributename="r" dur="4s" repeatcount="indefinite" values="90;100;90"></animate>
</circle>
<text fill="#FFE066" font-size="18" text-anchor="middle" x="350" y="270">概率论</text>
<text fill="#FFE066" font-size="14" text-anchor="middle" x="350" y="290">基础</text>
<!-- 外围知识点 -->
<!-- 1. 概率基础 -->
<circle cx="200" cy="150" fill="rgba(255,107,107,0.3)" r="50" stroke="#FF6B6B" stroke-width="3">
<animate attributename="r" dur="2s" repeatcount="indefinite" values="50;55;50"></animate>
</circle>
<text fill="#FF6B6B" font-size="12" text-anchor="middle" x="200" y="150">概率基础</text>
<line stroke="#FF6B6B" stroke-width="2" x1="280" x2="220" y1="220" y2="180">
<animate attributename="stroke-opacity" dur="2s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</line>
<!-- 2. 随机变量 -->
<circle cx="500" cy="150" fill="rgba(78,205,196,0.3)" r="50" stroke="#4ECDC4" stroke-width="3">
<animate attributename="r" begin="0.5s" dur="2s" repeatcount="indefinite" values="50;55;50"></animate>
</circle>
<text fill="#4ECDC4" font-size="12" text-anchor="middle" x="500" y="150">随机变量</text>
<line stroke="#4ECDC4" stroke-width="2" x1="420" x2="480" y1="220" y2="180">
<animate attributename="stroke-opacity" begin="0.5s" dur="2s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</line>
<!-- 3. 离散分布 -->
<circle cx="150" cy="350" fill="rgba(147,112,219,0.3)" r="50" stroke="#9370DB" stroke-width="3">
<animate attributename="r" begin="1s" dur="2s" repeatcount="indefinite" values="50;55;50"></animate>
</circle>
<text fill="#9370DB" font-size="12" text-anchor="middle" x="150" y="350">离散分布</text>
<line stroke="#9370DB" stroke-width="2" x1="260" x2="190" y1="310" y2="360">
<animate attributename="stroke-opacity" begin="1s" dur="2s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</line>
<!-- 4. 正态分布 -->
<circle cx="550" cy="350" fill="rgba(225,190,231,0.3)" r="50" stroke="#e1bee7" stroke-width="3">
<animate attributename="r" begin="1.5s" dur="2s" repeatcount="indefinite" values="50;55;50"></animate>
</circle>
<text fill="#e1bee7" font-size="12" text-anchor="middle" x="550" y="350">正态分布</text>
<line stroke="#e1bee7" stroke-width="2" x1="440" x2="510" y1="310" y2="360">
<animate attributename="stroke-opacity" begin="1.5s" dur="2s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</line>
<!-- 5. 应用 -->
<circle cx="350" cy="480" fill="rgba(255,224,102,0.3)" r="50" stroke="#FFE066" stroke-width="3">
<animate attributename="r" begin="2s" dur="2s" repeatcount="indefinite" values="50;55;50"></animate>
</circle>
<text fill="#FFE066" font-size="12" text-anchor="middle" x="350" y="480">实际应用</text>
<line stroke="#FFE066" stroke-width="2" x1="350" x2="350" y1="370" y2="430">
<animate attributename="stroke-opacity" begin="2s" dur="2s" repeatcount="indefinite" values="0.5;1;0.5"></animate>
</line>
<!-- 外围大圆 -->
<circle cx="350" cy="280" fill="none" r="220" stroke="rgba(255,255,255,0.2)" stroke-dasharray="10,5" stroke-width="2">
<animatetransform attributename="transform" dur="30s" repeatcount="indefinite" type="rotate" values="0 350 280; 360 350 280"></animatetransform>
</circle>
<text fill="#4ECDC4" font-size="14" text-anchor="middle" x="350" y="560">概率论是数据科学的基础</text>
</svg>
</div>
</div>
</div>

<!-- 第7页：概率论核心回顾 -->
<div class="page" id="page7">
<div class="left-panel">
<h1 class="title chalk-text">概率论核心回顾</h1>
<div class="board-content">
<p class="chalk-text emphasis">基本概念</p>
<ul class="chalk-list">
<li class="chalk-text">样本空间与事件</li>
<li class="chalk-text">概率的公理化定义</li>
<li class="chalk-text">条件概率与独立性</li>
</ul>
<p class="chalk-text emphasis">重要公式</p>
<div class="formula-box">
<p class="chalk-text">$$P(A \cup B) = P(A) + P(B) - P(AB)$$</p>
<p class="chalk-text">$$P(A|B) = \frac{P(AB)}{P(B)}$$</p>
</div>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewBox="0 0 700 600">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="350" y="40">概率论知识框架</text>
<g transform="translate(100,80)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">古典概型</text>
<text fill="#999" font-size="13" x="10" y="45">等可能事件，有限样本空间</text>
<text fill="#999" font-size="13" x="10" y="65">P(A) = |A| / |Ω|</text>
<text fill="#999" font-size="12" x="10" y="82">应用：抽签、掷骰子、扑克牌</text>
</g>
<g transform="translate(100,200)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">几何概型</text>
<text fill="#999" font-size="13" x="10" y="45">等可能事件，无限样本空间</text>
<text fill="#999" font-size="13" x="10" y="65">P(A) = 测度(A) / 测度(Ω)</text>
<text fill="#999" font-size="12" x="10" y="82">应用：随机投点、等车时间</text>
</g>
<g transform="translate(100,320)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">贝叶斯公式</text>
<text fill="#999" font-size="13" x="10" y="45">后验概率 = 先验概率 × 似然 / 证据</text>
<text fill="#999" font-size="13" x="10" y="65">P(B_i|A) = P(B_i)P(A|B_i) / ΣP(B_j)P(A|B_j)</text>
<text fill="#999" font-size="12" x="10" y="82">应用：医学诊断、垃圾邮件过滤</text>
</g>
</g>
</svg>
</div>
</div>
</div>

<!-- 第8页：随机变量核心回顾 -->
<div class="page" id="page8">
<div class="left-panel">
<h1 class="title chalk-text">随机变量核心回顾</h1>
<div class="board-content">
<p class="chalk-text emphasis">离散型随机变量</p>
<ul class="chalk-list">
<li class="chalk-text">分布律：$P(X=x_i) = p_i$</li>
<li class="chalk-text">期望：$E(X) = \sum x_i p_i$</li>
<li class="chalk-text">方差：$D(X) = E[(X-E(X))^2]$</li>
</ul>
<p class="chalk-text emphasis">连续型随机变量</p>
<ul class="chalk-list">
<li class="chalk-text">概率密度：$f(x)$</li>
<li class="chalk-text">期望：$E(X) = \int x f(x) dx$</li>
</ul>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewBox="0 0 700 600">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="350" y="40">随机变量的数字特征</text>
<g transform="translate(100,80)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">期望 E(X)</text>
<text fill="#999" font-size="13" x="10" y="45">反映随机变量的平均水平</text>
<text fill="#999" font-size="13" x="10" y="65">性质：E(aX+b) = aE(X) + b</text>
<text fill="#999" font-size="12" x="10" y="82">E(X+Y) = E(X) + E(Y) (总成立)</text>
</g>
<g transform="translate(100,200)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">方差 D(X)</text>
<text fill="#999" font-size="13" x="10" y="45">反映随机变量的波动程度</text>
<text fill="#999" font-size="13" x="10" y="65">性质：D(aX+b) = a²D(X)</text>
<text fill="#999" font-size="12" x="10" y="82">D(X) = E(X²) - [E(X)]²</text>
</g>
<g transform="translate(100,320)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">协方差与相关系数</text>
<text fill="#999" font-size="13" x="10" y="45">Cov(X,Y) = E[(X-E(X))(Y-E(Y))]</text>
<text fill="#999" font-size="13" x="10" y="65">ρ(X,Y) = Cov(X,Y) / (σ_X σ_Y)</text>
<text fill="#999" font-size="12" x="10" y="82">|ρ| = 1 表示线性相关，ρ = 0 表示不相关</text>
</g>
</g>
</svg>
</div>
</div>
</div>

<!-- 第9页：常见分布回顾 -->
<div class="page" id="page9">
<div class="left-panel">
<h1 class="title chalk-text">常见分布回顾</h1>
<div class="board-content">
<p class="chalk-text emphasis">离散分布</p>
<ul class="chalk-list">
<li class="chalk-text">0-1分布：$B(1,p)$</li>
<li class="chalk-text">二项分布：$B(n,p)$</li>
<li class="chalk-text">泊松分布：$P(\lambda)$</li>
</ul>
<p class="chalk-text emphasis">连续分布</p>
<ul class="chalk-list">
<li class="chalk-text">均匀分布：$U(a,b)$</li>
<li class="chalk-text">指数分布：参数 $\lambda$</li>
<li class="chalk-text">正态分布：$N(\mu, \sigma^2)$</li>
</ul>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewBox="0 0 700 600">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="350" y="40">常见分布对比</text>
<g transform="translate(50,80)">
<!-- 二项分布 -->
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="240" height="120" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">二项分布 B(n,p)</text>
<text fill="#999" font-size="12" x="10" y="40">n重伯努利试验</text>
<text fill="#999" font-size="12" x="10" y="58">P(X=k) = C(n,k)p^k(1-p)^(n-k)</text>
<text fill="#999" font-size="12" x="10" y="76">E(X) = np</text>
<text fill="#999" font-size="12" x="10" y="94">D(X) = np(1-p)</text>
<text fill="#FFE066" font-size="11" x="10" y="112">应用：质量抽检</text>
</g>
<g transform="translate(310,80)">
<!-- 泊松分布 -->
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="240" height="120" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">泊松分布 P(λ)</text>
<text fill="#999" font-size="12" x="10" y="40">单位时间内事件数</text>
<text fill="#999" font-size="12" x="10" y="58">P(X=k) = (λ^k/k!)e^(-λ)</text>
<text fill="#999" font-size="12" x="10" y="76">E(X) = λ</text>
<text fill="#999" font-size="12" x="10" y="94">D(X) = λ</text>
<text fill="#FFE066" font-size="11" x="10" y="112">应用：呼叫中心</text>
</g>
<g transform="translate(50,220)">
<!-- 指数分布 -->
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="240" height="120" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">指数分布</text>
<text fill="#999" font-size="12" x="10" y="40">等待时间分布</text>
<text fill="#999" font-size="12" x="10" y="58">f(x) = λe^(-λx), x≥0</text>
<text fill="#999" font-size="12" x="10" y="76">E(X) = 1/λ</text>
<text fill="#999" font-size="12" x="10" y="94">D(X) = 1/λ²</text>
<text fill="#FFE066" font-size="11" x="10" y="112">应用：寿命分析</text>
</g>
<g transform="translate(310,220)">
<!-- 正态分布 -->
<rect fill="rgba(147,112,219,0.15)" stroke="#9370DB" stroke-width="2" width="240" height="120" x="0" y="0"></rect>
<text fill="#9370DB" font-size="14" font-weight="bold" x="10" y="20">正态分布 N(μ,σ²)</text>
<text fill="#999" font-size="12" x="10" y="40">最重要的连续分布</text>
<text fill="#999" font-size="12" x="10" y="58">f(x) = (1/√(2πσ²))e^(-(x-μ)²/(2σ²))</text>
<text fill="#999" font-size="12" x="10" y="76">E(X) = μ</text>
<text fill="#999" font-size="12" x="10" y="94">D(X) = σ²</text>
<text fill="#FFE066" font-size="11" x="10" y="112">应用：几乎所有领域</text>
</g>
</g>
</svg>
</div>
</div>
</div>

<!-- 第10页：中心极限定理回顾 -->
<div class="page" id="page10">
<div class="left-panel">
<h1 class="title chalk-text">中心极限定理</h1>
<div class="board-content">
<p class="chalk-text emphasis">定理内容</p>
<p class="chalk-text">设 $X_1, X_2, \ldots, X_n$ 独立同分布</p>
<p class="chalk-text">$E(X_i) = \mu, D(X_i) = \sigma^2$</p>
<div class="formula-box">
<p class="chalk-text">$$\frac{\sum_{i=1}^n X_i - n\mu}{\sigma\sqrt{n}} \xrightarrow{d} N(0,1)$$</p>
</div>
<p class="chalk-text emphasis">意义</p>
<ul class="chalk-list">
<li class="chalk-text">解释了正态分布的普遍性</li>
<li class="chalk-text">统计推断的理论基础</li>
<li class="chalk-text">大样本近似的依据</li>
</ul>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewBox="0 0 700 600">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="350" y="40">中心极限定理示意</text>
<g transform="translate(100,80)">
<!-- 原始分布（均匀分布） -->
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="200" height="100" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="13" font-weight="bold" text-anchor="middle" x="100" y="20">原始分布</text>
<rect fill="rgba(78,205,196,0.3)" width="160" height="50" x="20" y="35"></rect>
<text fill="#999" font-size="11" text-anchor="middle" x="100" y="95">均匀分布 U(0,1)</text>
</g>
<g transform="translate(350,80)">
<!-- 样本均值分布（n=5） -->
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="200" height="100" x="0" y="0"></rect>
<text fill="#FFE066" font-size="13" font-weight="bold" text-anchor="middle" x="100" y="20">n=5 均值分布</text>
<path d="M 20 85 L 50 65 L 80 45 L 110 35 L 140 45 L 170 65 L 180 85" fill="rgba(255,224,102,0.3)" stroke="#FFE066" stroke-width="2"></path>
<text fill="#999" font-size="11" text-anchor="middle" x="100" y="95">开始接近正态</text>
</g>
<g transform="translate(100,220)">
<!-- 样本均值分布（n=10） -->
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="200" height="100" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="13" font-weight="bold" text-anchor="middle" x="100" y="20">n=10 均值分布</text>
<path d="M 20 85 Q 60 60, 100 30 T 180 85" fill="rgba(255,107,107,0.3)" stroke="#FF6B6B" stroke-width="2"></path>
<text fill="#999" font-size="11" text-anchor="middle" x="100" y="95">更接近正态</text>
</g>
<g transform="translate(350,220)">
<!-- 样本均值分布（n=30） -->
<rect fill="rgba(147,112,219,0.15)" stroke="#9370DB" stroke-width="2" width="200" height="100" x="0" y="0"></rect>
<text fill="#9370DB" font-size="13" font-weight="bold" text-anchor="middle" x="100" y="20">n=30 均值分布</text>
<path d="M 20 85 Q 60 55, 100 25 T 180 85" fill="rgba(147,112,219,0.3)" stroke="#9370DB" stroke-width="2"></path>
<text fill="#999" font-size="11" text-anchor="middle" x="100" y="95">近似正态分布</text>
</g>
<g transform="translate(100,360)">
<rect fill="rgba(225,190,231,0.15)" stroke="#e1bee7" stroke-width="2" width="450" height="80" x="0" y="0"></rect>
<text fill="#e1bee7" font-size="14" font-weight="bold" x="10" y="20">结论</text>
<text fill="#999" font-size="13" x="10" y="40">样本量越大，样本均值的分布越接近正态分布</text>
<text fill="#999" font-size="12" x="10" y="60">通常 n ≥ 30 时，正态近似效果较好</text>
<text fill="#FFE066" font-size="12" x="10" y="75">这就是为什么正态分布在自然界如此普遍！</text>
</g>
</g>
</svg>
</div>
</div>
</div>

<!-- 第11页：3σ规则应用 -->
<div class="page" id="page11">
<div class="left-panel">
<h1 class="title chalk-text">3σ规则的应用</h1>
<div class="board-content">
<p class="chalk-text emphasis">规则内容</p>
<p class="chalk-text">对于正态分布 $N(\mu, \sigma^2)$：</p>
<ul class="chalk-list">
<li class="chalk-text">$P(|X-\mu| < \sigma) \approx 0.683$</li>
<li class="chalk-text">$P(|X-\mu| < 2\sigma) \approx 0.954$</li>
<li class="chalk-text">$P(|X-\mu| < 3\sigma) \approx 0.997$</li>
</ul>
<p class="chalk-text emphasis">实际应用</p>
<ul class="chalk-list">
<li class="chalk-text">质量控制：设定控制上下限</li>
<li class="chalk-text">异常检测：超出3σ视为异常</li>
<li class="chalk-text">风险管理：评估极端情况</li>
</ul>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewBox="0 0 700 600">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="350" y="40">3σ规则可视化</text>
<g transform="translate(100,100)">
<!-- 坐标轴 -->
<line stroke="#999" stroke-width="2" x1="50" x2="500" y1="300" y2="300"></line>
<!-- 正态曲线 -->
<path d="M 50 295 Q 130 260, 200 180 T 275 100 T 350 180 T 420 260 T 500 295" fill="none" stroke="#4ECDC4" stroke-width="3">
<animate attributeName="stroke-opacity" dur="3s" repeatCount="indefinite" values="0.5;1;0.5"></animate>
</path>
<!-- μ 标记 -->
<line stroke="#FFE066" stroke-dasharray="5,5" stroke-width="2" x1="275" x2="275" y1="300" y2="100"></line>
<text fill="#FFE066" font-size="14" text-anchor="middle" x="275" y="330">μ</text>
<!-- ±σ 区域 -->
<rect fill="rgba(78,205,196,0.2)" height="200" width="120" x="215" y="100">
<animate attributeName="fill-opacity" dur="3s" repeatCount="indefinite" values="0.1;0.3;0.1"></animate>
</rect>
<line stroke="#4ECDC4" stroke-width="2" x1="215" x2="215" y1="290" y2="310"></line>
<line stroke="#4ECDC4" stroke-width="2" x1="335" x2="335" y1="290" y2="310"></line>
<text fill="#4ECDC4" font-size="12" text-anchor="middle" x="195" y="330">μ-σ</text>
<text fill="#4ECDC4" font-size="12" text-anchor="middle" x="355" y="330">μ+σ</text>
<text fill="#4ECDC4" font-size="13" font-weight="bold" text-anchor="middle" x="275" y="250">68.3%</text>
<!-- ±2σ 区域 -->
<rect fill="rgba(255,224,102,0.15)" height="200" width="60" x="155" y="100"></rect>
<rect fill="rgba(255,224,102,0.15)" height="200" width="60" x="335" y="100"></rect>
<line stroke="#FFE066" stroke-width="2" x1="155" x2="155" y1="290" y2="310"></line>
<line stroke="#FFE066" stroke-width="2" x1="395" x2="395" y1="290" y2="310"></line>
<text fill="#FFE066" font-size="11" text-anchor="middle" x="125" y="330">μ-2σ</text>
<text fill="#FFE066" font-size="11" text-anchor="middle" x="425" y="330">μ+2σ</text>
<text fill="#FFE066" font-size="12" font-weight="bold" text-anchor="middle" x="185" y="200">13.6%</text>
<text fill="#FFE066" font-size="12" font-weight="bold" text-anchor="middle" x="365" y="200">13.6%</text>
<!-- ±3σ 区域 -->
<line stroke="#FF6B6B" stroke-width="2" x1="95" x2="95" y1="290" y2="310"></line>
<line stroke="#FF6B6B" stroke-width="2" x1="455" x2="455" y1="290" y2="310"></line>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="65" y="330">μ-3σ</text>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="485" y="330">μ+3σ</text>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="75" y="150">2.1%</text>
<text fill="#FF6B6B" font-size="11" text-anchor="middle" x="475" y="150">2.1%</text>
<!-- 总结框 -->
<rect fill="rgba(255,255,255,0.05)" height="60" rx="5" stroke="#e1bee7" stroke-width="2" width="450" x="50" y="360"></rect>
<text fill="#e1bee7" font-size="13" text-anchor="middle" x="275" y="385">99.7% 的数据落在 [μ-3σ, μ+3σ] 区间内</text>
<text fill="#999" font-size="11" text-anchor="middle" x="275" y="405">超出此范围的数据可视为异常值</text>
</g>
</svg>
</div>
</div>
</div>

<!-- 第12页：贝叶斯公式应用 -->
<div class="page" id="page12">
<div class="left-panel">
<h1 class="title chalk-text">贝叶斯公式应用</h1>
<div class="board-content">
<p class="chalk-text emphasis">公式</p>
<div class="formula-box">
<p class="chalk-text">$$P(B_i|A) = \frac{P(B_i)P(A|B_i)}{\sum_{j=1}^n P(B_j)P(A|B_j)}$$</p>
</div>
<p class="chalk-text emphasis">医学诊断示例</p>
<ul class="chalk-list">
<li class="chalk-text">患病率：1%</li>
<li class="chalk-text">灵敏度：95%（患病且阳性）</li>
<li class="chalk-text">特异度：90%（未患病且阴性）</li>
<li class="chalk-text">问：阳性时真患病概率？</li>
</ul>
<p class="chalk-text">答案：约 8.7%</p>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewBox="0 0 700 600">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="350" y="40">贝叶斯推理过程</text>
<g transform="translate(100,80)">
<!-- 先验概率 -->
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="200" height="80" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" text-anchor="middle" x="100" y="25">先验概率</text>
<text fill="#999" font-size="13" text-anchor="middle" x="100" y="45">P(患病) = 0.01</text>
<text fill="#999" font-size="13" text-anchor="middle" x="100" y="65">P(未患病) = 0.99</text>
<!-- 似然 -->
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="200" height="80" x="0" y="120"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" text-anchor="middle" x="100" y="145">似然</text>
<text fill="#999" font-size="13" text-anchor="middle" x="100" y="165">P(阳性|患病) = 0.95</text>
<text fill="#999" font-size="13" text-anchor="middle" x="100" y="185">P(阳性|未患病) = 0.10</text>
<!-- 箭头 -->
<path d="M 200 100 L 250 140" fill="none" stroke="#9370DB" stroke-width="2" marker-end="url(#arrow-bayes)"></path>
<defs>
<marker id="arrow-bayes" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
<polygon points="0 0, 10 3, 0 6" fill="#9370DB"></polygon>
</marker>
</defs>
<!-- 后验概率 -->
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="200" height="120" x="270" y="60"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" text-anchor="middle" x="370" y="85">后验概率</text>
<text fill="#999" font-size="12" text-anchor="middle" x="370" y="105">分子：0.01 × 0.95</text>
<text fill="#999" font-size="12" text-anchor="middle" x="370" y="122">= 0.0095</text>
<text fill="#999" font-size="12" text-anchor="middle" x="370" y="142">分母：0.0095 + 0.099</text>
<text fill="#999" font-size="12" text-anchor="middle" x="370" y="159">= 0.1085</text>
<text fill="#FFE066" font-size="13" font-weight="bold" text-anchor="middle" x="370" y="175">结果：≈ 8.7%</text>
<!-- 解释框 -->
<rect fill="rgba(225,190,231,0.15)" stroke="#e1bee7" stroke-width="2" width="470" height="120" x="0" y="240"></rect>
<text fill="#e1bee7" font-size="14" font-weight="bold" x="10" y="265">关键理解</text>
<text fill="#999" font-size="13" x="10" y="285">虽然检测结果是阳性，但由于：</text>
<text fill="#999" font-size="12" x="20" y="305">① 患病率很低（1%）</text>
<text fill="#999" font-size="12" x="20" y="323">② 假阳性率较高（10%）</text>
<text fill="#999" font-size="12" x="10" y="343">所以真正患病的概率只有约 8.7%</text>
<!-- 可视化条形图 -->
<g transform="translate(0,380)">
<rect fill="rgba(255,107,107,0.3)" height="20" width="40" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="11" x="45" y="15">真阳性：0.95%</text>
<rect fill="rgba(78,205,196,0.3)" height="20" width="400" x="0" y="30"></rect>
<text fill="#4ECDC4" font-size="11" x="405" y="45">假阳性：9.9%</text>
<text fill="#FFE066" font-size="11" x="0" y="70">0.95 / (0.95 + 9.9) ≈ 8.7%</text>
</g>
</g>
</svg>
</div>
</div>
</div>

<!-- 第13页：大数定律 -->
<div class="page" id="page13">
<div class="left-panel">
<h1 class="title chalk-text">大数定律</h1>
<div class="board-content">
<p class="chalk-text emphasis">定理内容</p>
<p class="chalk-text">设 $X_1, X_2, \ldots, X_n$ 独立同分布</p>
<p class="chalk-text">$E(X_i) = \mu$</p>
<div class="formula-box">
<p class="chalk-text">$$\lim_{n\to\infty} P\left(\left|\frac{1}{n}\sum_{i=1}^n X_i - \mu\right| < \epsilon\right) = 1$$</p>
</div>
<p class="chalk-text emphasis">意义</p>
<ul class="chalk-list">
<li class="chalk-text">样本均值依概率收敛到总体均值</li>
<li class="chalk-text">频率稳定于概率</li>
<li class="chalk-text">大样本统计的理论基础</li>
</ul>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewBox="0 0 700 600">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="350" y="40">大数定律示意</text>
<g transform="translate(100,80)">
<!-- 坐标系 -->
<line stroke="#999" stroke-width="2" x1="50" x2="500" y1="300" y2="300"></line>
<line stroke="#999" stroke-width="2" x1="50" x2="50" y1="300" y2="100"></line>
<text fill="#999" font-size="12" x="510" y="305">样本量 n</text>
<text fill="#999" font-size="12" x="30" y="95">均值</text>
<!-- 真实均值线 -->
<line stroke="#FFE066" stroke-dasharray="5,5" stroke-width="3" x1="50" x2="500" y1="200" y2="200">
<animate attributeName="stroke-opacity" dur="2s" repeatCount="indefinite" values="0.5;1;0.5"></animate>
</line>
<text fill="#FFE066" font-size="13" x="510" y="205">μ (真实均值)</text>
<!-- 样本均值收敛曲线 -->
<path d="M 50 250 L 100 220 L 150 210 L 200 205 L 250 202 L 300 201 L 350 200.5 L 400 200.2 L 450 200.1 L 500 200" fill="none" stroke="#4ECDC4" stroke-width="3">
<animate attributeName="stroke-opacity" dur="3s" repeatCount="indefinite" values="0.5;1;0.5"></animate>
</path>
<!-- 置信区间 -->
<path d="M 50 180 L 100 185 L 150 188 L 200 190 L 250 192 L 300 194 L 350 196 L 400 198 L 450 199 L 500 200" fill="none" stroke="#FF6B6B" stroke-dasharray="3,3" stroke-width="2" opacity="0.5"></path>
<path d="M 50 220 L 100 215 L 150 212 L 200 210 L 250 208 L 300 206 L 350 204 L 400 202 L 450 201 L 500 200" fill="none" stroke="#FF6B6B" stroke-dasharray="3,3" stroke-width="2" opacity="0.5"></path>
<text fill="#FF6B6B" font-size="11" x="510" y="190">μ + ε</text>
<text fill="#FF6B6B" font-size="11" x="510" y="220">μ - ε</text>
<!-- 波动区域填充 -->
<path d="M 50 180 L 100 185 L 150 188 L 200 190 L 250 192 L 300 194 L 350 196 L 400 198 L 450 199 L 500 200 L 500 200 L 450 201 L 400 202 L 350 204 L 300 206 L 250 208 L 200 210 L 150 212 L 100 215 L 50 220 Z" fill="rgba(255,107,107,0.15)" stroke="none">
<animate attributeName="fill-opacity" dur="3s" repeatCount="indefinite" values="0.1;0.2;0.1"></animate>
</path>
<!-- 标注点 -->
<circle cx="100" cy="220" fill="#4ECDC4" r="4">
<animate attributeName="r" dur="2s" repeatCount="indefinite" values="4;6;4"></animate>
</circle>
<text fill="#4ECDC4" font-size="10" text-anchor="middle" x="100" y="240">n=10</text>
<circle cx="250" cy="202" fill="#4ECDC4" r="4">
<animate attributeName="r" begin="0.5s" dur="2s" repeatCount="indefinite" values="4;6;4"></animate>
</circle>
<text fill="#4ECDC4" font-size="10" text-anchor="middle" x="250" y="188">n=100</text>
<circle cx="500" cy="200" fill="#4ECDC4" r="4">
<animate attributeName="r" begin="1s" dur="2s" repeatCount="indefinite" values="4;6;4"></animate>
</circle>
<text fill="#4ECDC4" font-size="10" text-anchor="middle" x="500" y="186">n→∞</text>
<!-- 说明框 -->
<rect fill="rgba(225,190,231,0.15)" stroke="#e1bee7" stroke-width="2" width="450" height="80" x="50" y="330"></rect>
<text fill="#e1bee7" font-size="14" font-weight="bold" x="60" y="355">大数定律的意义</text>
<text fill="#999" font-size="13" x="60" y="375">随着样本量增大，样本均值越来越接近总体均值</text>
<text fill="#999" font-size="12" x="60" y="393">波动范围越来越小，最终收敛到真实值</text>
<text fill="#FFE066" font-size="12" x="60" y="408">这是统计推断和抽样调查的理论基础</text>
</g>
</svg>
</div>
</div>
</div>

<!-- 第14页：学习方法总结 -->
<div class="page" id="page14">
<div class="left-panel">
<h1 class="title chalk-text">学习方法总结</h1>
<div class="board-content">
<p class="chalk-text emphasis">1. 理解概念，不死记公式</p>
<p class="chalk-text">理解概率的直观含义，从几何、物理意义理解公式</p>
<p class="chalk-text emphasis">2. 多做练习，培养直觉</p>
<p class="chalk-text">通过大量例题建立概率直觉，从简单到复杂</p>
<p class="chalk-text emphasis">3. 联系实际，看到应用</p>
<p class="chalk-text">关注概率统计在工程中的应用</p>
<p class="chalk-text emphasis">4. 使用软件，提高效率</p>
<p class="chalk-text">掌握Python/R等统计软件</p>
</div>
</div>
<div class="right-panel">
<div class="animation-container">
<svg class="svg-animation" viewBox="0 0 700 600">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="350" y="40">概率统计学习方法</text>
<g transform="translate(100,80)">
<g transform="translate(0,0)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">① 理解概念，不死记公式</text>
<text fill="#999" font-size="13" x="10" y="45">理解概率的直观含义</text>
<text fill="#999" font-size="12" x="10" y="65">从几何、物理意义理解公式</text>
</g>
<g transform="translate(0,100)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">② 多做练习，培养直觉</text>
<text fill="#999" font-size="13" x="10" y="45">通过大量例题建立概率直觉</text>
<text fill="#999" font-size="12" x="10" y="65">从简单到复杂，循序渐进</text>
</g>
<g transform="translate(0,200)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">③ 联系实际，看到应用</text>
<text fill="#999" font-size="13" x="10" y="45">关注概率统计在工程中的应用</text>
<text fill="#999" font-size="12" x="10" y="65">质量控制、可靠性、数据分析</text>
</g>
<g transform="translate(0,300)">
<rect fill="rgba(147,112,219,0.15)" stroke="#9370DB" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#9370DB" font-size="14" font-weight="bold" x="10" y="20">④ 使用软件，提高效率</text>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">控制图（Control Chart）</text>
<line x1="20" y1="70" x2="480" y2="70" stroke="#999" stroke-width="2"></line>
<line x1="20" y1="50" x2="480" y2="50" stroke="#FF6B6B" stroke-width="1" stroke-dasharray="5,5"></line>
<text fill="#FF6B6B" font-size="11" x="485" y="53">UCL (μ+3σ)</text>
<line x1="20" y1="90" x2="480" y2="90" stroke="#FF6B6B" stroke-width="1" stroke-dasharray="5,5"></line>
<text fill="#FF6B6B" font-size="11" x="485" y="93">LCL (μ-3σ)</text>
<text fill="#999" font-size="11" x="485" y="73">中心线μ</text>
<circle cx="80" cy="68" r="3" fill="#4ECDC4"></circle>
<circle cx="140" cy="72" r="3" fill="#4ECDC4"></circle>
<circle cx="200" cy="65" r="3" fill="#4ECDC4"></circle>
<circle cx="260" cy="70" r="3" fill="#4ECDC4"></circle>
<circle cx="320" cy="75" r="3" fill="#4ECDC4"></circle>
<circle cx="380" cy="67" r="3" fill="#4ECDC4"></circle>
<circle cx="440" cy="71" r="3" fill="#4ECDC4"></circle>
</g>
<g transform="translate(0,150)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="90" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">合格率计算</text>
<text fill="#999" font-size="13" x="10" y="45">假设产品尺寸 X ~ N(μ, σ²)</text>
<text fill="#999" font-size="13" x="10" y="65">规格上下限：[μ-3σ, μ+3σ]</text>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="85">合格率 ≈ 99.73% (3σ原则)</text>
</g>
<g transform="translate(0,260)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="90" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">应用场景</text>
<text fill="#999" font-size="13" x="10" y="45">• 生产过程监控：及时发现异常</text>
<text fill="#999" font-size="13" x="10" y="65">• 质量改进：减小方差σ</text>
<text fill="#999" font-size="12" x="10" y="82">• 六西格玛管理：追求更高质量</text>
</g>
</g>
</svg></div></div></div>

<div class="page" id="page8"><div class="left-panel"><h1 class="title chalk-text">应用2：可靠性分析</h1><div class="board-content"><p class="chalk-text">产品寿命分布</p><p class="chalk-text">故障率计算</p><p class="chalk-text">维修策略优化</p></div></div><div class="right-panel"><div class="animation-container"><svg class="svg-animation" viewBox="0 0 700 600">
<g transform="translate(100,80)">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="250" y="-10">应用2：可靠性分析</text>
<g transform="translate(0,30)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">产品寿命分布</text>
<defs>
<marker id="arrow-reliability" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
<polygon points="0 0, 10 3, 0 6" fill="#666"></polygon>
</marker>
</defs>
<line x1="20" y1="80" x2="480" y2="80" stroke="#666" stroke-width="2" marker-end="url(#arrow-reliability)"></line>
<text fill="#999" font-size="12" x="485" y="85">时间t</text>
<path d="M 20 80 L 100 75 L 200 60 L 300 40 L 400 25 L 480 15" stroke="#4ECDC4" stroke-width="3" fill="none"></path>
<text fill="#4ECDC4" font-size="13" x="400" y="10">可靠度R(t)</text>
</g>
<g transform="translate(0,150)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="90" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">故障率与MTBF</text>
<text fill="#999" font-size="13" x="10" y="45">故障率 λ(t)：单位时间内故障概率</text>
<text fill="#999" font-size="13" x="10" y="65">MTBF（平均无故障时间）：期望寿命</text>
<text fill="#999" font-size="12" x="10" y="82">指数分布：R(t) = e^(-λt), MTBF = 1/λ</text>
</g>
<g transform="translate(0,260)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="90" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">维修策略</text>
<text fill="#999" font-size="13" x="10" y="45">• 预防性维修：在故障前维修</text>
<text fill="#999" font-size="13" x="10" y="65">• 备件库存优化：基于故障概率</text>
<text fill="#999" font-size="12" x="10" y="82">• 系统可靠性：串联、并联系统分析</text>
</g>
</g>
</svg></div></div></div>

<div class="page" id="page9"><div class="left-panel"><h1 class="title chalk-text">应用3：风险评估</h1><div class="board-content"><p class="chalk-text">金融风险：VaR计算</p><p class="chalk-text">保险精算</p><p class="chalk-text">投资组合优化</p></div></div><div class="right-panel"><div class="animation-container"><svg class="svg-animation" viewBox="0 0 700 600">
<g transform="translate(100,80)">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="250" y="-10">应用3：金融风险评估</text>
<g transform="translate(0,30)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">VaR（风险价值）</text>
<text fill="#999" font-size="13" x="10" y="45">在给定置信水平下，最大可能损失</text>
<text fill="#999" font-size="13" x="10" y="65">例：95%置信水平，VaR = μ - 1.65σ</text>
<text fill="#999" font-size="12" x="10" y="82">表示：有95%把握损失不超过VaR</text>
</g>
<g transform="translate(0,150)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="90" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">保险精算</text>
<text fill="#999" font-size="13" x="10" y="45">• 保费定价：基于损失概率分布</text>
<text fill="#999" font-size="13" x="10" y="65">• 准备金计算：覆盖未来赔付</text>
<text fill="#999" font-size="12" x="10" y="82">• 破产概率：资本充足率评估</text>
</g>
<g transform="translate(0,260)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="90" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">投资组合优化</text>
<text fill="#999" font-size="13" x="10" y="45">• 马科维茨模型：期望-方差优化</text>
<text fill="#999" font-size="13" x="10" y="65">• 分散化：降低组合方差</text>
<text fill="#999" font-size="12" x="10" y="82">• 夏普比率：收益/风险比</text>
</g>
</g>
</svg></div></div></div>

<div class="page" id="page10"><div class="left-panel"><h1 class="title chalk-text">应用4：A/B测试</h1><div class="board-content"><p class="chalk-text">网站优化：转化率比较</p><p class="chalk-text">假设检验判断显著性</p><p class="chalk-text">样本量确定</p></div></div><div class="right-panel"><div class="animation-container"><svg class="svg-animation" viewBox="0 0 700 600">
<g transform="translate(100,80)">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="250" y="-10">应用4：A/B测试</text>
<g transform="translate(0,30)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="110" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">A/B测试流程</text>
<rect fill="rgba(78,205,196,0.3)" stroke="#4ECDC4" stroke-width="2" width="220" height="60" x="10" y="35"></rect>
<text fill="#4ECDC4" font-size="13" text-anchor="middle" x="120" y="55">版本A</text>
<text fill="#999" font-size="12" text-anchor="middle" x="120" y="75">转化率 p_A = 10%</text>
<rect fill="rgba(255,224,102,0.3)" stroke="#FFE066" stroke-width="2" width="220" height="60" x="270" y="35"></rect>
<text fill="#FFE066" font-size="13" text-anchor="middle" x="380" y="55">版本B</text>
<text fill="#999" font-size="12" text-anchor="middle" x="380" y="75">转化率 p_B = 12%</text>
</g>
<g transform="translate(0,160)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">假设检验</text>
<text fill="#999" font-size="13" x="10" y="45">H₀：p_A = p_B（无差异）</text>
<text fill="#999" font-size="13" x="10" y="65">H₁：p_A ≠ p_B（有差异）</text>
<text fill="#999" font-size="12" x="10" y="82">计算Z统计量，查表判断显著性</text>
</g>
<g transform="translate(0,280)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">样本量确定</text>
<text fill="#999" font-size="13" x="10" y="45">根据期望检测的最小差异和显著性水平</text>
<text fill="#999" font-size="12" x="10" y="65">计算所需样本量，确保统计功效</text>
</g>
</g>
</svg></div></div></div>

<div class="page" id="page11"><div class="left-panel"><h1 class="title chalk-text">应用5：机器学习</h1><div class="board-content"><p class="chalk-text">朴素贝叶斯分类器</p><p class="chalk-text">高斯混合模型</p><p class="chalk-text">概率图模型</p></div></div><div class="right-panel"><div class="animation-container"><svg class="svg-animation" viewBox="0 0 700 600">
<g transform="translate(100,80)">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="250" y="-10">应用5：机器学习中的概率</text>
<g transform="translate(0,30)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">朴素贝叶斯分类器</text>
<text fill="#999" font-size="13" x="10" y="45">基于贝叶斯公式的分类算法</text>
<text fill="#999" font-size="13" x="10" y="65">P(类别|特征) ∝ P(类别) · P(特征|类别)</text>
<text fill="#999" font-size="12" x="10" y="82">应用：垃圾邮件过滤、文本分类</text>
</g>
<g transform="translate(0,150)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">高斯混合模型（GMM）</text>
<text fill="#999" font-size="13" x="10" y="45">多个正态分布的加权组合</text>
<text fill="#999" font-size="13" x="10" y="65">p(x) = Σ w_k · N(x|μ_k, σ_k²)</text>
<text fill="#999" font-size="12" x="10" y="82">应用：聚类分析、密度估计</text>
</g>
<g transform="translate(0,270)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="100" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">概率图模型</text>
<text fill="#999" font-size="13" x="10" y="45">用图结构表示变量间的概率关系</text>
<text fill="#999" font-size="13" x="10" y="65">贝叶斯网络、马尔可夫随机场</text>
<text fill="#999" font-size="12" x="10" y="82">应用：推荐系统、因果推断</text>
</g>
</g>
</svg></div></div></div>

<div class="page" id="page12"><div class="left-panel"><h1 class="title chalk-text">概率统计软件工具</h1><div class="board-content"><p class="chalk-text">• Python：NumPy, SciPy, Pandas</p><p class="chalk-text">• R语言：统计分析专用</p><p class="chalk-text">• MATLAB：工程计算</p><p class="chalk-text">• Excel：基础统计</p></div></div><div class="right-panel"><div class="animation-container"><svg class="svg-animation" viewBox="0 0 700 600">
<g transform="translate(100,80)">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="250" y="-10">概率统计软件工具</text>
<g transform="translate(0,30)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">① Python生态</text>
<text fill="#999" font-size="13" x="10" y="45">NumPy：数值计算、随机数生成</text>
<text fill="#999" font-size="12" x="10" y="62">SciPy：统计函数、分布、检验</text>
<text fill="#999" font-size="12" x="10" y="77">Pandas：数据分析、描述统计</text>
</g>
<g transform="translate(0,130)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">② R语言</text>
<text fill="#999" font-size="13" x="10" y="45">统计分析专用语言</text>
<text fill="#999" font-size="12" x="10" y="62">丰富的统计包：ggplot2, dplyr, tidyr</text>
<text fill="#999" font-size="12" x="10" y="77">适合学术研究和数据分析</text>
</g>
<g transform="translate(0,230)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">③ MATLAB</text>
<text fill="#999" font-size="13" x="10" y="45">工程计算和科学计算</text>
<text fill="#999" font-size="12" x="10" y="62">Statistics Toolbox：统计分析工具箱</text>
<text fill="#999" font-size="12" x="10" y="77">适合工程应用和算法开发</text>
</g>
<g transform="translate(0,330)">
<rect fill="rgba(147,112,219,0.15)" stroke="#9370DB" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#9370DB" font-size="14" font-weight="bold" x="10" y="20">④ Excel</text>
<text fill="#999" font-size="13" x="10" y="45">基础统计分析和可视化</text>
<text fill="#999" font-size="12" x="10" y="62">数据分析工具包、数据透视表</text>
<text fill="#999" font-size="12" x="10" y="77">适合日常数据处理和报表</text>
</g>
</g>
</svg></div></div></div>

<div class="page" id="page13"><div class="left-panel"><h1 class="title chalk-text">数据科学中的概率统计</h1><div class="board-content"><p class="chalk-text">• 数据清洗：异常值检测</p><p class="chalk-text">• 特征工程：分布变换</p><p class="chalk-text">• 模型评估：置信区间</p><p class="chalk-text">• 因果推断：贝叶斯网络</p></div></div><div class="right-panel"><div class="animation-container"><svg class="svg-animation" viewBox="0 0 700 600">
<g transform="translate(100,80)">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="250" y="-10">数据科学中的概率统计</text>
<g transform="translate(0,30)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">① 数据清洗：异常值检测</text>
<text fill="#999" font-size="13" x="10" y="45">用3σ原则识别异常值</text>
<text fill="#999" font-size="12" x="10" y="65">|x-μ| > 3σ 的数据点可能是异常值</text>
</g>
<g transform="translate(0,130)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">② 特征工程：分布变换</text>
<text fill="#999" font-size="13" x="10" y="45">对数变换、Box-Cox变换</text>
<text fill="#999" font-size="12" x="10" y="65">将偏态分布转换为近似正态分布</text>
</g>
<g transform="translate(0,230)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">③ 模型评估：置信区间</text>
<text fill="#999" font-size="13" x="10" y="45">模型性能的不确定性量化</text>
<text fill="#999" font-size="12" x="10" y="65">交叉验证 + 置信区间估计</text>
</g>
<g transform="translate(0,330)">
<rect fill="rgba(147,112,219,0.15)" stroke="#9370DB" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#9370DB" font-size="14" font-weight="bold" x="10" y="20">④ 因果推断：贝叶斯网络</text>
<text fill="#999" font-size="13" x="10" y="45">从观察数据推断因果关系</text>
<text fill="#999" font-size="12" x="10" y="65">A/B测试、倾向得分匹配</text>
</g>
</g>
</svg></div></div></div>

<div class="page" id="page14"><div class="left-panel"><h1 class="title chalk-text">学习方法总结</h1><div class="board-content"><p class="chalk-text">1. 理解概念，不死记公式</p><p class="chalk-text">2. 多做练习，培养直觉</p><p class="chalk-text">3. 联系实际，看到应用</p><p class="chalk-text">4. 使用软件，提高效率</p></div></div><div class="right-panel"><div class="animation-container"><svg class="svg-animation" viewBox="0 0 700 600">
<g transform="translate(100,80)">
<text fill="#FFE066" font-size="16" text-anchor="middle" x="250" y="-10">概率统计学习方法总结</text>
<g transform="translate(0,30)">
<rect fill="rgba(78,205,196,0.15)" stroke="#4ECDC4" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#4ECDC4" font-size="14" font-weight="bold" x="10" y="20">① 理解概念，不死记公式</text>
<text fill="#999" font-size="13" x="10" y="45">理解概率的直观含义</text>
<text fill="#999" font-size="12" x="10" y="65">从几何、物理意义理解公式</text>
</g>
<g transform="translate(0,130)">
<rect fill="rgba(255,224,102,0.15)" stroke="#FFE066" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#FFE066" font-size="14" font-weight="bold" x="10" y="20">② 多做练习，培养直觉</text>
<text fill="#999" font-size="13" x="10" y="45">通过大量例题建立概率直觉</text>
<text fill="#999" font-size="12" x="10" y="65">从简单到复杂，循序渐进</text>
</g>
<g transform="translate(0,230)">
<rect fill="rgba(255,107,107,0.15)" stroke="#FF6B6B" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#FF6B6B" font-size="14" font-weight="bold" x="10" y="20">③ 联系实际，看到应用</text>
<text fill="#999" font-size="13" x="10" y="45">关注概率统计在工程中的应用</text>
<text fill="#999" font-size="12" x="10" y="65">质量控制、可靠性、数据分析</text>
</g>
<g transform="translate(0,330)">
<rect fill="rgba(147,112,219,0.15)" stroke="#9370DB" stroke-width="2" width="500" height="80" x="0" y="0"></rect>
<text fill="#9370DB" font-size="14" font-weight="bold" x="10" y="20">④ 使用软件，提高效率</text>
<text fill="#999" font-size="13" x="10" y="45">掌握Python/R等统计软件</text>
<text fill="#999" font-size="12" x="10" y="65">从计算中解放，专注于理解和应用</text>
</g>
</g>
</svg></div></div></div>

<div class="page" id="page15"><div class="left-panel"><h1 class="title chalk-text">恭喜完成高等数学学习！</h1><div class="board-content"><p class="chalk-text emphasis">第13章总结</p><p class="chalk-text">✓ 概率的基本概念</p><p class="chalk-text">✓ 随机变量与分布</p><p class="chalk-text">✓ 正态分布与中心极限定理</p><p class="chalk-text emphasis">🎉 全部课程完成</p><p class="chalk-text">继续探索数学的奥秘！</p></div></div><div class="right-panel"><div class="animation-container"><svg class="svg-animation" viewBox="0 0 700 600"><circle cx="350" cy="250" fill="rgba(255,224,102,0.3)" r="110" stroke="#FFE066" stroke-width="4"><animate attributeName="r" dur="3s" repeatCount="indefinite" values="110;120;110"></animate></circle><text fill="#FFE066" font-size="20" font-weight="bold" text-anchor="middle" x="350" y="240">🎓</text><text fill="#FFE066" font-size="18" font-weight="bold" text-anchor="middle" x="350" y="270">课程完成</text><text fill="#4ECDC4" font-size="14" text-anchor="middle" x="350" y="320">恭喜你！</text></svg></div></div></div>

</div>
<div class="control-bar">
<button class="btn" onclick="previousPage()">⬅️ 上一页</button>
<button class="btn primary" onclick="nextPage()">下一页 ➡️</button>
<button class="btn" onclick="startTeaching()">🎤 开始讲解</button>
<button class="btn" id="autoPlayBtn" onclick="startAutoPlay()">🎬 自动播放</button>
</div>
<div class="subtitle-area">
    <div class="subtitle-text" id="subtitleArea"></div>
</div>

<!-- 讯飞官方SDK -->
<!-- Polyfill for older browsers -->
<script src="./polyfill.min.js"></script>

<script type="module">
        // 播放完成标记（供OBS检测）
        window.playbackFinished = false;

    try {
        const { default: AvatarPlatform, SDKEvents, PlayerEvents, RecorderEvents, UserMedia } = await import('./avatar-sdk-web_3.1.2.1002/index.js');
        window.AvatarPlatform = AvatarPlatform; window.SDKEvents = SDKEvents; window.PlayerEvents = PlayerEvents; window.RecorderEvents = RecorderEvents; window.UserMedia = UserMedia;
        console.log('✅ 讯飞官方SDK模块已加载');
    } catch (error) { console.error('❌ SDK模块加载失败:', error); }
    window.dispatchEvent(new CustomEvent('sdkReady'));
</script>

<script>
        let currentPage = 1; const totalPages = 15;
        let avatarPlatform = null; let isConnected = false; let isTeaching = false; let isAutoPlaying = false;

        const subtitleScript = {
            1: `欢迎来到第十三章总结与综合应用。本章我们学习了概率的基本概念与性质、随机变量期望与方差、正态分布与中心极限定理。概率统计是研究随机现象数量规律的数学分支，在工程技术、经济管理、自然科学和社会科学中都有广泛应用。现在让我们系统回顾这些知识，并通过实际应用案例加深理解。`,
            2: `概率论的核心知识回顾。随机试验的所有可能结果组成样本空间。样本空间的子集称为事件。概率满足非负性、规范性和可列可加性三条公理。概率的基本性质包括对立事件概率、加法公式等。古典概型中概率等于有利结果数除以总结果数。条件概率和独立性是概率论的重要概念。`,
            3: `随机变量的核心知识回顾。随机变量是样本空间到实数的映射，分为离散型和连续型。离散型随机变量用分布律描述，连续型随机变量用概率密度函数描述。数学期望是随机变量的加权平均，反映中心位置。方差是偏差平方的期望，反映分散程度。期望和方差是随机变量的两个最重要的数字特征。`,
            4: `常见分布的核心知识回顾。零一分布描述两种结果的试验，期望为p，方差为p(1-p)。二项分布描述n重伯努利试验的成功次数，期望为np，方差为np(1-p)。泊松分布描述单位时间内事件发生次数，期望和方差都等于λ。正态分布是最重要的连续分布，由期望μ和方差σ²确定。`,
            5: `中心极限定理的核心知识回顾。独立同分布随机变量和的分布，当样本量足够大时，近似服从正态分布。这解释了为什么正态分布如此普遍。中心极限定理是统计推断的理论基础。二项分布当n很大时可以用正态分布近似。3σ规则说明约99.7%的数据落在μ±3σ范围内。`,
            6: `应用一：质量控制。某工厂生产零件，直径X服从正态分布N(10, 0.01)，单位是毫米。质量标准规定合格品直径在9.7到10.3毫米之间。这个范围恰好是μ±3σ。根据3σ规则，合格率约为99.7%。如果抽检发现合格率明显低于99.7%，说明生产过程出现异常，需要调整。`,
            7: `应用二：产品可靠性分析。某电子元件的寿命T服从指数分布，概率密度为f(t) = λe^(-λt)，t > 0。期望寿命为1/λ。可靠度函数R(t) = P(T > t) = e^(-λt)，表示元件工作到时刻t仍正常的概率。如果λ = 0.001每小时，则工作1000小时的可靠度约为36.8%。`,
            8: `应用三：投资风险评估。某投资项目的收益率X服从正态分布N(0.08, 0.0004)，即期望收益率8%，标准差2%。求亏损的概率，即P(X < 0)。标准化，Z = (X - 0.08)/0.02。P(X < 0) = P(Z < -4)。查表得Φ(-4) ≈ 0.00003，亏损概率极小。`,
            9: `应用四：考试成绩分析。某次考试成绩X服从正态分布N(75, 100)，即平均分75分，标准差10分。求成绩在60到90分之间的学生比例。标准化后，P(60 < X < 90) = P(-1.5 < Z < 1.5) = Φ(1.5) - Φ(-1.5) ≈ 0.8664。约86.64%的学生成绩在这个范围内。`,
            10: `应用五：抽样调查。某地区居民月收入的标准差为1000元。要估计平均月收入，误差不超过100元的概率至少为95%，需要抽取多少人？根据中心极限定理，样本均值近似服从正态分布。要求P(|X̄ - μ| < 100) ≥ 0.95。解得n ≥ 384.16，至少需要抽取385人。`,
            11: `应用六：医学诊断。某疾病的患病率为1%。诊断测试的灵敏度为95%，即患病者测试阳性的概率。特异度为90%，即未患病者测试阴性的概率。如果某人测试阳性，求他真正患病的概率。用贝叶斯公式，P(患病|阳性) = (0.95 × 0.01) / (0.95 × 0.01 + 0.1 × 0.99) ≈ 0.087，约8.7%。`,
            12: `应用七：通信系统可靠性。某通信系统由n个独立工作的部件组成，每个部件的可靠度为p。系统采用并联结构，只要有一个部件正常就能工作。系统可靠度为1 - (1-p)^n。如果p = 0.9，n = 3，则系统可靠度为1 - 0.001 = 0.999。并联提高了系统可靠性。`,
            13: `应用八：保险精算。某保险公司承保10000份保单，每份保额10万元，年保费1000元。根据历史数据，每份保单的赔付概率为0.01。求保险公司亏损的概率。总赔付X服从二项分布B(10000, 0.01)，期望为100万元，方差为99万元²。总保费1000万元。用正态近似计算P(X > 1000)，结果极小。`,
            14: `学习概率统计的方法和技巧。第一，理解概率的本质是频率的稳定值。第二，掌握随机变量的分布是关键，分布决定了所有概率性质。第三，熟记常见分布的期望和方差公式。第四，学会用标准化方法计算正态分布的概率。第五，理解中心极限定理的重要性。第六，多做应用题，培养建模能力。常见错误有混淆条件概率和联合概率、忘记检验独立性、标准化计算错误。`,
            15: `第十三章总结与展望。我们系统学习了概率的基本概念、随机变量的分布、数字特征、常见分布和中心极限定理。通过质量控制、可靠性分析、风险评估、抽样调查、医学诊断、通信系统、保险精算等应用案例，理解了概率统计在实际中的重要作用。概率统计是数据科学的基础，为统计推断、假设检验、回归分析等后续课程做好了准备。恭喜你完成了高等数学的全部学习！继续在实践中应用这些知识，不断提高解决实际问题的能力。加油！`
        };

        function updateStatus(message, type = 'normal') {
            const indicator = document.getElementById('statusIndicator');
            if (indicator) {
                indicator.textContent = message; indicator.className = 'status-indicator';
                if (type === 'connected') indicator.classList.add('connected');
                else if (type === 'error') indicator.classList.add('error');
                else if (type === 'connecting') indicator.classList.add('connecting');
            }
        }

        function updateSubtitle(text) {
            const subtitleArea = document.getElementById('subtitleArea');
            if (subtitleArea) {
                subtitleArea.textContent = text;
                // 重新触发动画
                subtitleArea.style.animation = 'none';
                setTimeout(() => {
                    subtitleArea.style.animation = 'scroll-left 25s linear infinite';
                }, 10);
            }
        }

        function waitForSDK() {
            return new Promise((resolve, reject) => {
                if (typeof AvatarPlatform !== 'undefined') { resolve(); return; }
                const timeout = setTimeout(() => reject(new Error('SDK加载超时')), 10000);
                window.addEventListener('sdkReady', function handler() {
                    clearTimeout(timeout); window.removeEventListener('sdkReady', handler); resolve();
                });
            });
        }

                function switchToPage(pageNum) { 
            if (pageNum < 1 || pageNum > totalPages) return; 
            const pages = document.querySelectorAll('.page'); 
            pages.forEach(page => { page.classList.remove('active'); }); 
            
            // 如果是第1页，显示封面页（data-page="1"）
            if (pageNum === 1) {
                const coverPage = document.querySelector('.page[data-page="1"]');
                if (coverPage) coverPage.classList.add('active');
            } else {
                // 否则显示对应的内容页（id="pageX"）
                const targetPage = document.getElementById('page' + pageNum);
                if (targetPage) targetPage.classList.add('active');
            }
            
            currentPage = pageNum; 
            document.getElementById('currentPage').textContent = pageNum; 
            if (window.MathJax && window.MathJax.typesetPromise) { window.MathJax.typesetPromise(); } 
        }
        function nextPage() { if (currentPage < totalPages) switchToPage(currentPage + 1); }
        function previousPage() { if (currentPage > 1) switchToPage(currentPage - 1); }

        async function startTeaching() {
            try {
                await waitForSDK(); updateStatus('SDK已加载', 'connecting');
                if(avatarPlatform) avatarPlatform.destroy();
                avatarPlatform = new AvatarPlatform({useInlinePlayer: true});
                avatarPlatform.on('connected', () => {isConnected = true; isTeaching = true; updateStatus('已连接', 'connected'); setTimeout(() => speakContent(currentPage), 1000);})
                    .on('disconnected', () => {isConnected = false; updateStatus('连接断开', 'error');})
                    .on('error', (error) => {updateStatus('错误', 'error'); isTeaching = false;})                    .on('frame_stop', (data) => {
                        console.log('✅ 虚拟人讲解完成 frame_stop:', data);
                        if (isAutoPlaying && currentPage < totalPages) {
                            console.log(`🎬 自动播放: 第${currentPage}页讲解完成，准备翻页到第${currentPage + 1}页`);
                            setTimeout(() => {
                                if (isAutoPlaying && currentPage < totalPages) {
                                    currentPage++;
                                    switchToPage(currentPage);
                                    setTimeout(() => {
                                        if (isAutoPlaying) {
                                            speakContent(currentPage);
                                        }
                                    }, 800);
                                }
                            }, 1500);
                        }
                    });
                avatarPlatform.setApiInfo({appId: '1af9f6ce', apiKey: 'fb9e639101a96b2e8f55ff7598947a4d', apiSecret: 'YTY3ODBiYTUwODViOWRjZjc5NWQ0YWNm', sceneId: '238962977817104384', serverUrl: 'wss://avatar.cn-huadong-1.xf-yun.com/v1/interact'});
                avatarPlatform.setGlobalParams({stream: {protocol: 'xrtc', alpha: 1, bitrate: 1000000, fps: 25}, avatar: {avatar_id: '110332017', width: 1920, height: 1080, scale: 1, move_h: 0, move_v: 0, audio_format: 1}, tts: {vcn: 'x4_yiting', speed: 50, pitch: 50, volume: 100}, avatar_dispatch: {interactive_mode: 1, content_analysis: 0}});
                await avatarPlatform.start({wrapper: document.getElementById('avatarWrapper')});
            } catch (error) { updateStatus('启动失败', 'error'); alert(`启动失败：${error.message}`); }
        }

        // 数学公式音译与字数统计
        function translateMathToSpeech(text){
            if(!text) return '';
            let r = text;
            // 向量符号
            r = r.replace(/\\vec\{([^}]+)\}/g, '$1向量');
            r = r.replace(/([a-zA-Z])⃗/g, '$1向量');
            // 点积叉积
            r = r.replace(/·/g, '点乘');
            r = r.replace(/×/g, '叉乘');
            r = r.replace(/\\cdot/g, '点乘');
            r = r.replace(/\\times/g, '乘以');
            // 积分求和极限
            r = r.replace(/\\int/g, '积分');
            r = r.replace(/\\sum/g, '求和');
            r = r.replace(/\\lim/g, '极限');
            r = r.replace(/\\sqrt\{([^}]+)\}/g, '根号$1');
            // 分数 - 智能朗读
            r = r.replace(/\\frac\{([^}]+)\}\{([^}]+)\}/g, function(match, num, den) {
                if (num.length <= 3 && den.length <= 3) return den + '分之' + num;
                return num + '除以' + den;
            });
            // 上标下标
            r = r.replace(/\^(\d+)/g, '的$1次方');
            r = r.replace(/_(\d+)/g, '下标$1');
            // 希腊字母
            r = r.replace(/\\alpha/g, '阿尔法').replace(/\\beta/g, '贝塔').replace(/\\theta/g, '西塔');
            r = r.replace(/\\lambda/g, '兰布达').replace(/\\pi/g, '派').replace(/\\sigma/g, '西格玛');
            // 三角函数
            r = r.replace(/\\sin/g, '正弦').replace(/\\cos/g, '余弦').replace(/\\tan/g, '正切');
            r = r.replace(/\\ln/g, '自然对数').replace(/\\log/g, '对数');
            // 清理符号
            r = r.replace(/\\text\{([^}]+)\}/g, '$1');
            r = r.replace(/[\\${}]/g, '');
            return r;
        }
        function getPageDuration(pageNum){
            const speech = subtitleScript[pageNum];
            if(!speech) return 6000;
            const translated = translateMathToSpeech(speech);
            const charCount = translated.length;
            const duration = Math.max(6000, charCount * 200);
            console.log(`第${pageNum}页: ${charCount}字 → ${duration}ms`);
            return duration;
        }
        async function speakContent(pageNum) {
            if (!isTeaching || !isConnected || !avatarPlatform) return;
            const raw = subtitleScript[pageNum];
            const content = translateMathToSpeech(raw);
            try { getPageDuration(pageNum); } catch (e) {}
            if (!content) return;
            try { await avatarPlatform.writeText(content, {nlp: false}); updateSubtitle(content); } catch (error) {}
        }

                async function startAutoPlay() {
            if (isAutoPlaying) {
                stopAutoPlay();
                return;
            }

            try {
                console.log('🎬 开始自动播放完整课程...');
                isAutoPlaying = true;

                const autoPlayBtn = document.getElementById('autoPlayBtn');
                autoPlayBtn.textContent = '⏹️ 停止播放';
                autoPlayBtn.style.background = 'linear-gradient(135deg, #f44336, #d32f2f)';

                updateStatus('🎬 自动播放将在 2 秒后开始，请准备录屏！', 'recording');
                await new Promise(resolve => setTimeout(resolve, 2000));

                updateStatus('🎬 自动播放开始！', 'recording');
                document.body.classList.add('recording-mode');
                console.log('📹 进入录制模式，隐藏UI元素');

                if (!isConnected) {
                    console.log('🎬 连接虚拟人...');
                    await startTeaching();
                    await new Promise(resolve => setTimeout(resolve, 2000));
                }

                currentPage = 1;
                switchToPage(1);
                await new Promise(resolve => setTimeout(resolve, 800));

                if (isConnected && isTeaching) {
                    speakContent(1);
                    console.log('🎬 自动播放已启动，翻页由虚拟人语音完成事件(frame_stop)驱动');
                } else {
                    console.error('❌ 虚拟人未连接，自动播放失败');
                    stopAutoPlay();
                }

            } catch (error) {
                console.error('❌ 自动播放失败:', error);
                stopAutoPlay();
            }
        }

        function stopAutoPlay() {
            if (isAutoPlaying) {
                isAutoPlaying = false;
                window.playbackFinished = true;
                document.title = "PLAYBACK_FINISHED";
                console.log('🎉 播放完成！已修改标题为 PLAYBACK_FINISHED'); document.body.classList.remove('recording-mode');
                const btn = document.getElementById('autoPlayBtn');
                btn.textContent = '🎬 自动播放'; btn.style.background = '';
            }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextPage(); } else if (e.key === 'ArrowLeft') { e.preventDefault(); previousPage(); } });
        let wheelTimeout; document.addEventListener('wheel', (e) => { clearTimeout(wheelTimeout); wheelTimeout = setTimeout(() => { if (e.deltaY > 0) { nextPage(); } else if (e.deltaY < 0) { previousPage(); } }, 50); }, { passive: true });
        document.addEventListener('DOMContentLoaded', () => { switchToPage(1);
            // 🚀 自动启动播放 - 延迟3秒后自动开始
            setTimeout(() => {
                console.log('🚀 自动启动播放...');
                startAutoPlay();
            }, 3000);
        });

        window.addEventListener('beforeunload', function() {
            if (isAutoPlaying) stopAutoPlay();
            if (avatarPlatform && isConnected) avatarPlatform.stop();
        });
    </script>
</body>
</html>
