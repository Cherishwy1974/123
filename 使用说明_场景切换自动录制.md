# 🎥 OBS场景切换自动录制 - 使用说明

## 📋 准备工作

### 1️⃣ 导入OBS配置文件
1. 打开 OBS Studio
2. 点击菜单：**工具 (Tools)** → **场景集合 (Scene Collection)** → **导入 (Import)**
3. 选择文件：`所有课程_分辨率已修正_已添加刷新.json`
4. 导入成功后，你会看到53个课程场景

### 2️⃣ 添加Lua脚本
1. 点击菜单：**工具 (Tools)** → **脚本 (Scripts)**
2. 点击左下角的 **"+"** 按钮
3. 选择文件：`场景切换自动录制.lua`
4. 脚本会自动加载并显示说明
5. （可选）调整"停止录制后等待时间"参数（默认3秒）

### 3️⃣ 设置音频输出
1. 右键任务栏的**音量图标** → **声音设置**
2. **输出设备** → 选择：**CABLE Input (VB-Audio Virtual Cable)**
3. 关闭设置窗口（此时你的扬声器会静音，这是正常的）

### 4️⃣ 设置OBS录制输出路径
1. 在OBS中点击：**文件** → **设置** → **输出**
2. 录制路径设置为：`D:\WPS Office\2025\254805819\WPS云盘\教材\视频讲解\录制视频`
3. 点击：**应用** 和 **确定**

---

## 🎬 开始录制

### 第一个课程
1. ✅ 在OBS场景列表中，点击第一个场景：**01_1.1_指数的概念与运算**
2. ✅ 等待浏览器源加载完成（约3秒）
3. ✅ 点击OBS右下角的 **"开始录制"** 按钮
4. ✅ 观察预览区，课程会自动开始播放
5. ✅ 等待课程播放完成（页面标题会变为 "PLAYBACK_FINISHED"）

### 后续课程（自动化）
1. ✅ 课程播放完成后，手动切换到下一个场景（例如：**01_1.2_对数的概念与运算**）
2. 🤖 **脚本自动停止当前录制**
3. 🤖 **等待3秒**
4. 🤖 **脚本自动开始新录制**
5. ✅ 浏览器源自动刷新，新课程开始播放
6. ✅ 重复步骤1-5，直到所有53个课程录制完成

---

## 📊 工作流程图

```
┌─────────────────────────────────────────────────────────┐
│  第一个课程（手动开始）                                    │
├─────────────────────────────────────────────────────────┤
│  1. 切换到场景 "01_1.1_指数的概念与运算"                   │
│  2. 手动点击 "开始录制"                                    │
│  3. 等待播放完成                                          │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  后续课程（自动化循环）                                    │
├─────────────────────────────────────────────────────────┤
│  4. 手动切换到下一个场景 "01_1.2_对数的概念与运算"          │
│     ↓                                                    │
│  5. 🤖 脚本自动停止录制                                   │
│     ↓                                                    │
│  6. 🤖 等待3秒                                           │
│     ↓                                                    │
│  7. 🤖 脚本自动开始录制                                   │
│     ↓                                                    │
│  8. 🔄 浏览器源自动刷新                                   │
│     ↓                                                    │
│  9. 等待播放完成                                          │
│     ↓                                                    │
│  10. 返回步骤4（切换到下一个场景）                         │
└─────────────────────────────────────────────────────────┘
```

---

## 💡 优点

✅ **完全手动控制**：你决定何时切换场景  
✅ **自动化录制**：不需要手动停止/开始录制  
✅ **独立文件**：每个课程生成独立的视频文件  
✅ **自动刷新**：浏览器源在场景激活时自动刷新  
✅ **可以工作**：录制时可以在副显示器上工作  

---

## ⚙️ 脚本参数说明

在 **工具 → 脚本** 界面中，可以调整以下参数：

| 参数名称 | 默认值 | 说明 |
|---------|--------|------|
| 停止录制后等待时间（秒） | 3秒 | 停止录制后等待多久再开始新录制 |

**建议值**：
- 如果录制文件保存较慢，可以增加到5秒
- 如果录制文件保存很快，可以减少到2秒

---

## 🔍 日志输出

脚本会在OBS的 **脚本日志** 窗口输出详细信息：

```
✅ 场景切换自动录制脚本已加载
📋 当前场景: 01_1.1_指数的概念与运算
📹 录制状态: 未录制
⏱️  等待时间: 3 秒

🔴 手动开始录制: 01_1.1_指数的概念与运算

============================================================
🔄 场景切换: 01_1.1_指数的概念与运算 → 01_1.2_对数的概念与运算
============================================================
⏹️  停止录制: 01_1.1_指数的概念与运算
⏳ 等待 3 秒后开始新录制...
🔴 开始新录制: 01_1.2_对数的概念与运算
```

---

## ❓ 常见问题

### Q1: 切换场景后没有自动开始录制？
**A**: 检查以下几点：
1. 确认脚本已正确加载（在 **工具 → 脚本** 中查看）
2. 确认第一个场景是手动点击"开始录制"的
3. 查看脚本日志，看是否有错误信息

### Q2: 录制文件保存在哪里？
**A**: 在 **文件 → 设置 → 输出** 中设置的录制路径。默认为：  
`D:\WPS Office\2025\254805819\WPS云盘\教材\视频讲解\录制视频`

### Q3: 可以中途暂停吗？
**A**: 可以。手动停止录制后，脚本会停止自动化。下次手动开始录制后，脚本会继续工作。

### Q4: 如何知道课程播放完成了？
**A**: 观察浏览器源的页面标题，当变为 "PLAYBACK_FINISHED" 时表示播放完成。

### Q5: 浏览器源没有自动刷新？
**A**: 确认导入的配置文件是 `所有课程_分辨率已修正_已添加刷新.json`，该文件中所有浏览器源都设置了 `restart_when_active: true`。

---

## 📝 录制清单

可以打印此清单，录制时勾选：

- [ ] 01_1.1_指数的概念与运算
- [ ] 01_1.2_对数的概念与运算
- [ ] 01_1.3_函数的基本概念
- [ ] 01_1.4_基本初等函数
- [ ] 02_2.1_极限的定义与存在条件
- [ ] 02_2.2_无穷小与无穷大
- [ ] 02_2.3_极限的运算法则
- [ ] 02_2.4_求极限的常用方法
- [ ] 02_2.5_两个重要极限
- [ ] 02_2.6_无穷小的比较
- [ ] 02_2.7_函数的连续性
- [ ] 03_3.1_导数的概念与几何意义
- [ ] 03_3.2_基本求导公式与四则运算
- [ ] 03_3.3_复合函数求导与链式法则
- [ ] 03_3.4_微分的概念与应用
- [ ] 03_3.5_导数综合复习与习题
- [ ] 04_4.1_洛必达法则
- [ ] 04_4.2_函数的单调性与极值
- [ ] 04_4.3_函数的凹凸性与最值
- [ ] 04_4.4_函数图像的描绘
- [ ] 04_4.5_导数应用综合复习
- [ ] 05_5.1_不定积分的概念
- [ ] 05_5.2_换元积分法
- [ ] 05_5.3_分部积分法
- [ ] 05_5.4_不定积分综合复习
- [ ] 06_6.1_定积分的概念介绍
- [ ] 06_6.2_牛顿莱布尼茨公式
- [ ] 06_6.3_定积分的应用_求平面图形面积
- [ ] 06_6.4_本章回顾与习题精讲
- [ ] 07_7.1_微分方程的基本概念
- [ ] 07_7.2_可分离变量的微分方程
- [ ] 07_7.3_一阶线性微分方程
- [ ] 07_7.4_本章回顾与习题精讲
- [ ] 08_8.1_多元函数与偏导数入门
- [ ] 08_8.2_全微分梯度与方向导数
- [ ] 08_8.3_本章复盘与约束极值预告
- [ ] 09_9.1_二重积分的概念与几何意义
- [ ] 09_9.2_二重积分的计算_直角坐标
- [ ] 09_9.3_重积分应用与总结
- [ ] 10_10.1_行列式及其几何意义
- [ ] 10_10.2_矩阵运算与逆矩阵
- [ ] 10_10.3_线性方程组的解法
- [ ] 10_10.4_本章总结与工程应用
- [ ] 11_11.1_级数的概念与敛散性判别
- [ ] 11_11.2_幂级数与泰勒展开
- [ ] 11_11.3_本章总结与误差控制
- [ ] 12_12.1_向量的概念点积与叉积
- [ ] 12_12.2_平面与直线方程
- [ ] 12_12.3_本章综合与空间定位
- [ ] 13_13.1_概率的基本概念与性质
- [ ] 13_13.2_随机变量期望与方差
- [ ] 13_13.3_正态分布与中心极限定理
- [ ] 13_13.4_本章总结与综合应用

---

## 🎉 完成！

录制完成后，所有视频文件会保存在：  
`D:\WPS Office\2025\254805819\WPS云盘\教材\视频讲解\录制视频`

每个文件会自动命名为：`场景名称_日期时间.mp4`

